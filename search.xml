<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>2024年3月记事</title>
      <link href="/post/5d2620ca.html"/>
      <url>/post/5d2620ca.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试。" data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容。">  <script id="hbeData" type="hbeData" data-hmacdigest="e035cdddb50669280d7db9c2e55d831e65043f92c9e3d08f5495be98ae2e400b">ced864f45009da4e5537372f52405f701b2b12280a593c81454e16d3b18bc141c0e6a654e86f36065e1bbd438ce494d5352d1faa06f37150fd53df87b35de9c982f9cecb89e021cabfdbe129ad2ca6766d144662ce6f631d3e326137657d10458383f6efe2125ad62da863c0340b68bd9f52f35ffb4f5fa120c8b38f969a7bcf01b6d6887919a40623256b9783f9cb10b7b77534e28817b6e18ed95acf83ee5b917f2918115cf7ecf008ffe2c17d8c145c5fa42b6220cada9cd45d9b0bd1f66aa336d74c90be99abfb1bcfd0635379c01818153d7d699ad696ed40fcd0f71e72b7deb899ad1553c766a47f4d08417efa4ff3ef01091fa9d006148fae8ffcc616f504bb666ba6e2f2113be27221e7c79af5abef3201516bd4b68816ff18d6565da16970667d3d4d0fa40f03cf7abb6cc586d3a2831ac51a7525f1a727897c8a04666eb43866e5d56bf4035e9fb07076eb626cb0506b88ca80ab852154719a38641da59d321a4dda1d96c24fd1462a0d6867cc572d328ff453bb7c1b0e4d18501ed54d1708da5074e7de0bb1ae5e8fb6cb0938a3029f02c1a1913e70b37b395e1691839fa7f275766a298693b5f579e924a7b0401e70e2ef49a90cd76ca27347dafc86dfb0ae8addf4135755bd6c5bd085240cc871f3e3e260624aa3a1c1f2c30be85ee07ecc73e0982e82b3aa512ccbe9d591f7c80c34a12a83d612a6a9d60c31d13e575c6d6203d0a0ff5bd0d8ec6e1b06a49ffbca310182bf21d2b6bed7a7fa9ffff923978ce67e3feb8acbdebea4f7a7c025d475d37b32eefeb3abd48f003a7461050653743d08f021db636b2060066b10cb0d1923ed9979fc32d2824d7cc67cf0870b3bc32aebf66f59330dc18369c4c58781af8e6c7e29e8399f62a6318f9f683ba0fa1e7c4df625dc03dcf7d316391d903e92e331f4512b89e9c2d408417810a76e9b3b19c911b98e1ebf0eb323f07dc222aa71b576f45572eb7f1a859ccd2a0d83777f03ab02174424bb8c5f7053f04f87b842e49e665239c3ff207259bdaf3f66217934549148d29f262a7f68d700ec37f0b3876b29c1d32c427b0a07bd28e669f98ab61f68cb4eaca8cb614967410b34fb636d4ea83328f9470755a66f7bf10a2d924c21a4c81f965074f2f626ebf2304c77ec3536eb9d76bc3e76e468b51cfc18750a6d32db2141b8610f2bd921f80444341da2be4432fcc4d6a41be678f3088196bbefaea16236b6e8a3b5429be834fa356d1e6af34fa3b611a214621b0e8d3273baae1c49c577dcf24e8a754e3fde680d027cbf18b3b8378c647f</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-flip">      <input class="hbe hbe-input-field hbe-input-field-flip" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-flip" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-flip" data-content="您好, 这里需要密码。">您好, 这里需要密码。</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 生活日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024年2月记事</title>
      <link href="/post/b2e44bf4.html"/>
      <url>/post/b2e44bf4.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试。" data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容。">  <script id="hbeData" type="hbeData" data-hmacdigest="5fefdb2dfdca3adc1dcee82a2a3c7f3f405775137b51f4e62db669977a863f93">ced864f45009da4e5537372f52405f701b2b12280a593c81454e16d3b18bc141320f3768f7705942a27c7d9b3e4f09e30b2a8ef630dcd6b8315761d5118857db7f9056613704187563cd4617b886018cb01450a5217db4bbaf16d3514b10444ce43eb50ffbd1e556babe14f24e9e1fefd4a1613313a0f39a85752addd1883ff2fd777f560645c7a17fff57ac63207c485337af51f51353754e3aa80ea13d16f8ab13d17d8d2d7750da7d3525e48fd66f888bc79f24b5089413a3b6ed8bfabeb86c3f45e9f9bdf9a056132cfd4570200370d2fcf3dbc72f7b66e68503f9f870d415b193a3920fd747b9e9cd412d2af0e893c1e8864c54f5b55e8695dce81c0798734b15b145299d719a5169c62369affb8edac2b0e26dd5d28a5b463c3ed22b895beb9ceb392196ca456caf6639c0b48a84dc6cd16b5f01011ee53c4a46f3769fe23162c0a28921001a9ee78bed71863bb1784753f6c4b1578cc199215a1637738fa73dd5b895984b4c9d73a986387ffa4ffd27741bcf9d159d3db77f91b931f20d9668968b79c2c74813ced4083aee4dc52a93627ddb125390ed2dd423af30b948d6b01c843dd116f250d7530b12a1e5626106ecc63f2010dcc7210bbe9bcb4dc39c18cc2dec53bfd5838e12d8bbb1918acbeb08abb63ccfdcd26c12df4f00cbeec7cb3d3e2dbaba7748ae36e692bf7e43695aa60b8f8385538917b368d2aa2fbc549d8232d41985dc757b4c66b6c1806f9714b27f3db0f87e2709398448e637dcfbbb3dd9384caa6221619c6ccd0ab471ee568a7cd88dc2be877769377927e4de311ee10e1b3466ff203b3e9e0a38fa158c76d9a0b8f3d008a8b70b6165c8f26515bdae28cfa010c08c4f1d2c65ce770e3eddcbadd1bda0688bbb567201ff5bcbf808f77c746f3987d988501907ea86599cbc3bce020279fee4b36a04cf204e62b686529a7b38d1fc27419fd1eff4be07a945e2a3e02a013b3408154ff12d7e50891a4a5b539cd6264952e9c875c1ee82b7c8330c0c5406dfa684103fd934d7ebd6c14f41aa9350424b1c811b451d710b57eaaa4c80fc70f66032a6d695d0dd2289129cd874d5839a22dfe4e01d5aa81970c0f2a9f20cb77a834af3cc1108dead9d0a9627524ab32529ddcf98d1b50e8b2bafccd97e0c0235fa7621f52d398c918650806a8693939e528b95fbd05182c04a17dd7fb97e14ee7cf3d1eb6d48de94c63914f9c8253bda5c23dc3ba19c5740f0b77218c294d0a8c32f82fe71f88fda5d07ef991d13436196c9428eeeaf94f1a57a6a5a9d168feaf0066d754c503deb89257868d42ddb582cf86f06d7b80d0e6f40da96e3b885f3cdbf5c6b6c1bcf46546f99e605d5bb8a6e71ed072248c8a6e2e1704d9ba0bb547975aaf9ea8e55a28b0cfc8e16710d2c16077f78cee8fc8eae7c934f9293040fcf5079165a03033a1f0d35540ee1c9742ddae802cd1f9a4df6e48acebe7e7556207ad48f516888df9a5ce4905b9c1852da8e8ebfc616584e5731fbcf741fc288436fac9ad25c0f1d1c092e31d327c92638addda6dad399f1f8f1b0881e07efebc236aa01e41d1aa9d2566ff8f79eed4abb719168d161bd7cc9df7314480fd772c5bdabf29a3e5014e018f7ce92d38631d34c85941c2b5996665745caacc36d992b86aa084b9c27a1a298ee517e3263cdae67098ce660d731fecfa76170050dfbe742d5f6ba9de9da167256a6da1c28b116c345d4c34e084041e7c5c1a0a141fa136802f30766953a43571a130ba254529bcfbb03edc96a464e42810db5a34bcfa506133763f962b1292852722dbef298b2f87223b36e0c2e1317780ba434f20783c53d206407c497f8f4ad64bb99356974a278738bf3c6b3121b4cc1a0e31636055466ac35949635776d9b03dd1be95911a5e38710745f0f20893d9c882cd627668dce3b0e58914663dfb8af7cae25185f9acee41da83f9435924f3cc9fe4a41b75435d772479952b86b4737aea3131ccd09614590c02eb1d21acee4d9a5053500bd16f28329c7428cc3b6c685f4b51f2c50954a7fea62a93c9261447fd52224d917ccf6582a393679cdab95603ad93149be73283f6b3171330dcfb1027ae7b37a479edecb87d467688a193d03633baf0410ff1ea202bf7f91942318cd7d67b049369801e7ca3f7855de5cbd70f758c12009b6df8ee3715db524f1f3e741004bc16701694053348f482126f7ae947295453b650a35ab72cb4193b47a28d6cbf7b6579aa1ec3bb0a8a2e9b8697ce9cda533dfcda3c73d6237b680e564b75d061ba64df66b07724acc5020f567b358a4282a5e660eb85029754ab57cd2e990231a50976b946963e5eec05b985cf49b047344d136c518ac7c829a51c374ba92c655c7eeb9d36e0e67fc15be31c275031888d6d4b7b99911b3908d7883068897fb65be85db2b718d03d39387712accd87ef87bb4dee0062e936773e2ef18544be6b1a3b8aab322766c52dfce79ebc28182c8c449d927ebf5bf8b11a572109f151764d08cf17bd2aaee0c472797ce01bf67f0c7a3540f9de7a6085d295c34ba723cdc3c7966d30dea8f0702d4aece01ddf3f9fe79275bf7a31403b81e9e0f023b88c9cf6aa9bba9cb220b47d4ecdd0d16dd6fe7f1e0983120989a78e3ee1fa05cd738bebf5a20b230249df823b44457df2ab26b168a810235eeb6c992124e4f40d8ea3e0407ff86a3480ba76ccf6129e2d0067e5448cdb9d16535fdc3c74b36664c7050c0f1b0f37de2e7a76b8a83f04d5dca0c6d402611ae440160b0e1cd6048425b188eea73d8e497df1ad14fd6956f4c82693accac6c4c11929c1e5b228f6c27c398895c39c16cf62621839f5116f4b9f186cb5b6648076afadb9d510b7e91f0d32c5b075c1962ebc53477e2115638c5eeac378623d73ff4cecf62f2d315c62153ff24629c93c92840f8a27c3e5d8661b2950af38e004ed0ccb9b71e65dd35148f5501d18ce305eb19a6113b79e054bdde2d81b92b2872f88f5a3f8f15c67c9ca9c5692f41852b32691cb0e4f191a5994dd9239af7b6b71af977e63e8d15575a1e2b0b35d21fa2c295d39a6b67a698739787a8fc02bd3500acf6caa73abf95c0f94b3a929b0286a4ac19cd31c59e76c561594c7303aa8d805d689987d3ee99dd7002e5048389fdf18d187f7390d359961fd9a8b3fa3cb0b692603a651234cbd5a6f3a79fcde881b89c7beea15e3e11725e80c08f86886eba7e49290f8f500ed44de64ecdc5a5b3e4ee8ffa5957c0acaba9abe6752b0cd803540d686b5b975bf060bece3926f940d87eaaefdbfc9139d3452f11061bd7f426b267d313254840a84784ec06a0ee030609eaa1230175b1e88d10b3e59d33f1b87a7ca0808da487855c71f95e5f4c59937d19f9d02460aeabf7f8ce01d929bae38136e68dc709a950b2c187557283b2a35ee1e3d9b463e6eb1b0549244a8a6bb4a87f9a395bd885cb3c1ae499506992a65f8af2573f7f8e610e4d645b5f3b0e6293949764ba876284a41e756d63f4a429d742554ab6564cf34c9f261b63250c1d69848733e91c543e3494ef66b6e720e7adb666b5600183332156c045b498f45140d0ce06d91c84012af7822e3191a8c3cb3c874fb4470bfcc219e53a9771279f7c2f752cc674d9d67d41bfd0f214d085e38167f24ee2bd68a98ad25bf610d99eb3f293df66657662208ba76517194c9018dd162048c0745ebc780c2c0e1d86c22e33cedbed78b6bda781820559b3d9663119a5de03ae33ce564bb140967ff3e43cd85190d541361b628366a3ef8c567f1695abb00c444ec1d99b3c2b4e2b47c725b5752fd27e3ce13a3dceaf34309c39b1a3530bd1789f73627d46df4eb20ec9269c40d14c07137eb5c5a126f2162b6e36e494e66a5d1f76e9c265702ad3e2bb50ef2b38fcabc9211d3d0f9a5f08e1955be051576d84ab6bad303f8f7432d008f06fd98d5e135ba92d64046f2084a371c7825f145052b112e0045e6777ad2d8063443ff586dd105627c41bd76c4465cfc5be577b35612a715931a2c93e14bfc7bee033da72339e4e3bf2104fe9e0ae1803480f1bb43fe0b3b5728e90032796d7a99f7e2ae3ffa6d7ccdea60f4467523539dbaf01166265213581fcd48adc122b972d33c35d479cdec5d0a1a365cf9c4549fe5abee12054a38b711d13396109484788d2573332794185e8ffbb1a2186c6174b419f576cf8299f723367a9e67366c2d7b5c6c11af901ba65e714e8c5c2ee8fd5343ee15cef4a5c1e293587c25cf5dd463af00a81640b32d7ba13add7e93ad7c781f153e50444fb3440e4ca40ffb69671c88ae715d96f29a5b336a372a8c8233736ff6a22f2b79147ca2abfc6052540517e78df26af61ea353b7ae3f6ec1a051d013d0c7c40be98302571d9023930c8c5a3eccec1d23ca66d7558664ee1df33c4a1b1916b05dc6db5f42a29b404dd489091922637976e75e0f7ea34458425edc22120916a1ae0fd13ae53d705134cc5bf89e173b6bf5929a4a2f52ab1fde9f9858761207b62097c2afda24ad387076bb3e75838b9c31fd186d86f9848b71b85e080beacb24144fd491685c1382cc4ca1bc116c1d4f8f14bf76fa24e2fb63f0880e05c41605cbe5699ebea22a6a68ed9970b514e6068577c1bfc74de321289249bb9c70b9cddeb1c44a92f8916a42cbc26fbb83a3f3d871abd71eb90faf8c6dbc24f460dc638971a57466b8c5f6a61221600cf5ecf4afe22b9ef49dc8c8aa31cb19d19b6fd3d37bc533a4df5986547335015d72b9c518b32d827356102d01a39ff097493d1951004de8df183f6f183914f762e4c678d46a570f7c14766fb17587397e022e9ac2060010038ada256886a9840c0eb4e47fb78a9961ff267d55d9cdd7698cd584112489a8b08f1f44fba8db5c87c1766b9fd9351b88c7ae44ad7125f463b0e2d2e12da966f836001dcaabde1dd5c96078db7f2b58c0db88d330b5fa7eac1fb6906a123a096170bf937f3cc173da573c470593553aabff7cd5677e2c3c4a492f71021a24bb93e956e93f9e1291340c3e0ebee26359e4d0abf1f30473f452f49ad18df398bd24b8c464387fc3220c3f66fae3efff2f6d82d9ad1cbb457d57c412270c7caa3118cf699326e1b06f1a891c9c99c01523925f315434f3db897d6a3b29fc53690863eb7d9c6f139d789a425f13eb64fbae16e1839818b6e63e4658c5d94b55f2d59c0c35d679440f23f870771c1d5a80a1c3a3f7def50be71e8a6d6672df4e69b20b9354ea82e92898adbac9604cd8f45fd54c1effba0280de46b97f02299fc43da3f941eb971a73cfa8b564a01d900578969d2ea0cddca22b7bca7daf14586ba69113102078a0dc9d931fdcbac09664cbe28c80a2ed035f88f5bd7439372e4b30e98e108d60392fc03a5f648687c241e0ef820b8c2b65d38210a5b7a7ebb7579f6acbf9f3265995af537e50823fdf58ce4d12452e1031229b47e3b9446f7ed0dcc0fca50a19ba97b4146350dd169e25652e02a4c1164c6567ec2d9fd72c1f58cdb4f69ac6d4cd6cc9e03d10631a33593c379eeb3fa162f763ab0bfd6b31b16ee549d16662147f6d067dd73eb503d53c7c6aa836caf18e089955908aeee85196c025d542679a722713e6c76ad0caa286b1096fdd3499d582bb52a99af800e6e30bc0aa2fa818ba7af4a5a13b5c67737311ce85fe8924dc3f4f7d1130d6af41b79df9c20fb9c2d143a6025c202d7866611a6e0fb85a37a53c4de4f304ee4c64a4052e016af8c7597888caa852f01de0b1ab2ded165e751aa668216a2c61e60728aea1b4f7fd79aa12ed714807ad6e0ada7b34b398b0757bcb76638317a2c7136a6f1001745df99ca6c89690a6ab75f3fc031c1644c56de38ab24e38419dc207b711e4e6b43fae82709a4b80a593e9e44b61484ce6ad020fa1e9f6db79d8f6b40ded9f71fc8e9e80415490b9c9d9d30bec5a2aab8c103d156b31266d62d56bb525950aed1d8ea6845e09a3b28fc3383916f488e6b8a1bdcc9c0f267514e62e5e998e68141adcddb3948f80a9e8330078c888f623524c8a44af145eaf9c1cd5887352cd287532ea89ba52693b6fcfc25e73de8b12b2f439b8547ad41ae54009d2540653aaed6ee4ace35680835425f7829de267ec4b8046bd3dd2230911799a682b0fe99dfc3d483efb1f9f9d1c05f2e9a8ecdaffa3e2874983bdf37bb9ac336370d5da6a7c8771fc94149b6b6ec59b4aa15a2a509041934476a1df9e03382f0aa50822a986837e8a57d463d285a951bc4bf72776974f8316642ad19389f960fe4c7e5fd4f2f978ae4cdcff3456a648079e8c310efe153ed6a0421a60498c0f8ff87244f17f84146a3cdfedb01d9912a38b18f40ba57236c4d1dff4405614e317b62c171b608deb581ed25e1339aa15194404b3bd8e69d2255c01ebed939e589e12303fd9405f55ee5e67d4ea39b78271b4ab0bdae65716c690f747e8094d0e1200574ea21e62fb4ca669716b8ba8b8e391da82df602bdee158110c50b405c052486ae9de60b1d860f5b694a203020b508bd5f4f483565ca999447e9725974169e904b26257b66ce447aa39420039428806932a695a510180eed896d931db78fd9cf7223c855ecb3a0ffbc87f2e3f47ee8bbccfe3d2e0ef6d7f30e9a3b326dcb6c2d234c498e409bde817db446ab886740283d1a1ced49cb565796b3c877d945f8ca404fd8021139c1a9c89b7d2c8d3aa1443df1ebb8ee6e53cc8a5c2e462d354415a16596a0a24ba19410f8651dadd43b5bdf4f6fb5106fcb7556f6bf7de78d9ca715c0c586f01b7a76c7ec0549bbd1e47413ff3907c9496202b5d301e70bf2edac28dc4357f1e8ccc2d0d45d6947e68ad2bb68a9165c2f81c841cbe0301f76ee30cc21c109936d59924dbe796bba15ad1e1c4732f13639b54b687e0d4957890507ec3cd2aa40a8f6ef04f1220a5556ec4c5c430bbfc5d3f4c307d96ff7f42fad852f9e21ff1c943dc9e02857f44677744561b7280d60ec7690c12ae44dedf41ac8d25adad9b87447a073eb34e606456472415ff2f5b41750e8afabf7274d186daf2a2fa2f9af9bb374984612eabec070d3bdca077c5ec3252be099bca3eafa5861eab4b41ef36ce0b49d1d4d30b2254aabe5fab7482d30c6529289c5e9e3f5c3df5dd5a8b8fa8a4e762b65f3a887723765508b497c43aedc2970eb880fdcfbff592d9470cf33a33eefa27d5b9df0258866c4e35de6f20599f4235d1e0e722970bee8d409854f105d39b78eff4ddca2eefbb2a4d7a70a40565a231df637c80d9e42685276d99026a265e38336498f1c98924f090ac5dd7a77522d6664ee7e5f8cd939b0b76b78f689b7d07ce4795e169362a9ded143d6df19fd91e90555c961bc5fcbd83020dfaa487635cc3a11f1a414c9d8caa25dfe5324151764c36d927ebf361caba396125ef6be99692f897fc17fa3506f13e12869e5db12c9f2cb6b99ae1424754d7cae6b5903ff51b4b3fd9f9a890bbca4f77741841865087e55fc8fa12ebb33884d1c19e43b28e1ae7fe1f1cb97c0f5a7668b86d8a6f9c92d990e55d8e2c56c7c7eaab65fe856132402fa03beb1b2d70b7c964725991c3e971b0c0c60750a30ef149b459a00e304999bd799fad5ce12a3c0f803ba313f70d946fafd38e0345672ec3ec16a319050586da51e002009e1e79de376e302738a4da1b21c4eb332d6387d77c4880bab2959bca7f3536aa88fd14fa69220962cbcaaca7abee87757c9e52cc9a0237275d6cda9ade3e13c189c9a917ba84e1328e07261e3d3fdd618c46a0da1945cfa703339303f7cb96bb9a4d38d24f50a7389e2380195955ac8030c65f280c8762bdf610f4c2f8b389b3552fa11aeaf56e6e7e7cfae30a87053dab42f33af2554950835fa7eec9f7436577252089ae78ea49b01fcebd2549e0e1e36cdf1ebdb6a396b119d78f8cb2a9893140df91f8195c11284eeacca4fb35c3ca167eea273cfe8b2e18bd3219ef22161a39f7920254893c375a2dd25c865df4b63724dd3607818faf343738d8ebd934f73c1112dc83777ba566d2259a4dd5856aa129663c5682f218be4b8b14e6e0e12a1558b21b9b4732dc3cd0375ec5ef908d7b23eaec35001c20682537a2849f546802d67be0864396133c33351c87caab925410e8dbf8768d88e770ddb904ebb915c57a3adfcbdf3e6cf4570d5815cd332c63724a6e4131f9215c62235f4209b175393de21a7f4aa59092ea046ef22d6114490d37bba471a3a41e6bd1b56b077d895a6b87fa9ea585cb394e852b42bf99bdc12bd6d20ab938a46905200e98d5c57d2ca74a8c7843905d6791b81b2867f4891914c61c9b33cedaa6132b407bcdc9c8294f3e375ea4a879bfa713ff8a44264d2bc6f67ca92a2ea3f224c29714e44672a19a975956c8621bbaf6e98eaacc561e3203c9842e93916557ec1ab069a63f84bbc65fa6cb78731780bc1065b9097ef18ea0b8b4818b2ae4e59dfef597786679184666780e90cdc2226dfa4ca4b3d0961d2bafc2667b609d1b87804fc07cfdd04d07720bb7cedd68089dece15dcc152b1bb5f2932115730efd77dc904a94e2a95e18fbafd605842d07c9ed05ee88bbc5818b4fc8a9b99bcfa87bdaac2ee27561b67548ecc336a8d26d151592d029c6aa55cf1c14eac96fb4f23ffeddad024949ee7fdaba306481598eac229190ec4d625c2e3408609030318893f0baa62c7197346ba3835bbc561fea41d40762a1498232779eb5508b2a81b767ad32672e6994f6a8daaf9d3dc4f6b1d7638fb9d9b6f4eac748442df35b3fcb61cb096023ad15f00aee32eee2d8300b7a4d97d19eb7fb188927494d3cc957d1b0053ddbed407a2cbf27f1441f4c5eabac4a7346eaf62d0efb6ad69f4d617016087c311f46413cdfb340d2f8e0f511aa725d0507ce0cafbdb4761be2ab7c80e27a594894bb87e94f8559c1731c5de91445927e6ed4f0df3c8b83e2751b52b2eb437b24197af2c07111f01970764678801f01d5dc3b20d2cc0b534e4e4dbf06c223d5d7a822818d4d1f6db6dd71977333c876b2bf53feaeaf545dc6e71b58e7353791571fcc53521664a4edebe2ecb7b6d1dd5cd0fddca4f0fb947d66ecd318be78a920ab94eea221cb663589ccd5d686618786bd46fc0299a48598d7985e717ee789a10289fc2b0f9079a9931cefd6fc34e33248b1c66f9fcfd0270ac364a6f69986e1a0e1fbd681eb03c7bbe6db6d412fc988b6d6cf85cb627fe4d3dceb680321acb1c870155be51badbfa227bfe27a9f696e3acb621b5204bd7a0fe050a11eabe7f81c673f1d0536ff9aa07bcea3b026a61c8a14e7e920c24c55e1f694c4b97f377662c58dc54f151143c73b7c767e754a9756758e204c47ec9cae22771c6081582afe352b9b28fb9b02a06fc238a11214617fda40aa1fd6ce9a279a468392c62af811a5121260de68293511fad6c77e7bd556a64f66ee0a4b705da618bd404732181c3ac9a3472f5d573f4179c368b774ecab3d1e3f008c1b51cf30adb286cb325b8be884210b727fe707c9515428886d3895fee6a8a4d542133d7075355aaefb16c77528830c57e8c09ced376e9acf88549e38c97773135702a56336a6aeadef76c5cbd3c2f854b63057242ce13023f70b3da2e9af834a408b26d1405b62037598b4e65eed07464ca8166280e9d7b9aa9fbc382c8154c2e64b0be737d6ae24bec72161e5a8ca9a682c7210818bf7df4cec1ceca4f43cd039230846192712a6abf6fece04c3317de61dafc367cd4a6b6da7decd5abbb0c66aceca6fbd96675fe5ea94648c2eeee36332a092946b22b07e713d78e66e0464bba6f4cb3eb8d5dc7fff2b5a562f4f7babbe816223753d86d6ffc225ca3db8c5a9d8f4bc372db7f6797d68f6beef92c647c7214907f066cd6edd8c6663bbafa38e1d7af0eb6d858c670370a00f9c2c9a7f1e24d6307779db68faf7de3e887e5948a28d2430f52c1d7149d4af05c355a11c1a1cd3284e27ace1763e42ec99ae8aa984d3bba31b58765c9251cf62f2935f7fc45b04da5097335c47d78797c4d2b2d51f106679cfd855c565dbaa091421c3bf04655ba6c52dca1dae1bc728bfce8f5208d89993f78102fbe4f7d57aa65c638bcc544b99f7c5d9375b5887eeee763122abc4400585ac23a8dbf0663d6f50c4ec18f2ad5edf711ffdf9e62d5f7038e597a454114643c9c5a53cfc5063a5064bc733de15ec6412ce7137a459e1b4c16e980e40b160137fe4cfaee12557ffe020a2751bd2f9f5b3bc5f35dbd4465a992f55bac6da429c3363c37f19096e890a9cd633a5b8fc62d6c4171c95c64e4e64c939defcf03b618b4b616fb6b482b1d51465ccaeddfc93d40e97b336706e1c1fbb4491d0ff1e33f242966dab71c2cab3908051333b963a4c150ffb532e10a0323e17fe48d30a4258c286135de6c61dc4a5dbdc95321254edd9927988a7a4a27b0f2009a61804a80ce92080dceafe9beac58298f687646b6c63d8221dcdc22e7ab6ea87fd81d9b56df5e8f9c70e3cb1310a0cc055dc88639b34280a4fea990d869c9fdbc0661f3bd27de9686c147a07c7af5b47ee2a03aa07d6e9281cd3205cfea8ab5d3d51bffc5a327b7eb1900cee877f0f7f5ebd88730cef7b6257b6f34bba4ea25d765c749d6ba1a63c2093216dba9fdd799507f7a174e2c9becc8e0d50d637dec55ef1a25abcd99e0618dad130347e161be09047a0fc6bd886b02661e2efcfe6b62c96197ae27352b023f17665c770db0e45571b4612c203f0fce9dd163d615c5a8613e74b640669ff3c0848c2c1f77586ef16244587f1ad7fd94de392e3125a52b08e0c1b7d99f67e90b3aaf2dcfe0e971675885dce18e09f11436ad6212dca1270775d82fe636b6af729c025bfe5fb6284ba66c3bf2931dbd34c63e60d8d44d2cf58841adcaf9003e6a6095848d55063b82e1191a93b0749af0dc3ce5abcae45e14c45cb08446c645455d7ae95f3fbc49995c4d28759cb436ccb2eaf56fe43e77604aed3d3147cbffa6a573a0e673c52b2062f54f515ba01a74d5a171426fbd48fcf711f1ee88b565b060c2a79373d95a6c2c2c4f968a5f7d42edb0e23dec84fb34bc9267f92ae3a4f64b1bb390dcc463fc8c8b234e3155937c618fc525010a5bf20c7bc73c1a849e9b465905bf3da8abad573419f929ab4c7c4151292a84886f6f546ea0aec2a6292c0673a76e7898c0e5296ab51e073f1daa54ea9f8f3319bb7656466ff05f56e10a4823962297d6c9ff86976538b24391ca1e01dd73636d0d1981e9a100860b06c34a3c45ee7c85ffcadd85cbcfe1e803c85659491793930f44adcf1a49f20779d0488490a31891b9bbc7cc762495f2d1222e0d22e799fab62235e448cdc1447cf4df88c176b958ae94894f3bf9bdb41ebf70e87b6826001e3aa9c368e2cadff32d7f2f2b39a47243f9634cb1d74e1f33a30de74f55cf6c778f1b5b914b0db5427d41bf4934c52df0bf50b1a662f203318fe88976a49f44b377e8ca08280283e229044ae0588bd1622122f010c87974e7b0a8fe6978db249d467f1773cba1e4e75f93c03c1e3c8b9ebff4cfbbd317908762beafa371b86a4672351dc4e67609fc6745bd2a19dbdad237e8a47214da8c35e9726789e118793edf9172abe6541a661ee2d61d2be829dda9ab61adc9bb6d3e29f61d1b1ba9ed2b6366ca5ff43e4d4c285e7ef0e90d14d54e9a36536544a5a9e31b69d5ddb1e9dd7a35a2b282aafc9cf336d320637083646080d18380e85beaa0c848e1cc5ff83a8448698527245fa2b1064f5f14cfca62b6a5faabf97e909237474f1d4fb66211e1303cf4c2296557f2f1c68f59393ddf8e69b24ef2312ca54a956d51f14a8c0b872800c83fd8305db4640fb44a0c1cacb351509b878deda1aa4ca9be549f91efe3d68fe34ad83f54e3412dd7278b9d1b7039779b135fc2afbd2f26183e22f98851363011de1e2d27579d8070c13fad60fef8484e83c92304ac6750a755bb8599b8b6b5e9db631d20ded47bc4def7d6cde0b40fa6de25a228b1e7a7507b8e982c5346c9be362087faae89575e419e71a18a70160e3036e701efb8a7bf8fe6e858d12e6f26e2dce5c6b7f92131ff57202bcd39f1e5e8976def64471e2b8de934ff4a0d4dc9baf1773ebfa149d2b0b0b81ab865d73ef19f6f4df07d4007a3163440f22ec2361e9f93a221431e299e53b1b511a4f36536a42447e1b5eb3f310dc51f56274e171f1d2c5c320caf77396cf8bb5fb4f6e6f1e3cae2be3def08017b2ccbe9f7043157f80f3330442c5f39d6980120ea99be14fae4b5af81c6bb0b0457c3e78f0eb75c971c9bac1c37301fdc7d5f0b0b965b3b854af26754568602bf91054e93ea62c432cc88e9a9cd6f65cd3af81a8cb2e5957d69de49d8f626ac9137eda3cdff7a10fc2d603fe6359414b9e3eb024c533e0ecf897d1c769ee3016d64492e33c18ed0ffa3cb9db62fb5918a4c81ab911e67cc8c51e0f8e0f278bd8c0dc25d8fe3f9924fa6df584b0a5e12c2368e0310819255b505551d223e2161a07a9dd1b6379072025be23d7a8e4a1543bdddbcbfaa45c2d53728cb0edbde41143ef8a0bccf1716f9c9b1e075a971cb00fbd5bfe6cb94a318ce9fabbac03fc34e14f3e0558a019e7e122c33ce8df0cb067fb20ff17d0a522176afb35ed611fccc43631bf614e17dbc7ad8d772fe87d0b68012584f7eb4a14e6819fdbf7fb34f1c740a74ce9e3bd29f960bfb7b7d2455596346f777da9d6657b2667417215d314fdaaf216999d7cb82a78aab65e0a373368386a7734bdc8fddc98f8913db071a5e1fa5c7c4fb8874fcd15e7f83cf106b00aa1a12424d9bacfa3dd15183eadb348e5e5519311d6169c7213ca6c1ccb8138f1d1033f87dc2e9def1b66bee3b785541a3ec0dd7a3f19b9c4bb5295e98a0f772af281512dbb120f9a1c0c26366f357468795edc77ee31a449ff7664f803c70c5b805d221b043b66052e07697e4d40d3442a2e5192de430ff7445d36246f4b2310f81c4c98b3382ee1369b5a9ca010e4c0c2a6daff800929f29f03c5df22b6fb4d77a04d2021f1fb56d92a097b64c0d1d61ecaf9a06c04c1a28c51825e9996fb5ede1455101921ddea481553de3149859a80f9705b07e653e6bcbddabc3aab439991bd8e45b1c57fd532323b868de878adddaf24c3e3df717e87b8c907bd0597850c4e104e38dd20e8ebcdffc417a5e128f9a77aa44a352ab250b5b5fdf07c065e9355ac8289bf274a74448ff016a6f1091caa72c7657cb755482ac249a9d307cf9e68f453083aa9c8ac248b3097f534eb22484aeff389c9fcb84fed3d1b9daa1c36d69536f134f835a5cdc058f2b5bbde5d802781af66f7c2dc4ff9bdb0126de8e57a1249b1be0900c54e10826c2a78cf58222e2257884de042d5d8e3be11da0339b2371b199f329afa3b14143824393a02614913efbe05272336a866626dd501e1eec855e3d5f8817b50620925d6198f6ccc4dc28bc0b18dba08b340bcf23724b41219a98f6e3c09d92e142db17a69f33870f296f423350676a92f05b13d1ea116a8c7b9a3ca776cc14e54476849e8eeb233768c1333bc06e6e609e45ae1f2628b22b3681a5477d63a3986e8464674ece73d769fcd1a9da5ecabdb415e4bfeb5e766e0d8e1c7f6803a6ab87eceb2ad72d99819e8d39af4ce3cbdd978105ffae01982af4a978ca532d91e0d19407d39143abd8af1ad97e422ee86a20793e68ced4bfec8b11241217b722f6d543664d89766d1fd5aac3e5aec1c2eeee0e70646ea8f36b8c48d0b977bfa878c061eea131e247b0c08ad98c257a4321db1bc9015851b315594746bc2783645a19d5ee4fcea05b25195f3c070347e0ed3a9a9ba47912dbd0e1b2a9765cd4f14274026db1f887d5d92074a051c5e96caf379fc0f78090593401b30cf2572c72c9c24e7b98ee4b55e3e09b29ae01fb89f5001f7db2420731bf2f6eb87ffeb1bad3d592ebb77ba8437aa126168a326537e9baafbfccd1eb0d623472552fe73589f8cebb4c1513df49b75640f8150c4854520c2a7b34e881a5c10aa3b62f4d5a5d0018e7dfb144ff5e3c6ec47244a4867195039e0c94467ebdbb751f16df893a1098a3c83b8fabb86fe335da83ab898af5764a055d9d702a35029cd66a166c855b5fbb8fabec926e16df81129ecd613bf9977fe6a96a242054bd3271be1395f0e9081a3a3bf2dde55f4542e642b0101f12c727527c6b71b3362f2979bbe4f772d97ebbbc943708793740ea5e71979fb5e731a96632744f7c8d00bff9f1208a4f86640002bc686ac15431db51403db72b03415aa33d3c7e1ecd3a02a9eee608911437c9ef0f4473074d574f1a13472b406d104965f5e067c60a935ddd3734b21a6cd338bd3d5fd339e54f047b1aecbb3de71ddc5cc7758fb7da533ffac56a6a4b52696b5f8e4b470ff298bf99163f9bcf40ca55bdc914be4b7bbcfe160df06cc3c7ffa592fec82854edb8037eba84fab65c9874c5b3e5c1c6054c07b8f5d42659486821db047eeeb25d17125f572187f41ff575cbf1f58e3bab084806da3fad2a6bc0ea85fa84b4f99fc2cdf508d919d6bbb6bee964dff186571d8c4814ce238dc77df200c2b61908bb40d5b52e42ecaeb9bb98e96a826bf784fb62e4df2ecf939050609e6dc22b04026a50074329dbe424480d911830d21721a397245cc1c7e3631fd037748b43e7de25b1ca421e87d43eee4e9ad478114bc63d06f849fcf65df6b0e1299322ae798f8be9027b3b35ffb02ef84dfaa693a74b16654ef4239db54e4b2f48f18241cb16cc8ac14c04a32a7bae2f036a23d5c9e67fb51a5a2ba0bc3a6ccabe4ee9ee88484fa06345dc85d36a31c9dea826999863d2a2cb2709aafad16f2e3f250335c135ac2a6ee23c02c3f32760bf473ea0fa5652843e3fd8ffd1758de523f811e5ef2db5d978815a06681ed80a314ab075da2eec5de42b463836c2d234c32217339839f0caaefc46b211181f125436a12112d02aeada71f2a972eb7e8cddeb21af5bfe0e6e373c7fc9d37153d49d743259478cd583137d4305c6bfc795949ea6592229c2bc479e19eee1e8f01726ce4fbf8787c3972a174453ce51487d8d72d2d15123175f3b385f546df994ca7ecf16dc90832e703ccbccaab6531aa1bbe81a1e4293064ba21cecfef569eae48c90a4c4f4f434e6cb59fa2a581d1864a8546ed72d26a40f59f34f005fbb6070cf38bb157ce037052875407dd09684ec567325bbb010eedfb658ea17975ff60d7f161689b01b0182d43d2a8ff7523ba009b9696d624b62ee5191fa6ac5ccd7efa8f57b8f25c1b43d3abd21f6be4d5b1c51624185687b7bee137526e058d0897253d4e613caec5a00b6bd82e8705b511ee5b82b58f85ff0eccc921bb5c552af28ae04608dd4390dc867ef2f8aa9b1dad5cbc375c7dde15f5078ffee7867648cd4f6cb57bc5da1ad70a5057a42541f2f445c7f9b244b698b08609e70a84a2fc803fa9c7a769fe4f9d2e1599d5664eb0454c56d0230d4b6ca09c294fd6cab8d0d83af26c87eb9b6e137a848571163665d4c807ffd923b7a96db9261e70da3f13b2591b411e7575097b7a400b83cc2f95fda566e048b5e5fbf56f0b536ed3b1ac95d870f4922f83f507020908415e63b57f31f582b53c0baa2531c23a053455942555dd39266db321a8984905aa66915cc2bb5cef580437224cbb045703f870aea97cbf3e82897b2a5cc52d35b161c1b0b5d6115a17c4a9c2a271ad8a4e9f224ef400608e3f416e0f9fdfb5b6d63ca2e314f5a919b1f4466b490385049cd2bdbd18d7afbcc58b29d14a9ea02db074c49e2476e579e1457b2b52c949142d3590580483df1c8c2941ebf18459a1dd4e93bdcd740f93e7597f966cef84eb208eb4f1e2b6bc1bd1dcad9e8bbb262947da4c3fc41f8edd907980b326c6a051a55e18a877698b776393db3046fd14d8f97eb9cc86908e4420d4b4dbbc3ce940b6585f8d550b8d1149bb617c61768b5b90a2ca7f6b38241d5455dcc735e5f776bd2928f929c389af992d6c37f8c9e3388e181f6bfb6437b4c256b8bc94c8365bd5ecbf6e58eda616cad5abd104bba9b5d9e3693d223da1f9478f12c8001f50686126b8a437ec4a48df3a4d7e469543270fdb9bcd4658160dcd959edb7c951b2a64314c5dcb249c6a1f94a1bcd00ac5a8286dcb870e38e3615a8eb1913b84974eb59a4cccf4000f87947386d7d444c42912e5e8030c9be7e629e2d51c37ba9f837820ea4e29912979599de6cde4101184eedb51a0564dcc3a95a70a24dab7690ddcecdeeed61466ff1c81c4e6bf4a88665aad3ad56835210f2975dcc509219202f7890ff38cc6fb57e8c75f55a22624cae9cc15e81e34ae02ecaf5088f48e97dc76bdea1ea65a826cf6d0a37850596acd4337ad39e0e4199676f0dbffbf93092ce206b78ffb1ef92e54086685a48b6f11a8f97e47c08270979200a267fca64f954b6e138ead829015844b6ed962b7a86cb8711fecc22f1d6311629245a96d6dfa00b189dd7b56d4421aaaebe7bd4d944d22e808c0ce9d0adb80d4906b206075621da4e486cd7e494385d64cd18755458bb3ed94b9b1d3f23de64d82b4abcf5b66f702909b754a61cfb7aca8400a8f0085ef5372472bb8e59c4b5d896ece2482d3dcb3e860611376b08b228f347facddb05e7efd4bf0bc85c5a9d734bf3e88fa9ffccdf6cbc8eee648abe37b5933677b44d46b0e1715b2964f8d5abec40032b3343c51b614a4e49bfb97934c90bce9ee7d30adb7c626f8c320ce57af11ffccf29a5b8d85bc0c68949d33df38163e6d00989327332ed57e3d8847badf5e3939b4b559e47ce7e85d8abeabadce9792d0d82817d1992753509a300c3d6027a9dda0044c69674be8f9e20c67b1d1742e6d2c11db9c07d530fd78fd8aa2be71d8a91457c2c82e67788fce7c869cc5f1c2dcaedc334e9dec57ab12a7251214b928d8c06794cc2ad98c9c0af117b01d6743c692ba456f432cebebb1d593f180c5939ff27264a832ba3290772be3875f3a8e6fc20614be9d0b35cdaf2ae5893288304632883014fb54e6005693c456919115595b15de81caef8ac80738111270cb65fbadf1391f017074469f69503cf6c7c7f5e85a667af50fa4bc802b82aedb6756432f2eb94bc0539684b416225213a5ab02c575c074ac2415e3bf18276df09e3b3da989137049989d953c09154962c625051290e82f528162dec3eab3c8bfc6d1b8e99ed2dd0475112ea76fbfdf3465bf562807964476b9cc3ddd10e0f71c73ae7d47f41d7fd3c99a6f6c699f08c6a2875b5a702732d414d74521ce2f884ce7dc8f9e5bcebe861b9f03e18d8faa4381585474b29e769f5a3298700adfde496a7678c1fe286d1aa763d7c59d232e696636b5924a936f0292801735372f031226ae30f4b4e7500bf592d660343943219abf8d1822099a55125ccb0dd96a7cdfbd2e438598c6aaa55a9a1d13b2c2613be45af1f8b39046b1d258255b51b3e5d475daf0e51d62a31c8de238acfeb3055d9571df04422e841b64dd206e0505d44dde216bf950127c8b96aac7aa8352b0d5a1cb1942d20a5712c789c5ced44c5c1200888b207037325022befa36f0dd384fedd6f76287e160a7bd35693b494b94e8ea766942b36f538a2e55a00f3e3ebeb3f12981d799e0344c051a86bbf7e42ceab95987b185129d1bed83c8b1e0371ccbf239c0318b9e45f3ba7accb31d559c2d2651b94e7e23379421d4eb50cc1d8ce251a4936f2ad2688b194b95c95ad2901fa5f0ca41f5e9fc9ade48e8fa62f512963d13a198d4e4f9a2af53eba388052aaf62f95b68a2b37dc4b17f0e5626b91738ff1f86fbff7c37b8b770f160a29325c9e46181d4c8efa953f5fd96703120881ef47aa2158006ad08f6d92db73604e06434d8c029e0be9e7213eca19e86db3d0339dffbbf9580fd80da92e7a55018230ee2f7aa79580970ef31734915278675cd0d3703977c3d346482351bf197841a9f1177a939507000bad00142e102a2740fa095ea1158fc2eca4a561ee2a0696f1f095e3864c9a6b8f073acca5c7087fe74418e78835e4a6e54351891757a4ab5ca6d9ad0872c6286754b6cc0ecf0790e15d4736148edfda179669cdde8ce9d295689710385ad0a7a9c70b2bcacc709de3a143c45fc11ad55b6f336c751aa105dd98b5090719690955405097b9368ebbd98a16a27c2c1aeff17b30fa5399674363cfd1947c72521ceb43f3a50d0d01dd48ab51f6dfeee0ec4f93fefa3cf06a27e6824def5a43ed68fa2c4f157cbb4f6bf5b0c379f104dc45428df47dcf5f34be53cba7580ef43f66ca072fa3d197e40b1f4411cf7da875ded323db26192ff9442d58a51d9c00289bcb936fcd1df20771b396f1eeb49b0063aa86d30dffa4adc5d9d935f3d23f0188e1b3570175eeff637a7ce14d30a3012073966390922b234b8e467ff8ad4a86d8966d45d7824afe77e0cdaab773593885783b794cfa678274d0e289d02a934e881396a66549a241b2ae80fee1653847774adb2b16571dd084de29866ca04568706292aadf5bfc3f9b6918e82c2662621c80d6ef20a26edb1e828ddcbabb7011ec60a6d94d9fd62a13d329c3a48877da43e6a25bc5dcb50e0c96c3f631a932c77d1ed44a666b326f455968b87d9f9d5f0cfe3534ce8480b4a0719f12b65d71a78fec517c5146a5c6e9aa2b31b2295a3d198827aab4bb152b0556480170f8f2d6a9e7db3177853c6b135d8af4cccacdbe53481919000b58dbbb7a153e7fcbcc65f966301d8efccdafb0e0793dc25cb19c08e065f5c2a81879510db0e6486a4a9483d1230a9a70ff87856c39a6a6d47f45fb225863cd51e72fa4e9f890a3113dbf82322eaa015038747e9b0925065d45da857e31690d0aab37671f6667825594e46b39e7bcbe0b1b1a209406eafb9027c6c1ff2381673ca75fdc01c0cd2c85e18f3065ce7804a5a062917d5add55abf70766ac977d9ac5123735858c9263423a5db478ab06030278b72487f07f7fed1f1fa2d52bf746649e72d18728746a6edfc2f6d104a0dc3195d41198b8382ccca42c05f11f412e6c03423067781255d71e7d6044925c8c68540ec97275a8a7b48032fdcf883c7c60d19631fb851f3221aa2920947167ef3b3626c88a9b30455fa10762c52eeeab3d359065beacc737c554f0b6aad7d6ef6b7f9a8f7dd324b2e4911138cfb1b0b05ab6a193f331a1db9a5d860741468b6f35df62ab6ff86cdc51332b6a1696f1a6a37897ee2f520071a3b118463ad0a504a460d7b6514aa340207ce2b59c8c369937e69826812ef3b2f127a9675a49a7515679b1b6316239634825d17232862b8fbdba6ddb7a42b4a05a48320b0e68fdab6ab4951b0ff3d93a3b4ed412302b3e76de19611eb240c82d485cd02d245dc81ed73173d224ec52ba7618ef2ed52c31c39a566165caf957659eab8169bf0e2e8cafeb608190e2613c2c133f5b3b9e9ec2b8b6bdfd9e065289091cd9ff194d04d90ced798685f665719e27761143142846495f0bbd04432af99c1926d04755476b572b51cb487443bc981a3f4f415f3e76ece1296b401dc41780706c91f2e0d68a03085d0952c2cc33ecc2d7780be6c68e5824f8e41cdc2ae0c98e44780d915aa6ccfd43fdd7efe48c7fd248abd9c46507c0c8086c7c14c1c8b3fc9d8c8218ee4f4289f516f994d71f917e3bc0868e6fe16912bbb78a113b877f3c56afb7336b388adaf2bb554676eeb9a849f1fbbd94063effff007a16810e281d321c67272ca6e59b2a1c7958715ea0483a5dd351dae7492ac382cd2114bcc0d6c7877ee62ce18c2d6a0daa62f617cd2a3346c2c7accad05059b7f91703237585d6bf635874e241232e958172e4cdbbb47724c4843a5155acfac5c830f097de9ee36bd29df560bf1feb09d8d0e4daf5fa0a829f08dec5375771a76041412e1d7335e10adf1559191ed19927b0fc84d3c55169fb0e3dbeaeca2b9c242635bc483f8452666165414dd1c0643ae2c6c82d07490d3678ae9821afa554ec60fd4b5874e5407958b3c94dfaa52604426566c1b1ee564f544335cc01892ef1052fb82a8e81f0bb8543c0d194ced94468438ef4178f345e8724159d2d94b70a5bbe7d63f1bc593ae029deff379d6ed45782f6cde08b99d44c5626dd322413d606305ab5de9dc76e54be543ea1217ce28cb8ff68e97b908f6dac2a01fc30ace5a5674002119257fee7e0dfa361ce462247408aaa10712984b7013c1aab2b1ff346be8cc2e5031fa5b7c608ced2663450d744371516dee018194305a968d7d4e55e95668bf5b0b4f59164e0a02b1cb4590d2a73fb5e9baace2ab39c6316950985c432ec40b2a9be90d7896f58b7ea2bd04ac63bb6729e736bcab4a1ae9ee1a27f6c362d72e93f38fc4f71aa7850d87732dcf8c2354ed156d3e2c8bd5fc302518f9b1e3e6596f0c0a282755997b0d6a7da2dae6a519dd7b0ba98c1ecbf3219598d5d0181aaf37ddc1f17682fe01e79d4af4280e8b0059c6b9d5a305513296197cb650e0b37c84bb17b767c0a19867279f039bc9b01a41372e1cc0805ce2b8a7cc1caf4cc72ce04417bf25f9ca84f39fd366ef2b69c4291c9e25cff0da90bc5e46383dcf534f834fd9160d31e72dd0c7cb17025d1fc2ad37069216673d2607c6d98700b19ba211e7b076ca82f74e8206f3e273f4f934b67ee74566cc36eeea717be219e8dcb361d93e5feb7510a6b022d3d2808355091a35fc6cc7267f1a9e080ac6c6cea5402fa7a89a1249ce59abe4f41edbcadb4fdf1319417ff5e7a6080468466b3a14305522e77b46436f8fe4ab27730b69b930f53bd4c91710f2140c681151a2ea8b95514f4cea85530158d7a5429edaccafef0124e3f088d656fd233f8db9aa4ee28ed5d0a9aff3c9a01fab1a0a24002b76ea5a9e334bdbf24c7e28068cf397a288119198b2ebd0bdf0b2d26093eef9f3e6724d679e3f9ae162d4298bd1ef7cb762dd470deb4f823825f29198778f7f0be04c228b44a036924d64ad29badc8312d20d49ab924af2fc5afd8604412e4c9dcaa19f98c6a02c6cd7729e3ecdae0bbaf761a880de2c2d97d0b84ecb70223b4af57717253099b1d0925518347491518afacec772bf61840dc91bcb44b5aa17af8e85aabe9b5696e57af1a27f1cab4886558c14281daed13070244e1e3972fdeed146197024859ad3771dc77f3f6daf92835aea65af3716b40ff36294137429d874f49bd5d70469b1f297022ef241877c4e1f8dcc4b1913ee963e1ba925c2fc3e11a5ae643e205e53204b9b50fcfad9b6b07f254d7109bc2c2f81476b9bbaa8b1841ad1be479ab67d3117dff8507d61d88549f81436dc7e27fee593514ec8dee715110d67df2ad6fda85f6f52af4d356a0bb822f2f9c62cdd7d0d45f4ca8c6bfe0590a2e39485839dc4d857cd49f7cd39faec34bb426967e64292567a88d98a1a4b01a4930527d2cc274413b6f4aca2f4edc005b29aef212743628626290104743df4de08db51ecbea672c6c3f034c6ef3944bab5d447223cbaea31a82db536e76ce56ad949749850ab6729db31ecebdf277f6c15549cb7289b98a0b9e78bcb1ab20db464799fe0c429e22e29a26be27b6e39f538b5d0413746698b977244421a7a818a22197113209597e0f48cb5d1d126f060f9ec240e438e81ae26857ee97689608543fc18f7457966348071bb7f1d34604db80220e80c9fe8fe2e31f082b67d0be0b4549e57a180a02600341d878b116370d911a80ada084c52aa3f055aab22ee9fc3f518f16cb4370b07c6c6277bb9e8a99740b7d41496e870eb9eeec1e30f105101537cbbb5cf2bbd16697728547567d74e8cf0675778a4a8a55aec45336f8dd46e164f7d67e4f364ab0cdea6cc91e4a4ab1111e29b47c5da3ae354de61a2e2729f5ee9ec590d774af566c53cf0ce0d35ac5656efb5413155882783d6d58d826abb350c92a9fe3a31e03618e3b997297f2dca610479c3c12022a2007ba48350ecb6e648d5d80b37cbca67214ed6c12b9490056c2c5628bafdcbfac443c7f018df11854e4dbc201cde1851bf3bfb620620378b86b5bd768c6cf547088a9fe399059f9d429c68bf21bcb52d9f0ace5b01cc0cb35274c53f66a4760efed8ed9ec91b7ca639bb171ab812f3aaaaa8884efa31d3564595d7e3cffbf06b4736e23d232af04f1d93c895eb089fbe9311bef6d1a42fd8bf39cb50a5a7dc5d340c303af2ffca9e686d4e6add3f9f88c6ff274741692081db6892a3503073a03a9c60f9b9dd75af436d45d971e722eb2c31ddbc76a4828218bcdf26973ff035e209ba1207493bfe0325c1fcbb990e901b4b8a68389eb5edac00f40f1073b38f0cd12e9f4a0a8af1645c4de2fb3617f3b8f739100d2dcea1cea428638b9ebff58ec78b3f47f685346e12ff593993e369fd222eb8ba3b51b95f7d200d1bb09a3d8ed0a470ffb34d1055b1488caa697df808bd8de0d5bd46148c4011bf417753715fcaa68cde015cb5ee67d7c084d539104f8a22bb6e60d98db195e3fa0a5386df6d7a6208d3397c048521428bf55dd9052cf4e4471fc5f99320049b57e50bd7698678ce4071e310670baa310a63d14bf1a9866458f5b156d8f4f8b41ed1a5841552b46d60454edf4d0ddf5e7d0f0f2920957e6c31d6ce5ebd8da4e90c31dfcb4d2a26abaab36ce4de3634a367efb113d56b564d91418ce40498fe6503628d6bc1532a299b60fe2ab8604886930fdb20343ba8de089d74f736715137195f9599aa25352839604b817fa194a59f0fdcc2f870b35955e3e1314fdec5270265134ef21ff47a9941598c9e2c1523d1e2cd9dc2825e367731e832dd8dfb8197f10c2f151537e827db9a5211bfa9c4c1a72ce1b260ec0e3689b13a3e7095bab525c1b41a66fbb506776eaef6f2411585b2bd016d2eaa3a1643cb48d64667055411cc5cf08f61cea74a21646170279a02ab83ce4048612119e5a311d6a1079336d8a12a64ace8e7c1d50208c11b954fabce3d71fc0e509beb9da06e07bc7bfde6465a463c2e623cf797c3f519db676a464bab0ec99d9c80cb995899306ce42fd3d4ed81acc3510fcd9ed39d1617dc1080e38bebff074924a227b652fc48993d6d19a6a16528b73c4e72ae2e1068b119207fd633b2f1bbed3de1888b17b59e713a5970731023c39506e59545cb6d35a87601de9a2e40403860a2af1c58750eeddf86a232a43818acd765485a2c71f4abc0934aac40895ec92f86db09bce58b6373806a74003f0339968b72318e7074ccaa498aae7f859615720912ece5a633379376a9af0e60c581ae5bb4fccac8442c19513cfeec5229180f575f43c96d0f8d5b2c02643308e5eebdae64289581ebd28032e0db5db5c0fc9b2672d8378d47667593904f19ec02f480d212bfa49675909bf42093c149fa80ae72dcb58fb181d8263e05229bdb00acfd43d5b9ede737c68e388b9aa8f2148832c2e186e280b1340fb8024827c024523bf443359dcb7a08a2dabc47ef1ce80b9c6fb03d151371d8b14f8c35a185691309039c7caf81d246c94815ee8c8d910920ead6e524982882bd56c038685b3b5012ea8087f1afdc00b881fc66c9c95451247daf280c16deeb78e3761d8ab40c835429be27208c7bd0cee157b6998626325a15d54d7dc3f9b3f2c640c2c720d765e5289ef10c2753b24880a709c20234bc0367e7f7f96f664b32052616ff3202296a593dda07a326228cfc4b4c3004fbc709a41c7999ea6be47b6e4e5e6d49f46c2e094dca83ab42472622c47b5148c62224c7015dc2b2b5624d119f8dd8df5c0d00d3b161977a67ae735ef36c044e0f6b0f4dec30140e167f46da92efde4b1677a4ab81a1433c3b7ce3958a37bca4665326b9ee765de292b90b7317fd279855edb0bb8e6b200078c1495e2b84e1d518198dc567bde458d4d5acfc90924b4e03c2816903e90bc9bd53d4d75738401cd1b2e0709004bbecdbedd1ce4363d9cdda7b4cc4b4d810d4846c8175346f01935e194a092b04844fb701666790bfb54fcb8026e8975eb357f6d75d8221e27d37d853295fb88a4feb70fbfc2e804786108610f1ff009565d9c2bca1ec3dc989d3c5a4d9f44df61f9edb8cefb4436895939092812fcf30efdd00a97e7f17e68c0568a65dde03f54d638588f77fb108928084cf5bc288d6b472b66e296399b678d99abac3ab5ac2bc594a66b022758fd6dd93a9c1f438830f15269bcd667054e8550177af4966ee10078c592f7c997aa67d60a775e7038439078cae717ef307b9120</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-flip">      <input class="hbe hbe-input-field hbe-input-field-flip" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-flip" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-flip" data-content="您好, 这里需要密码。">您好, 这里需要密码。</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 生活日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024年1月记事</title>
      <link href="/post/59d3f0f7.html"/>
      <url>/post/59d3f0f7.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试。" data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容。">  <script id="hbeData" type="hbeData" data-hmacdigest="2311cccf01e8756315155612bddd34f59d5890ec0a9b8301747e4f03b12d21e3">ced864f45009da4e5537372f52405f701b2b12280a593c81454e16d3b18bc141d10e09de5a882728a014796c14d1a24a5891264f94183c4f26e7e35dec024a7540c6d4e13f0186a057a4ec6bf63fb9a96adcf97ca1c6a54903358d0f7d70bda32f30316ed09d6b4686fb3834c8ae0c636981eee1b6bce492ed9cae8400533cfcd72cd77ea994773b5eee236112ca56cfc7188870945ff236650b15355a9579f5adbd5272a116498fc901a773eb299cb74738b2cd91aba8fb75c3e20e904885896c820c2ec57792e5acabb739fa7744c8ff6d962568042df84285c8ade0f52d701011ffe81894410f5442401bf99c813989fd035410538bcf0ab828def3ea7a7afc36aa8eb0037475c38b515b9695260532c32e6c1e3250aa0b0cc94f69383c4e83a27163d55438cb46673d400a9db907a6fb9866ff5d6227cba2c87fbd89afd52b9d541a0c837705ce7187def8a8a2d13ab9ff7286d90927269186e8f2f3f879442508ea61a7f22658afe9910e58c1323570f9de0fa00b7b883311c14d8159a346d46016750df6aab461b87a5a6c8e49875fb71428ad2ec3c8ec3affb6931be6af485856f10498bb8e764522851a8b6be3665aced9c61d05d6035403500905b49fe4541a6c93cc2afff0d8388d1d58ed3ed2bab3197efae4f812735c77ccbdbdb6d564084d14820cc0de41f4dc52df148f71bd2354d61945ce2390f46ed410c201cafed9c3b1878165b8df73f52594ad310d9a5d0661fac1a4aee634339066f748a9cd394f8a7c8ff6f193b4d7967511a09aed5b63292c3eb976e4d53ca302e872cc4a82566a407ce1eeb1f44aea7e7c5a714de4ef9cf9272bd87efb417bde9f2de194fd6e7f90ec89fca609e27210bc18ba8dc0542273e37a7bd06f72a3fff5b0963ae5d5b06846c7b19d65b5f61e653069e6200295a1ee1b21ca4b51ca4f6b5447f997bb4294a9de4821ef5e485a267f48e2f1baeec2127a4608418d894b84c5bdd22210063c960a853b673710b972117bd88618b8e0e7a1478da608c4560f2686a6627ee4005543437d24ac2dacb5c6319c695fe964bff6d3542d2d18a137c5e5dc608a8df2fee5d88eb652483745a73a2de7088a8fe35faabe20e35a4d0973d6c9328a4c2a797c8911a80df6dfb324fecc920dba065692156d407565dffe422b921f608d80a9fb70e4095de3bbfd25dbc4488b3f17fca3a4b3611fffa0258ca31b3744aa1b5359569588a5316d24dd115a29ff775f81b3fcb7b4145e494d38a40a2c5d1e4423ee583ac34bc1d885768f44741db4be449f6aaf304651232f8f69329d304cdba40d85fd57fe22f1dc76224f50506d2439223887a3d82e85738c6be6bc14e9e2c1a784158f504fcedf2f05d3026afc328c0914ce9690d33458071811b75013429118fa1cba8dd598f1d2abf89eb50c7d2075de1041dcd429bba788c086a1b1f085b8f25cf1e6472b054ba7751c04edf10d3503606e4189aeb811812deb2c8b523f8f5fe21f5ebe2db8e64fc03bdfc2486b528c116f001ae578bc9dfcf0b600f87fb1804e5c3104456c04422964bde281d57f9b571aa363820d64c523f7f812e30cf88bb8603dd36b016d4a43d12fcefdf76a0ce07776718ffc72a610094987d77e253e5f98172ffb4af71f30c635cf13a970116e9e7561bd457c6f03d164262817354093c7e0cd53401f5f361afbad053c2d313492f68a62754ba810c3875aed7db67498b8abcdfabdd2dbbad2c48a671c8f3ac9050d0cb5f549125c112ab689ddc882d1765f9066984257e62b7e3eeaf95afef8f0670c6a9e904b2d9696d19e0519539bc8b6b20e9e19fbafb770c555444dca5def9f474d71dbeb16f3c7f031793e628b1d66e1fb231c21b07e88de2332b132e13039c9f43da582b76fab9c7ca9a751433682994a26afeea42bbfa8c870d23b30f00908552e8b4624196977769128217364a69507cc8cb1f6794074d89c8114dcfa09ae6320f129d19eef5bdd30de478dabc035c2c23a59970e7e0d7c2fb95ca148179bb5b6737c94bf4c07f12043ddd29b537cf3023edf4eb8c4d39fc775f79c9d374412da5a9d7121af05d64e65fbec762922f6298f6590932f8644be4b8f07e5887e61ac127303345416b583e48ce0040a8ff899dae89b1518a6a93695d5a15bfa0cdceba84b6952a909c270ed9680664ea4882096bd2ea83753644867302ae24e8a15563db4124d3cb5878e2198efdf7cd0c916fe5ff117b5e9d93b7f9726bd30bd27c1f10854943c61f35ab43241d8cda2d7cb0dcd54a35454eb74e1c40b2171cb07362f1651cac70b083589f409ff65689dbcabb80af14f51ce89fd8976371349ee1c9fc2ea8c011636e6f992eca0d9b0ab22b304dc746bdd7c967c508d206e87c3134af44a8f42ab5dec4263ba19d3cacda6bfb60f7090285ad5f9e8d1c9674acdd948a47f74cae83066ff7f3f35f7addd76c075cfc992616e9d7730a891a61f4cb73c91dd14dbb35d15ee31fcd0da2756cb792d87b2a8e0d8a16eebc3bcbc0903b3693327c6723c613aa376729be02191bb6b2db659a1f339d1ab4b3dd6b90798a4d137e3374367121f37a70f5dd8974485810901cc436a5c808cb92f5a8da21f291abd4a1080a1ed081cd3c9af1da70fb3f497b66b2bca7fa51cda57e4bed63ee2389199b0ffbff5bcc69495f3341deacb178d78d7e8edc87d6434c33479ce30dfdc5c08e34f5fa279cdfb8a65a1de8a75873c16d7cd463915a106ed0c2520168ba189a243d69c8a878075b3e2e7ea61ad0862b7c20a00ce767e88ea74a136689ead499cde8fa44407aa37da94e916343302de5245b23894a60c62b30f86a7ffe6c6aca08f447165d0985621e52e5722b668b7ac71900b7f22661cd90bb42bc65d368cba692135b3dc9da18b8c3769879b709942d3542e2b348d78935e9f75dec36be244a876d3ec51375cc3151cf8abcf2fbbd3996a7c21a43d02864b42edfa69a7af4d05bcca99903e11157fe2a82c766c9d2f8a189c94bdd1846cdd2738b365c98a1e29034dc40b4e8a9e134dfc5126e6782aa5987935938b613ef4b3994fb25bf47a0ebd134fed2cb6444c70cf3eafb9c67c9ca42a04307dca7ecfa9882870820a7e3717b0738a9c3994f9d8c5cfb1312b836b83910fab5e3844ca9d6f314ad298201cb3ce1ca1ea3be4f68b2efb036306e0fc963fd63d7170f014091ca6b75f3aace9e68336e0ab67a06a69be635bfe4d30dbb16b76b89237146e54e125cc4ed9a4b039d915a9a5dd2a85fd9232b6e17ad9509b93daa5428aa29991037739808e556f4464de1c26345042c917d971ec3891bb310bdf68f28ff7ba3cca8991bc476edb9ba27f215c8e30345620521e9fb0b836be5ae2680a571b0390d2d4092c6aa0d6603fda42f1fdbbc103673ce0dc316a6a677ed2780e25922544c8fcad938d5f63198b7834af88d55e3ec9f9fa97862a1dd7b89056f58fd87b757dbd00a174b3104bdf5871b5a07bc4e07b8e5fc527846b604ce0b069bbcadbd5cc42abd0c5f16e08706ab16f6f9d5881f1abbe82599e67559e794eb4787284854673c6030fc3f914916dbe633cae20eb08e43870595da0ed777767a65cd47c8e21938d544235bda5832c99907f4d8880fcf26a707de331787c87bf298495226e88160350563da6362ddd20e1159c660f049ae8377e2f426f02bc1771ccb31249009e36cc750d170d2c328520b0550a49ae6883d71d4b05d15b6aa6b734f6cb5dcc8c0ec296d8f8967df2bbb531c0578ad44fac3faa4260d03557c62ccee87c73311293798777f3cd8be8066054b2a79586c5523912a199635120e34b9a14d07e94ef3347cc821cf902e3dbe303b88906277b741705d7fbfe714524180996feef0d84da9955f880a165b39affcde0ad6e69292ca038a354acf6585fe6657cb32570b250559d5870103b8d101c491815f2b1260c56b80162278675761d7f07fd8ea5d098b877081890c5a5a66dba97dc1800c563a4d0392cb92e5d367896ce010956f86183265893f24a45bcda0a4d0d63f87096443bb0454432ef29e89c223780a7c0108fd10913551d6d22ae910a963ece144ded47377a63f99c701b735f841105ac0fab73079b0c2382374b3389d29d0baadd2ecd2cd18a9c77e984f224b79f483d049d364fbca5c0f08adee0f9a230d87e380fd7d965a46c97b127ce666ec8823ed02903aaea83738ae5e4930fab7db3635917881442a6739125118397331e60f51be9cc7514ca7bb286cbc6d4f119a16d05edbdfdacb24ecd23468e7cac6b9e8c19dd7944e76c1c335d92b54b66598456e26321cbda680b3b033ebf2cbe6e248f6bcb66e7a03aa2c713d78d1bdb803e8418a6dab1b914e510930aad2baa107aefbd227f4d1ec30ec9e2270b8973ee09b323a11dedad87f37eb043dfee95963db9050e083b7cd9ef9f7ee8655cca357caa8fee5a36e8995e98964c1e55146bb0b8e1a60b19d5c89c49728eba9775ce3d54ccf3cda66c53e815c841c6ecc37cbbd571cbf6d4492f5145105cfa7f17482b21b0dbc4fa276d02898d5e751d1905199fc0a04c464800eba0648b2bc4529353d2201e42781a29c18f4b8d3ccd7e8bb363483ccf154cb7005db232d59751c2150130825c1b60ee6aa1b515ea6b38328f4bac50d63a288570af084451c4c1bd8926f51803470ffc7649c579a01b3d39319acf7bfc47d5aef14c5aa306e321bcb96eff92cdeeb41716907909f8769b6076eae8b45d2d1511adda9b4b18516f116754bc58e88248bb67455f72b6a0f12f3425f80b7701611c1916e4db611a5ca64c9177d1e0a47dbd47fef62477a2a5db38ae13fcae4faf43d68585cf6e43d693e49aa08a0939e7fff4202e140624ddc27cdde17f3131afd0e13538c9906d5eec03618f9a52b436a63ea93cfe54841f7be4d4bb3a5e2e3f0c7563adb3b557652c5ef551a1ba3fa3550339e2cc88e7327b306cf01290e08354bb6f675a5753e3b25263fc8b9863137a1a4e59f46b3ddbe0ea3003d5a0f2a452a11d8f0c34e564dcf0f95a0f86100c52c1506bb0da83871e5685e753603d7f56ec300cece0359cbdebf1f8c0a18385248a2a4b3bf3769f1faf898be3cb5cad988b30a4b6739ac45e9e29a36b48d4a711e0a0c3dd457e97427b5e93493971e0d53eb280e1d1f5b07f07be6ccf3be8ca5a5792f42b922784d10e683f22dead05fe0f41bf44c8ec37c2ec9413447aa9062aa0d93e322a9f478cede3f851275838fad4cbe37794740d8cd30e8e93869966e23521f93f9103a2838f6e956f01eca9c746d6cfa17e9f864a2a56788a732251bfa4e00ff937ca276b713607379d1a18c8bb03b58d863e1765d342667c6a10888f22b553a0694ce07901c3c64e0bb8892319b09ba7bf7cc9e501cdc4077a5755d9ed5b359710bf1a2c2330f8b4f0359dc418d90d7b6551450f727ab106278ef75b52f9f05819acef45440afdd839cfc8842b35aef387d9ad8a305651c7f6b58bb49f2917f54ae606e5da754d46bccf695e77fe814fe0385f5aa894e1649e40a89580d598d95c883ae92e69dd9a94bf65eb0934967eb9f66b130775441ca7ffd950580f048086f74b34ca298550b1f01b1ef48e5a7df6d0d2581cc2bd969df03445c15ccc78d1c89b0cdc6a77e7091bd470dc37b36adae2ccc468b35354d5a5a792fa227d7fb16757f06ba17fac3ccb5261860cfdbd72f1ad0017679fe0012bcc1d42c1da4f9b9e5e1b5d798f62c61307b1341dbf707f71a5017933e94dcba60d6d23b9af4e8ece851036d18ca6fab706c6d4aec959b9b9751165a5736046e3b24d05ce86ef330b1880b434cd009a596daeaea9c05bd28511f0fe3205650606a191bf56a62bc957e8b291d96e49e03c6d0d7f2940644ae5622830a15e4a89bc10495ef6529f85d07412773d145f31b361acaad179502a75bc1f89537104ce9efc3af7b66c2426820e9dfd75856e4c225069d647a6cb3e0a6c7ac20df2390d59a66bb7431b586332ba05649eb2cb23215dee5f6e3f26a357836067422a6da7cac3cb3b56a51cce4af88c8aae7004b1498cceb6f9519a9967307e977497f6bb5474134e8b0605bf22837afff5f78aab716d5107d4bfc5dad937192ff7d049c59c65495313095c13185d8259f773364f48199aaaaa1ace2a23d6058e8c45b554059b5eaca5277fa6c8c8f46bc8b7cbfa445937c8f7c673a923fad419d0b96a566bd7aa61aa2f81fb4a82a23f528611ea36a9e951b721c4b92d74d6b0ea9509381636a2089fcddb453d65c5df01b7fd1ca21c53e2649ecbfc333e6dba3ce01f8286a2c801738b8f668a7713dd2f677d238e272221ce8ca15074e348e56f58f56dafaa9c852fd1015f041edf5b26a8d3821591cbf2f88403a0aa9cda3535a15f6259fdbf4651f7e48485e7fc197e13be212e6cf875b38414128ea93ac4fbd0f4835446d401991f8b1ac73d27be0f4178d212e59d924bd139f5883bf4ba197e403078beadbdf6d4afddcb41b926f967373062b8c4637fd03d116a1d0d2e7c3ebd4397871ad5171ca594bd57b8c19a50b9dfc73fba05fb1c47a88bdebab01ef2a9f0e5771d946c84958b1b3a6682b159e4bed91f32199e75bb0f9491f477f37f43dac0e82e932859d567a7679c61647d2450810156786af0031853e70af5c760bfe980b650620b0ee69e29fb98bb3c479caf8d253198b3f4143f11ba0254bb6f8d2402b6ef0b85208d751bf6d2ad3f010a544f6087953f185d035ad9ae6f4deb84fd6b5d1edfe68c48a87ce6b218bc80a2d6c42c7322eb5d4e6f52d31e6bc9fd6880a0b6efb29da141b64d67779d71f56772166c01e7093802e396de4fe93c7d006db0e151138ec0968af97e22970818f7979e6a2096a1d06142de682c781b65f09c53b4ca94f6d61d256574b26d0757cedcc4409cc416d8d657e8d066219a455d725303a54f596cb19a1fa8c2b178c29a131d713ade6e9d99d30e4500ea46322cfa22e0a063c279509f3d276bdbe205b697b705e9914d81c8de29961a8278fc239355d492355a876c74706f3fdf48a68bd01077f28fbda1ac908738989d43c83dcc1f0d67538f8e4f35c2502ebdc13c8356701bb7a690fbedd5003a14aeb9ea8de7664ec1f74493bca57abc802132e08074b41f1b8a6178ba68ca9899531fbdf01256d28ccd5ba545c26259677c6f28e7934f3405971016330d46d80688e8769a7862469067f8abcf13f1bf48f118f4dbfeb118f5fbb2e13dcf6eaedf9999bfc0fa17026d3dd0607b4c265895ba2d64d9a7488965f2cdceb3bedb5b8096923b7343fbb3a564f9d34f725abdfb970d2b52bf1d0571162ae66ae430a865290026a216b4a7fe904e44e8ba026e152c2e1b0481de664ed51f71304cd0c4a5b1ae841915be90592d0d7838d65675fba4a1e12fa8d9551f949f039c0cc1189872b4419f44bb8e4c213d77ff3c28cb597d4cdb2304707310c5858f6d350b3f1a4ba4b0d2da4b820eb61bf6b503a67854f73b3e719c6a47d665b050fda6da6905450f422e43fd5898b89740dd4b202adabdecf727498c405e83516edfdcf0ca278bb0d4c81818471144e3bf9ddb873c6c9c6a50f9d75dacfa25f1af5a2d1a9a9ae279e999ff59d41fb7ae72c94860507d914e3b7a7e986a7aed6fe3dfaf9ef1c104aa0c05c97f88cb9f6699f84eba478f7a6988ae6e96c3801c906875db0e58a0d34b717bd070a4c16a7a065e4909ca64afc9b03953e442a08e0b997aba61cd49184f91ad54354fcfffe7cb94517d32b464b9f048860013ce5911bc3a94aab69906431f8c76472ea8f8f6b3d1f10cf17891c5c5d2790daa3627b4a0d219296f74fdd3c7d2985e5c467cf40d999491fc5b02845e6e3264f720bd1b0fd6be5bfac5f9c3765b538122f450f46ec6e00f03469e13bb555f0903083f36db94a70607aa05e3ad5513f0eb0d3c16e7915a9e7e731ef9dcf1e32cd4a8fc5850013f036e04e56cfcf751688957a8a4dd340d72e6799fb5b4d093ef4f25e9a325f26f1d9d356d1d005c67fda91ab8023d71d6f4d8c37c667003388532f241b85ad6182ba5f9ea162b33f54389afe6af10bc22ff049f955a63c3b48e9bc41efe4a80d74d8e5f5e44bbab287b30029e44e51ee3c01844efe122e027347b000cbe7b3fadf33e5698948c190292b5a04362e64ca4be9b42569f8a8a3bcfde1992eec058111d76810f15187ad49bdef466e824e71224b448d9b02bf6ab5fb1b9b23d0e8c4da7b851cf95f68e55da16e7378b2f504c8b0043ef6378632cc92811fe88bc714fef107989dde6c8f06e8ee6b27ec61132d44461b5e4f29fbdc9fed7adb4ef854efba7ce7cd8b3d3268094fb1b6757f1d7a33abc3eb4f1646d94f1c6fc75924b02f44a218540d33cc92e929a24495b76c609a0fc9cf3054d6b24d9a1437553e38416f771beb23dd3e63b7acf91aeba18da8554b5f5bccfb9b3b06b33b00246997f3bfa97d841401d8c269e81e1d7e817d6082287cb042bae931eb29e5e97ed289f010de3dc7b1eae8cc4efd5dc729fa3f90083d7daad79674a0c9341392af565678da11f7b241a7c2bc5389287910140f46bd7f655dda74ea34242f44f1be2cd28ea68bf1a8a364dcd05da422865b001734515ff14ae00076ae6c0f726e3494fc24210cf98c256e0551b6e2c4c0c1683c23be2c08219f81c1e7dfb8481f6d5b5c1492348caee795292c0a02615e2782907463aaa1bc816e8f574fd404b5e9c41d860e3b17edbd2c445c5862eda34288398d5e0d53e48ab44b56b80c8f06062f2f5ea617c4a01613bad5477f433464b72649cabdb85ecc22f94f902a91c9596048142af4d8b4da4c6d9f84646b354a5b2a44cb6ae4517c6702fdfceeebf386de7614647ec2bd7b9c6b781c56cb18f771a8db43c687fb1ed0f6959b543d828c0b41ff4e066c31be40d68908bf8d059576b171bd56a0acb89625a2b44afc55685eaf1333dd6d9a93912f6e8dd9cfe8a143a69deea39d599c977e8616809376721f9a7ef5a0b4470da7d161d530c1327a49717cb4ab3223e4230571e8a205a7a641f0b7924c811633fa878477ed02b6d4caa621c79f7274e5daa196af8bbe1ace10c6cf22a053ed4a69fd73de07f5c2b58d5422d708fa37fe67703d38c7708892a850bc1bfd32d1951ec438d9dd8f2f6e43678039b7a79d747677b4351831234ce6af53ad8efe05e183e5bcdf95dcc8037da57f25d62a06a4f5ad1148d2a3cd9479df6a2ad6aff944e7787824fb495d983f04e820b18a07876b69a9f77c5dd039a189c782433f5635dca1f9fcceb0182f15eca71fa7f04ff76ffd47f0d831785ea375884d5b8b9b3184475adf90ad1d0eb9b97ecb9fe3ec51a5638b9e382655fe8b8effce24befe853c855d2afa648464dd758a48fef9f2a1fbeea353b72a4203dfd02a394cfd74b2b0b1e80341135e97af27e1ad179637c35ab83901f604f995b3980325ec300cdb7fa3d0d5e09c39e7fa5bd83a786d92e4ea6c903f91500e4b7d54f68f52ec159f394e36acb182893be909a80eca8a1f4bf3eef86ba0f673b4d575ed51b6112a905e2c6c7f82fa57e58a04ed0885dd0de4e63ed9c980b54c2161f0b01fc396af3d5dd665473300ba869e2e9ccd7649b52afa891b853d2e96ae3a2d17f15b0f786912b88256b4a5dc60924ffcdddfc6ecbf4450a47b2687e29268d7c6b03ca51f2062e6eaa828d09ac97ba7234280126e1378c5e2c8970b245cd55766dbb9fb81a2ed44d90489fe96f8966a9ce4afdad3d73982a0409993aa61a2276d80a2bb51e15379c3347a3538c47f23fbd934df84fea9b2bffeb590e4af68951ed51c5c404676895be5996a3fe6583a659172c80227340e629e098558c1714af73384c41f2e49f871cc314a3a4c62a25c0d120487d09e8a1eabe893ea4182ca16d4ecef4f2d94fa8a2e7fa3c17826ddfb80bce446500eb30a4d25497253c943349bf4060f2ddcc21be3dd41db1b37c5be2bf97b17f6b8350b71e21883b60eb509e489b50e6d3fdb723215f161e148e93399f2fa5c17b4c25f44c1bebec2f36f950fc291caef0bb7b6c838ebd81004757806a58a52d46a8a7dfa319042fd021e8de3b3552e824a4851f41ad4e175043e4e22baec9e21bc4934b74aa247101375ee8d20a174612f24d3863101dd28930327335da3a842b6cc8ff276e4485ea98631cd93d19a2e072ee17c1d1d17940bd30f6d086cec8b1e0ff178e861d1f60ab68506045b47a360dd840ed5f524df1f1fe2fea67050f559bc17f0d18132a74bcaad87a5ea8fee53764eff597a33484d7d4c6f158a27fc303ecea2a75f9fc4c6a6ed636a405b3e46a549625c640e1c7a0e446eb177b91a0430cd5b67f45b34f2cc8117ed93d57ba14ee6acc5f76b6004b3716d65e44fd57a8dfddc9cf8781ddaa036530650d93798ee2e01b3d228bce8d499582c9beb4e10bc4970d442471f05e748f2f0a0c463f9fec036d05e5d9ebeb339e26b29f2c12a38a61418ddfceeb59a803abc33e4b555143276e49d6c30fa6cd393119ad66b998ac589a0cb8b2104a1865af1d2569a4c287843f050d34665451be944dfc4c7ad91195b3d87dcee40ae584e0e508f0c66cac8ebf45e5a1d61a07143e1aed2c5b5d1ffb2b4f7852d0cc677166df403c4d4fcb9be3f910dfe8a7c06d3f0152d203af2b1daf9dfe98af157085b79c9fcfcd1b078f1dd36808d491acf631317742fb0edee895d37d430b220d1489ee704deb8ad30995b55a78105600f64df7836c297246284269c38fa4195e4236b53fe30ab906b9470b4dd196b0d8d059a5ddcc44b5af632717b62e06ff0ef23ded359b91862dfe29fbca9b9f759e54077ede7ce1ab4643c2d905adad3cfb1eca0b931aaa53afacd4a03648328a5eb080255f5e7c0748e566f211d7e32042fc3a0f0ffc690a65306f15a1cc61fcb6ae1f7c228cd0aaac79e8d96a3f538e5cede458ded37a7462227476969a015a012ae919b3c8e10953047aa271431b1bf746547b131c39aa66462422880fe3f8a04b8fc49e041f88506ad43a42bfe20415167c3e6a77a68dbba25900d603687d0a7165e6b261096d4228826e10a5cd0813c311d9fbd2c82410882c53f0312d2ab32cc81bb3e76d4f239307707f018c4c6abeae4009fb39ded9fa0176791a6693f4d32858acbe2720a30f76c418e04e66ba2e2541dcaa3fb562931d7c345208cf61f8eca1e595c236c769b44faaa4c963f352342d61492983a7df543e56781fe3129db731691a8860398745327d9eea3d43bc21c2d2690ff9caacf5c60d10d4cf1aeb8a283f45ae3c1f535e58f90911f693c32742649beb8c583cd4a7b9ea83e9a33df2a17b22a1f20f2c3027c7e1a2f51ebef7096b9672996cb1d88f292aa6cc68cb4938c5bec8844649af241fa2c0049b889e545bbcdfdb8b02da41082821b38646edf664fee257248f76429cbb9231501f248d31a30442268e76fc8c4b2271ba307962be59c0899528e3d4106615c26fac2bfbf6cf522ed00792b442dffc13ff4cb8d8fe5b0a0787d5d79ce604139ac309aa14f067b0cdda337465b604bfe23e4cc43ea0c2fb35f2ac5fb669e0c54275ecddf443c84e93df724a455faa3feeeaa9422757dccff38d43e0acb29d4f60b08bfbd81a846e0c024f151a3beb3d02756483eefabbf790116b68d4d88431992bc523742d30919dbc32847198fa3c2147995c576261e30314f3ffe45209b59f069e8d761add1ccf3abc0ad9028f1c2119730aec1865c359c8ed7da07bb8ec70fd09e5bcb891c4a7f6f625ad4dca16ed4e774c776188b04bf8edb56b89a1a670db4c5eea09edd63672d6b75725989702272205c0959fddb826874911a8b76d25ec610e0a6b432e41457ba90975a9eb2725304e7dd1124f430d5bbb789b12b0807153c53c32dbacb15420254c4f9cee0e316e1db6da4cb63d09e3ff857c70dd80c32a976634104e8cc73e5698191e6fafbd34984331790efa8d309954faec470b89f90d4e198de3dd8320a578a20d27d05d7db3f09c711c315ddd58f88050520718b6a113fc8134d95caf1a53b920cd466069c97c416654baa2763adc7f770a1376843df7f92604ec79e6d556b5291dea5678de672d41fae534b882a055074942b1a84d060fb03269f1bd27ee6bceae63563b1fea4278f0f4099cc45e820af65db69da01f1a59f615b6d25667cfa3d4196e0222890b4d5bddfcec830c5f337f2d8af880adf71c7a7641b5c132100ff3294596e89a6444a01d481eeb0908ec7351d2afbccc7fb6bf08cbab5c03f75516c9fb31b3f50280ffa331e773d4cc7be09b1a00832c170b88a91b837c52dd74e640a211c4cf7d2bcd442c316712ad43eb98c30b7003abcf3c633de13efaa9cea8c71bfffe74cf32655c45391b65659bb60f6bdc2bfc152e117d4f6eac68cd655b29888e9f980f9461a90ff2f30770002daac2f193997fda0c7722446eb10ad8d525e6c88a250423ebb12e2bf05a5900e4d93b0755698a583685f0a5a3201b058ba4ed09d4f2bb92f87c9046478bd40da44d1bff6ae0816157702ecaaff996b8fd3803024719563ab313a7a002035479273444a07ca14d04abb31bb695258ba28fb3ad2f1f8af0451ba1eab6b7def08988eb405a9f739e198194ac8ad5bc8082e479a62c59c7f250ea98b2895ee93ddd967cfb3adb00a6be98bb17005f53c73383a55460dfcf37e0f1603f020a4202323429092c9d287c932515b3f7c6d1e91752606cf97006044f97defdfceb5bb77a68dbd259a7385806c27df3e7bd824a79638ff6406fa4f9721c56521c6e996d905c2c53d3c90a48d893063b24835fb605747fcf81ba5c1069e26498500accb301ea74ee3444f2b7f988f757145e4f10cb53a600bafb4d205a3a4c6e3e3f062ae2541d93bed1b48c716fa114e5d8597b7d2701a7e3810deb6194c768a7ddd4c16658478aaf5890a0a2564153318e37aab0db8cf9bc3312bde8b76c1ff1aa8ae84e7e6f93e1178dc46e3ecec5b198c137aa33acdd80384164470e0017730e5d229713fdf2ebdb4799bacdaeb1a438bd221f006b8dcde96c6357708c70fb816e85a4b745c27affa3581a1caaf28f1be2181937e094cb1632292e6b83f71d906b570759010e6de216ed12187d365565a439f7eab44317993519dc5965c3465214266fdb3c21e5080a45c05cf3cf0b5cb054ba6ea656c48b1a258e91d2eed9ec05ad38588159fe5b12cd0c20</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-flip">      <input class="hbe hbe-input-field hbe-input-field-flip" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-flip" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-flip" data-content="您好, 这里需要密码。">您好, 这里需要密码。</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 生活日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字电子技术基础（7）——脉冲波形的产生和整形</title>
      <link href="/post/bb918626.html"/>
      <url>/post/bb918626.html</url>
      
        <content type="html"><![CDATA[<h2 id="施密特触发器"><a href="#施密特触发器" class="headerlink" title="施密特触发器"></a>施密特触发器</h2><p>施密特触发器具有2个稳态，主要应用有：<strong>波形变换</strong>、<strong>脉冲整形</strong>、<strong>鉴幅</strong>。</p><p>门电路构成的施密特触发器如图所示，电路中2个CMOS反相器串接，从$v_o$输出即为同相输出，从$v_o&#39;$输出即为反相输出。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071016184.webp" alt="门电路构成的施密特触发器"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071020215.webp" alt="同相（左）反相（右）逻辑符号"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071023002.webp" alt="同相（左）反相（右）电压传输特性"></p><p>假设COMS反相器的阈值电压<script type="math/tex">V_{TH}≈\frac{1}{2}V_{DD}</script>，<script type="math/tex">R_1<R_2</script>，则正向阈值电压为：</p><script type="math/tex; mode=display">V_{T+}=(1+\frac{R_1}{R_2})V_{TH}</script><p>负向阈值电压为：</p><script type="math/tex; mode=display">V_{T-}=(1-\frac{R_1}{R_2})V_{TH}</script><p>回差电压为：</p><script type="math/tex; mode=display">△V_T=V_{T+}-V_{T-}≈2\frac{R_1}{R_2}V_{TH}</script><p>施密特触发器的应用：</p><ol><li><p>波形变换</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071025743.webp" alt="波形变换"></p></li><li><p>脉冲整形</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071026955.webp" alt="脉冲整形"></p></li><li><p>鉴幅</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071027926.webp" alt="鉴幅"></p></li></ol><h2 id="单稳态触发器"><a href="#单稳态触发器" class="headerlink" title="单稳态触发器"></a>单稳态触发器</h2><p>单稳态触发器有1个稳态、1个暂稳态，主要应用有：<strong>脉冲整形</strong>、<strong>延时</strong>、<strong>定时</strong>。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071038028.webp" alt="门电路构成的微分型单稳态触发器"></p><p>单稳态触发器的暂稳态持续时间（脉宽）与R、C有关：</p><script type="math/tex; mode=display">t_W=RCln2≈0.69RC</script><h2 id="多谐振荡器"><a href="#多谐振荡器" class="headerlink" title="多谐振荡器"></a>多谐振荡器</h2><p>多谐振荡器没有稳态。多谐振荡器在接通电源后无需外加触发信号，即可自动产生富含高次谐波的矩形脉冲（自激）。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071046039.webp" alt="施密特触发器构成多谐振荡器"></p><h2 id="555定时器"><a href="#555定时器" class="headerlink" title="555定时器"></a>555定时器</h2><p>555定时器外接少量电阻电容可以构成施密特触发器、单稳态触发器、多谐振荡器。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071051393.webp" alt="555定时器电路结构"></p><h3 id="555定时器构成施密特触发器"><a href="#555定时器构成施密特触发器" class="headerlink" title="555定时器构成施密特触发器"></a>555定时器构成施密特触发器</h3><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071146246.webp" alt="555定时器构成施密特触发器"></p><p>如果参考电压由外接$V_{CO}$提供：</p><script type="math/tex; mode=display">V_{T+}=V_{CO} \\V_{T-}=\frac{1}{2}V_{CO} \\△V_T=\frac{1}{2}V_{CO}</script><p>如果没有外接$V_{CO}$：</p><script type="math/tex; mode=display">V_{T+}=\frac{2}{3}V_{CC} \\V_{T-}=\frac{1}{3}V_{CC} \\△V_T=\frac{1}{3}V_{CC}</script><h3 id="555定时器构成单稳态触发器"><a href="#555定时器构成单稳态触发器" class="headerlink" title="555定时器构成单稳态触发器"></a>555定时器构成单稳态触发器</h3><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071153479.webp" alt="555定时器构成单稳态触发器"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401072036622.webp" alt="工作波形"></p><script type="math/tex; mode=display">t_W=RCln\frac{V_{CC}}{V_{CC}-\frac{2}{3}V_{CC}} \\=RCln3≈1.1RC</script><h3 id="555定时器构成多谐振荡器"><a href="#555定时器构成多谐振荡器" class="headerlink" title="555定时器构成多谐振荡器"></a>555定时器构成多谐振荡器</h3><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071148704.webp" alt="555定时器构成多谐振荡器"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401072035321.webp" alt="工作波形"></p><p>C充电时：</p><script type="math/tex; mode=display">t_{W_1}=0.7(R_1+R_2)C</script><p>C放电时：</p><script type="math/tex; mode=display">t_{W_2}=0.7R_2C</script><p>振荡周期：</p><script type="math/tex; mode=display">T=t_{W_1}+t_{W_2}=0.7(R_1+2R_2)C</script><p>占空比：</p><script type="math/tex; mode=display">q=\frac{t_{W_1}}{T}=\frac{R_1+R_2}{R_1+2R_2}</script>]]></content>
      
      
      <categories>
          
          <category> 硬件知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数电 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字电子技术基础（6）——门电路、存储器</title>
      <link href="/post/f9e8bc9c.html"/>
      <url>/post/f9e8bc9c.html</url>
      
        <content type="html"><![CDATA[<h2 id="MOS晶体管"><a href="#MOS晶体管" class="headerlink" title="MOS晶体管"></a>MOS晶体管</h2><p>MOS管是金属-氧化物-半导体场效应晶体管的简称，它有3个电极——源极S（Source）、栅极G（Gate）、漏极D（Drain），衬底一般与源极相连  。它是电压控制器件，以栅极电压控制漏极电流。</p><p>MOS管根据导电沟道的不同可以分为PMOS和NMOS，按形成沟道的工作方式不同可以分为增强型和耗尽型。故共有4种构型：增强型NMOS、增强型PMOS、耗尽型NMOS、耗尽型PMOS。数字电路中多采用增强型MOS管作为开关管。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071355633.webp" alt="增强型NOS、增强型PMOS、耗尽型NMOS、耗尽型PMOS"></p><p>符号助记：增强型-三个短横；耗尽型-一个长横。N-箭头朝内；P-箭头朝外。</p><p>MOS管有3个工作区：截止区、恒流区（饱和区）、可变电阻区（非饱和区）。MOS管的开关时间，取决于负载电容的充放电时间。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071604286.webp" alt="增强型NMOS管输出特性曲线"></p><h2 id="CMOS逻辑门电路"><a href="#CMOS逻辑门电路" class="headerlink" title="CMOS逻辑门电路"></a>CMOS逻辑门电路</h2><p><strong>CMOS反相器</strong>、<strong>CMOS传输门</strong>，是CMOS逻辑电路的2种基本模块。</p><ol><li><p>CMOS反相器</p><p>CMOS<strong>反相器</strong>构成：增强型PMOS（负载管，上）、增强型NMOS（驱动管，下）串联。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071609909.webp" alt="CMOS反相器"></p></li><li><p>CMOS与非门</p><p>CMOS<strong>与非门</strong>是由2个并联的PMOS管和2个串联的NMOS管构成。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071706132.webp" alt="CMOS与非门"></p></li><li><p>CMOS或非门</p><p>CMOS<strong>或非门</strong>是由2个并联的NMOS管和2个串联的PMOS管构成。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071707343.webp" alt="CMOS或非门"></p></li><li><p>CMOS传输门</p><p>CMOS传输门由一个增强型PMOS和一个增强型NMOS并联互补组成。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071718904.webp" alt="CMOS传输门"></p><p>传输门的信号可以双向传输。用CMOS传输门和CMOS反相器可以组成双向<strong>模拟开关</strong>，还可以构成各种复杂的逻辑模块，比如<strong>同或门</strong>等。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071723744.webp" alt="CMOS双向模拟开关"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071722819.webp" alt="CMOS同或门"></p></li><li><p>OD门、OC门</p><p>CMOS集成电路有3种输出结构：推挽输出、三态输出、漏极开路输出。</p><p>普通推挽输出的CMOS门电路输出端<strong>不能并联</strong>使用。</p><p>三态输出：高电平、低电平、高阻态。三态门可以实现数据双向传输，所以它可以实现<strong>总线</strong>结构。三态门的结构有2种，一种是低电平控制，一种是高电平控制。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071755760.webp" alt="低电平控制CMOS三态门"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071756867.webp" alt="高电平控制CMOS三态门"></p><p>漏极开路输出可以实现<strong>线与</strong>，例如CMOS的<strong>OD门</strong>、TTL的<strong>OC门</strong>。其中TTL的OC门使用时必须外接负载电阻到VCC（1-2.5K）。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071759277.webp" alt="开漏输出的与非门"></p></li></ol><h2 id="双极型晶体管"><a href="#双极型晶体管" class="headerlink" title="双极型晶体管"></a>双极型晶体管</h2><ol><li><p>二极管与门</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071735652.webp" alt="二极管与门"></p></li><li><p>二极管或门</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071737975.webp" alt="二极管或门"></p></li><li><p>三极管非门（反相器）</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401071739585.webp" alt="三极管非门"></p></li></ol><h2 id="CMOS、TTL总结"><a href="#CMOS、TTL总结" class="headerlink" title="CMOS、TTL总结"></a>CMOS、TTL总结</h2><p>CMOS集成电路的优点是<strong>静态功耗</strong>很低，同时存在动态功耗，与工作频率成正比。</p><p>TTL速度高、抗干扰能力强，逻辑电平摆幅大。CMOS速度较TTL低，功耗低，抗干扰能力、带负载能力强，电源利用率高。</p><p>TTL与门：多余闲置端接1、和使用端并联、悬空；TTL或门：多余闲置端接0、和使用端并联；</p><p>CMOS：不能悬空！TTL悬空是接1。CMOS或非门接小电阻（510）到地，相当于接低电平0。</p><p>TTL与非门的灌电流负载发生在输出 <strong>低电平(0)</strong> 情况下，拉电流负载发生在输出 <strong>高电平(1)</strong> 情况下。</p><h2 id="存储器的分类"><a href="#存储器的分类" class="headerlink" title="存储器的分类"></a>存储器的分类</h2><p>按制造工艺可以分为双极型和MOS型存储器。双极型速度快，功耗大，价格高，工艺复杂；MOS型速度相对慢一点，但功耗低，集成度高，成本低。</p><p>按照应用角度分为随机存储器（RAM）和只读存储器（ROM）。RAM是可读可写存储器，但断电后数据会丢失。RAM又分静态存储器（SRAM）和动态存储器（DRAM），DRAM结构简单、集成度高、速度慢，SRAM相反。ROM只能读取不能写入，断电后信息不会丢失。</p><p>除此之外还有多种存储器：</p><ul><li>掩模ROM，不可修改；</li><li>PROM，可修改1次；</li><li>EPROM，可通过光擦写（紫外线）多次修改（耗时长）；</li><li>E²PROM，可通过电擦写多次修改。</li></ul><h2 id="存储器的应用"><a href="#存储器的应用" class="headerlink" title="存储器的应用"></a>存储器的应用</h2><p>固定ROM的基本结构如图所示，其中A为n条地址输入线，W为$2^n$条字线，D为m条位线，存储容量就是$2^n×m$bit。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401062319659.webp" alt="固定ROM的基本结构"></p><p>ROM的地址译码器是与逻辑阵列，位线和字线的逻辑关系是或逻辑关系，所以使用ROM可以实现逻辑函数：</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401070924105.webp" alt="ROM实现逻辑函数"></p><h2 id="存储器的扩展"><a href="#存储器的扩展" class="headerlink" title="存储器的扩展"></a>存储器的扩展</h2><ol><li><p>位扩展</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401070940334.webp" alt="1K×1扩展为1K×4"></p></li><li><p>字扩展</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401070941966.webp" alt="8K×8扩展为32K×8"></p></li><li><p>位和字扩展</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401070942775.webp" alt="1K×4扩展为2K×8"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 硬件知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数电 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字电子技术基础（5）——时序逻辑电路</title>
      <link href="/post/93e8f639.html"/>
      <url>/post/93e8f639.html</url>
      
        <content type="html"><![CDATA[<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ol><li><p>特点</p><p>时序电路任意时刻的输出信号不仅取决于当时的输入信号，还与初始状态及以前的输入有关。时序电路通常包括组合电路和存储电路两部分，另外包含输出到输入的反馈回路。</p></li><li><p>分类</p><p>时序电路根据时钟不同，可以分为同步时序电路和异步时序电路，根据输出信号的特点，可以分为米利型（Meely）和摩尔型（Moore）。</p><ul><li>米利型：F(X,Q)，输出信号取决于状态和输入；</li><li>摩尔型：F(Q)，输出信号仅取决于状态。</li></ul></li><li><p>表示方法</p><p>逻辑方程（驱动方程、状态转移方程、输出方程）、状态转移表、状态转l;pppp移图、时序图等。</p></li></ol><h2 id="一般时序逻辑电路的分析与设计"><a href="#一般时序逻辑电路的分析与设计" class="headerlink" title="一般时序逻辑电路的分析与设计"></a>一般时序逻辑电路的分析与设计</h2><h3 id="同步与异步"><a href="#同步与异步" class="headerlink" title="同步与异步"></a>同步与异步</h3><p>同步和异步的概念是指电路的变化与时钟脉冲是否同步。</p><h3 id="时序逻辑电路的分析"><a href="#时序逻辑电路的分析" class="headerlink" title="时序逻辑电路的分析"></a>时序逻辑电路的分析</h3><p>同步时序逻辑电路的分析步骤如下：</p><ol><li>列出各级触发器的驱动方程；</li><li>将驱动方程代入触发器特性方程，得到转移方程；</li><li>列出输出方程；</li><li>由输出方程和状态转移方程，列出状态转移表，画出状态转移图和波形图；</li><li>总结概括电路的逻辑功能。</li></ol><p>异步时序逻辑电路的分析需要注意各级触发器的CP时钟源。</p><h3 id="自启动"><a href="#自启动" class="headerlink" title="自启动"></a>自启动</h3><p>若偏离态能在脉冲信号作用下自动转入到有效序列，则电路可以自启动，否则不能自启动。</p><h3 id="时序逻辑电路的设计"><a href="#时序逻辑电路的设计" class="headerlink" title="时序逻辑电路的设计"></a>时序逻辑电路的设计</h3><p>同步时序逻辑电路的设计步骤如下：</p><ol><li>根据实际需要建立状态转移图和状态转移表；</li><li>原始状态化简；</li><li>状态编码；</li><li>选择触发器类型；</li><li>检查电路自启动，绘制电路图。</li></ol><p>异步时序逻辑电路的设计需要注意触发器时钟信号的选择，选取原则：</p><ol><li>触发器状态需要翻转的时候，必须要有时钟信号输入；</li><li>触发器状态不需要翻转的时候，多余的时钟信号越少越好。</li></ol><h2 id="常用时序逻辑电路"><a href="#常用时序逻辑电路" class="headerlink" title="常用时序逻辑电路"></a>常用时序逻辑电路</h2><h3 id="计数器"><a href="#计数器" class="headerlink" title="计数器"></a>计数器</h3><p>计数器有多种实用功能，如计数、分频、定时、产生节拍脉冲、脉冲序列和数字运算等，故又称分频器。最大计数称为计数器的<strong>模</strong>，符号N。</p><p>计数器的分类：</p><ul><li>根据脉冲方式分为：同步计数器、异步计数器；</li><li>根据逻辑功能分为：加法计数器、减法计数器、可逆计数器；</li><li>根据模值划分。</li></ul><p>生活中常用集成计数器，主要有可逆计数、预置、清零、进位等功能。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401052324341.webp" alt="常见集成计数器"></p><h4 id="74LS161"><a href="#74LS161" class="headerlink" title="74LS161"></a>74LS161</h4><p>74LS161是4位同步二进制计数器，模为16。<script type="math/tex">\overline{LD}</script>为同步预置数控制端，<script type="math/tex">\overline{R_D}</script>为异步清零端，CO为进位输出端。EP和ET为工作状态控制端，当EP为0，ET为任意态，CO保持；当ET为0，EP为任意态，CO为0。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401060945407.webp" alt="逻辑符号图"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401060947197.webp" alt="功能表"></p><h4 id="计数器的扩展"><a href="#计数器的扩展" class="headerlink" title="计数器的扩展"></a>计数器的扩展</h4><p>设需要设计的模值为M，已有计数器模值为N。</p><p>当N&gt;M时，可利用同步预置取M个状态（N-M到N-1），或者利用异步清零，取M+1（0到M，其中M是瞬间出现而后消失）。需要注意的是，对于异步清零法的设计，为了提高清零信号的可靠性，通常需要在清零信号前加一个基本RS触发器，如下所示：</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401060948315.webp" alt="改进电路"></p><p>在改进后的电路中，由基本RS触发器的R&#39;端接计数器的清零端，R端作为进位输出端。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401060955821.webp" alt="置数法实现模8计数的2种思路"></p><p>当N&lt;M时，需要多片计数器级联。在设计任意模值计数器前，不妨试着分析已有的计数器级联电路。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061019003.webp" alt="清零法构成29进制计数器"></p><p>由图可知，当片1输出为1001（9）且片2输出为0010（2）时，2片计数器同时异步清零，74LS160为模10计数，故整体电路模值为10×2+(9-1+1)=29。加1是因为0到n，计数n+1次；减1是因为异步清零，末态瞬间消失，所以这里最好也加上一个基本RS触发器，或者改用置数法实现。如下图所示（10×2+(8+1)=29）。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061028799.webp" alt="置数法法构成29进制计数器"></p><h3 id="寄存器和移位寄存器"><a href="#寄存器和移位寄存器" class="headerlink" title="寄存器和移位寄存器"></a>寄存器和移位寄存器</h3><p>寄存器分为基本寄存器和移位寄存器，基本寄存器只能并入并出，移位寄存器可以在移位脉冲作用下依次逐位右移或左移，数据可以并入并出、并入串出、串入串出、串入并出。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061612101.webp" alt="串入并出"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061613174.webp" alt="串入串出"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061614731.webp" alt="模4环形计数器"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061615855.webp" alt="模8扭环形计数器"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061616584.webp" alt="并入串出"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061617704.webp" alt="并入并出"></p><p>一般来说，规定左为低位、右为高位，即<script type="math/tex">D_0D_1D_2D_3</script>，此时左移右移直观可见。</p><h4 id="74LS194"><a href="#74LS194" class="headerlink" title="74LS194"></a>74LS194</h4><p>74LS194是一款常见的集成式4位双向移位寄存器。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061621005.webp" alt="74LS194逻辑符号图"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061622567.webp" alt="74LS194功能表"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061655769.webp" alt="2片74LS194级联实现8位移位寄存器"></p><h4 id="74LS195"><a href="#74LS195" class="headerlink" title="74LS195"></a>74LS195</h4><p>74LS195具有JK输入，只能进行右移操作，<script type="math/tex">Q_0</script>端补位值遵循<script type="math/tex">Q^*=J\overline{Q}+\overline{K}Q</script>。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061653962.webp" alt="74LS195逻辑符号图"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061654483.webp" alt="74LS195功能表"></p><p>一般n位移位寄存器可以实现模值n的环形计数器及模值2n的扭环形计数器。</p><h3 id="序列信号发生器"><a href="#序列信号发生器" class="headerlink" title="序列信号发生器"></a>序列信号发生器</h3><p>一般分为移存型序列信号发生器和计数型序列信号发生器。</p><h4 id="移存型序列信号发生器"><a href="#移存型序列信号发生器" class="headerlink" title="移存型序列信号发生器"></a>移存型序列信号发生器</h4><p>移存型序列信号发生器一般由移位寄存器和组合反馈电路构成，设计方法：</p><ol><li>首先根据序列信号长度，确定最少触发器数目n，对于计数型序列信号发生器，须满足：<script type="math/tex">2^{n-1}<M≤2^n</script></li><li>通过分组，验证n是否满足需要（若分组中有重复的，则需要验证n+1个触发器）</li><li>按编码编写状态转移表，状态转移表最后一列即为反馈信号D</li><li>求反馈函数D并化简</li><li>检查电路自启动，画出逻辑图。</li></ol><h4 id="计数型序列信号发生器"><a href="#计数型序列信号发生器" class="headerlink" title="计数型序列信号发生器"></a>计数型序列信号发生器</h4><p>计数型序列信号发生器的输出位于组合输出电路，另外不用验证自启动，其最大的优点是可以同时产生多个序列。</p><p>例如下图，可以产生10101、11011两种序列：</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202401061949824.webp" alt="image-20240106194940608"></p>]]></content>
      
      
      <categories>
          
          <category> 硬件知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数电 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>应用中心 &amp; 加密工具</title>
      <link href="/post/d20035a.html"/>
      <url>/post/d20035a.html</url>
      
        <content type="html"><![CDATA[<h2 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h2><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202310261140351.webp" alt="应用中心"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202310261139002.webp" alt="加密工具"></p><h2 id="应用中心"><a href="#应用中心" class="headerlink" title="应用中心"></a>应用中心</h2><p>新建 themes\butterfly\layout\includes\apps.pug</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#apps</span><br><span class="line">    .apps-head</span><br><span class="line">        span 应用中心</span><br><span class="line">        .close-btn(onclick=&quot;ctrl.hideAPPs()&quot; href=&quot;javascript:void(0);&quot;)</span><br><span class="line">            i.fas.fa-circle-xmark</span><br><span class="line">    .apps-content</span><br><span class="line">        .app-box</span><br><span class="line">            .app-icon(style=&quot;background:url(https://xxx.webp) no-repeat 100% / cover;&quot;)</span><br><span class="line">                a.app-link(href=&#x27;https://gavin-chen.top&#x27;, title=&#x27;主线路&#x27;, target=&#x27;_blank&#x27;, one-link-mark=&#x27;yes&#x27;)</span><br><span class="line">            span.app-name 主线路</span><br><span class="line">        .app-box</span><br><span class="line">            .app-icon(style=&quot;background:url(https://xxx.webp) no-repeat 100% / cover;&quot;)</span><br><span class="line">                a.app-link(href=&#x27;https://blog.cansin.top&#x27;, title=&#x27;Vercel线路&#x27;, target=&#x27;_blank&#x27;, one-link-mark=&#x27;yes&#x27;)</span><br><span class="line">            span.app-name Vercel线路</span><br><span class="line">        .app-box</span><br><span class="line">            .app-icon(style=&quot;background:url(https://xxx.webp) no-repeat 100% / cover;&quot;)</span><br><span class="line">                a.app-link(href=&#x27;https://netlify.gavin-chen.top&#x27;, title=&#x27;Netlify线路&#x27;, target=&#x27;_blank&#x27;, one-link-mark=&#x27;yes&#x27;)</span><br><span class="line">            span.app-name Netlify线路</span><br><span class="line">        .app-box</span><br><span class="line">            .app-icon(style=&quot;background:url(https://xxx.png) no-repeat 100% / cover;&quot;)</span><br><span class="line">                a.app-link(href=&#x27;https://zeabur.cansin.top&#x27;, title=&#x27;Zeabur线路&#x27;, target=&#x27;_blank&#x27;, one-link-mark=&#x27;yes&#x27;)</span><br><span class="line">            span.app-name Zeabur线路</span><br><span class="line">        .app-box</span><br><span class="line">            .app-icon(style=&quot;background:url(https://xxx.webp) no-repeat 100% / cover;&quot;)</span><br><span class="line">                a.app-link(href=&#x27;https://blogdrive.gavin-chen.top&#x27;, title=&#x27;藏兵谷&#x27;, target=&#x27;_blank&#x27;, rel=&#x27;noopener nofollow&#x27;, one-link-mark=&#x27;yes&#x27;)</span><br><span class="line">            span.app-name 藏兵谷</span><br><span class="line">        .app-box</span><br><span class="line">            .app-icon(style=&quot;background:url(https://xxx.webp) no-repeat 100% / cover;&quot;)</span><br><span class="line">                a.app-link(href=&#x27;https://music.cansin.top&#x27;, title=&#x27;司音堂&#x27;, target=&#x27;_blank&#x27;, rel=&#x27;noopener nofollow&#x27;, one-link-mark=&#x27;yes&#x27;)</span><br><span class="line">            span.app-name 司音堂</span><br><span class="line">        .app-box</span><br><span class="line">            .app-icon(style=&quot;background:url(https://xxx.webp) no-repeat 100% / cover;&quot;)</span><br><span class="line">                a.app-link(href=&#x27;https://music.gavin-chen.top&#x27;, title=&#x27;幻音坊&#x27;, target=&#x27;_blank&#x27;, rel=&#x27;noopener nofollow&#x27;, one-link-mark=&#x27;yes&#x27;)</span><br><span class="line">            span.app-name 幻音坊</span><br><span class="line">        .app-box</span><br><span class="line">            .app-icon(style=&quot;background:url(https://xxx.webp) no-repeat 100% / cover;&quot;)</span><br><span class="line">                a.app-link(onclick=&#x27;ctrl.toggleWinbox(&quot;encryption&quot;)&#x27;, title=&#x27;加密工具&#x27;, target=&#x27;_blank&#x27;, rel=&#x27;noopener nofollow&#x27;, one-link-mark=&#x27;yes&#x27;)</span><br><span class="line">            span.app-name 加密工具</span><br><span class="line">    .apps-mask(onclick=&quot;ctrl.hideAPPs()&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot;)</span><br></pre></td></tr></table></figure><p>在 themes\butterfly\layout\includes\layout.pug 末尾引入</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">    include ./console.pug</span><br><span class="line"><span class="addition">+    include ./apps.pug</span></span><br></pre></td></tr></table></figure><p>js部分通过合适的按钮点击打开应用中心，这里通过左上角田字形图标打开，手机端入口在侧滑菜单的右上角。CSS 通过 F12 自取。</p><h2 id="加密工具"><a href="#加密工具" class="headerlink" title="加密工具"></a>加密工具</h2><p>“加密工具”是应用中心第一款应用，窗口部分采用开源框架winbox实现，加密算法采用 Crypto-JS 库实现。</p><p>首先在主题配置文件 _config.butterfly.yml 中引入 winbox</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+    - &lt;script src=&quot;https://unpkg.com/winbox@0.2.82/dist/winbox.bundle.min.js&quot;&gt;&lt;/script&gt; # 窗口</span></span><br></pre></td></tr></table></figure><p>自定义 xxx.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ctrl = &#123;</span><br><span class="line">    <span class="title function_">toggleWinbox</span>(<span class="params">app</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;winboxForApps&#x27;</span>)) winbox.<span class="title function_">toggleClass</span>(<span class="string">&#x27;hide&#x27;</span>);</span><br><span class="line">        <span class="keyword">else</span> ctrl.<span class="title function_">createWinboxForApps</span>(app);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">resizeWinbox</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;winboxForApps&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!box || box.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;min&#x27;</span>) || box.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;max&#x27;</span>)) <span class="keyword">return</span> <span class="comment">// 2023-02-10更新</span></span><br><span class="line">        <span class="keyword">var</span> offsetWid = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span>;</span><br><span class="line">        <span class="keyword">if</span> (offsetWid &lt;= <span class="number">768</span>) &#123;</span><br><span class="line">            winbox.<span class="title function_">resize</span>(offsetWid * <span class="number">0.95</span> + <span class="string">&quot;px&quot;</span>, <span class="string">&quot;80%&quot;</span>).<span class="title function_">move</span>(<span class="string">&quot;center&quot;</span>, <span class="string">&quot;center&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            winbox.<span class="title function_">resize</span>(offsetWid * <span class="number">0.6</span> + <span class="string">&quot;px&quot;</span>, <span class="string">&quot;70%&quot;</span>).<span class="title function_">move</span>(<span class="string">&quot;center&quot;</span>, <span class="string">&quot;center&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">createWinboxForApps</span>(<span class="params">app</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> title = <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            className = <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            html = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">switch</span> (app) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;encryption&quot;</span>: </span><br><span class="line">                title = <span class="string">&#x27;参星阁 - 加密工具&#x27;</span>;</span><br><span class="line">                className = <span class="string">&#x27;encryption&#x27;</span>;</span><br><span class="line">                html=<span class="string">`</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;select-items&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;select class=&quot;select-item type&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;MD5&quot;&gt;MD5&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;SHA1&quot;&gt;SHA1&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;SHA3&quot;&gt;SHA3&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;SHA224&quot;&gt;SHA224&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;SHA256&quot;&gt;SHA256&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;SHA384&quot;&gt;SHA384&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;SHA512&quot;&gt;SHA512&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;RIPEMD160&quot;&gt;RIPEMD160&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;AESEncode&quot;&gt;AES加密&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;AESDecode&quot;&gt;AES解密&lt;/option&gt;</span></span><br><span class="line"><span class="string">                        &lt;/select&gt;</span></span><br><span class="line"><span class="string">                        &lt;select class=&quot;select-item code&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;Hex&quot;&gt;Hex&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;Base64&quot;&gt;Base64&lt;/option&gt;</span></span><br><span class="line"><span class="string">                        &lt;/select&gt;</span></span><br><span class="line"><span class="string">                        &lt;select class=&quot;select-item case&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;Lower&quot;&gt;小写&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;Upper&quot;&gt;大写&lt;/option&gt;</span></span><br><span class="line"><span class="string">                        &lt;/select&gt;</span></span><br><span class="line"><span class="string">                        &lt;select class=&quot;select-item mode hide&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;CBC&quot;&gt;CBC&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;CFB&quot;&gt;CFB&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;CTR&quot;&gt;CTR&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;OFB&quot;&gt;OFB&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;ECB&quot;&gt;ECB&lt;/option&gt;</span></span><br><span class="line"><span class="string">                        &lt;/select&gt;</span></span><br><span class="line"><span class="string">                        &lt;select class=&quot;select-item pad hide&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;Pkcs7&quot;&gt;Pkcs7&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;Iso97971&quot;&gt;Iso97971&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;Iso10126&quot;&gt;Iso10126&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;AnsiX923&quot;&gt;AnsiX923&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;ZeroPadding&quot;&gt;ZeroPadding&lt;/option&gt;</span></span><br><span class="line"><span class="string">                            &lt;option class=&quot;opt&quot; value=&quot;NoPadding&quot;&gt;NoPadding&lt;/option&gt;</span></span><br><span class="line"><span class="string">                        &lt;/select&gt;</span></span><br><span class="line"><span class="string">                        &lt;input type=&quot;text&quot; class=&quot;select-item key hide&quot; placeholder=&quot;密钥&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;input type=&quot;text&quot; class=&quot;select-item iv hide&quot; placeholder=&quot;偏移量&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;textarea autocomplete=&quot;off&quot; rows=&quot;6&quot; placeholder=&quot;请输入或者粘贴需要处理的文本&quot; class=&quot;inner&quot; style=&quot;min-height: 32.6px;&quot;&gt;&lt;/textarea&gt;</span></span><br><span class="line"><span class="string">                    &lt;textarea autocomplete=&quot;off&quot; rows=&quot;6&quot; placeholder=&quot;处理结果&quot; class=&quot;outer lock&quot; style=&quot;min-height: 32.6px;&quot; disabled=&quot;disabled&quot;&gt;&lt;/textarea&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;btns&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;button class=&quot;btn blue&quot; type=&quot;button&quot; onclick=&quot;transcode()&quot;&gt;转码&lt;/button&gt;</span></span><br><span class="line"><span class="string">                        &lt;button class=&quot;btn green&quot; type=&quot;button&quot; onclick=&quot;copyTranscode()&quot;&gt;复制&lt;/button&gt;</span></span><br><span class="line"><span class="string">                        &lt;button class=&quot;btn red&quot; type=&quot;button&quot; onclick=&quot;clearTranscode()&quot;&gt;清空&lt;/button&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    `</span>;</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(<span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>), &#123; <span class="attr">src</span>: <span class="string">&quot;https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/crypto-js/4.1.1/crypto-js.min.js&quot;</span>, <span class="attr">id</span>: <span class="string">&quot;crypto-js&quot;</span> &#125;));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                title = <span class="string">&#x27;参星阁 - App&#x27;</span>;</span><br><span class="line">                className = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                html = <span class="string">&#x27;暂无应用程序&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(div);</span><br><span class="line">        winbox = <span class="title class_">WinBox</span>(&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;winboxForApps&#x27;</span>,</span><br><span class="line">            <span class="attr">class</span>: className,</span><br><span class="line">            <span class="attr">index</span>: <span class="number">989</span>,</span><br><span class="line">            <span class="attr">title</span>: title,</span><br><span class="line">            <span class="attr">x</span>: <span class="string">&quot;center&quot;</span>,</span><br><span class="line">            <span class="attr">y</span>: <span class="string">&quot;center&quot;</span>,</span><br><span class="line">            <span class="attr">minwidth</span>: <span class="string">&#x27;300px&#x27;</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="string">&quot;60%&quot;</span>,</span><br><span class="line">            <span class="attr">background</span>: <span class="string">&#x27;#29516C&#x27;</span>,</span><br><span class="line">            <span class="attr">onmaximize</span>: <span class="function">() =&gt;</span> &#123; div.<span class="property">innerHTML</span> = <span class="string">`&lt;style&gt;body::-webkit-scrollbar &#123;display: none;&#125;div#winboxForApps &#123;width: 100% !important;&#125;&lt;/style&gt;`</span> &#125;,</span><br><span class="line">            <span class="attr">onrestore</span>: <span class="function">() =&gt;</span> &#123; div.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        ctrl.<span class="title function_">resizeWinbox</span>();</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, ctrl.<span class="property">resizeWinbox</span>);</span><br><span class="line">        winbox.<span class="property">body</span>.<span class="property">innerHTML</span> = html;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(<span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>), &#123; <span class="attr">src</span>: <span class="string">&quot;/js/&quot;</span> + className + <span class="string">&quot;.js&quot;</span>, <span class="attr">id</span>: <span class="string">&quot;appScript&quot;</span> &#125;));</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.wb-header .wb-close&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;appScript&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (script) <span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">removeChild</span>(script);</span><br><span class="line">            <span class="keyword">var</span> script1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;crypto-js&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (script1) <span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">removeChild</span>(script1);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>自定义 encryption.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _type = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.encryption .select-item.type&quot;</span>),</span><br><span class="line">    _code = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.encryption .select-item.code&quot;</span>),</span><br><span class="line">    _case = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.encryption .select-item.case&quot;</span>),</span><br><span class="line">    _mode = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.encryption .select-item.mode&quot;</span>),</span><br><span class="line">    _pad = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.encryption .select-item.pad&quot;</span>),</span><br><span class="line">    _key = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.encryption .select-item.key&quot;</span>),</span><br><span class="line">    _iv = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.encryption .select-item.iv&quot;</span>),</span><br><span class="line">    textIn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.encryption .inner&#x27;</span>),</span><br><span class="line">    textOut = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.encryption .outer&#x27;</span>);</span><br><span class="line">textOut.<span class="title function_">addEventListener</span>(<span class="string">&quot;input&quot;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (textOut.<span class="property">value</span> == <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        textOut.<span class="property">disabled</span> = <span class="literal">true</span>;</span><br><span class="line">        textOut.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;lock&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        textOut.<span class="property">disabled</span> = <span class="literal">false</span>;</span><br><span class="line">        textOut.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;lock&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">_type.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (_type.<span class="property">value</span> == <span class="string">&#x27;AESEncode&#x27;</span>) &#123;</span><br><span class="line">        _case.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? <span class="literal">null</span> : _case.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hide&#x27;</span>); <span class="comment">// 隐藏 大小写</span></span><br><span class="line">        _code.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _code.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>; <span class="comment">// 显示</span></span><br><span class="line">        _mode.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _mode.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>;</span><br><span class="line">        _pad.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _pad.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>;</span><br><span class="line">        _key.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _key.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>;</span><br><span class="line">        _iv.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _iv.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_type.<span class="property">value</span> == <span class="string">&#x27;AESDecode&#x27;</span>) &#123;</span><br><span class="line">        _code.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? <span class="literal">null</span> : _code.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hide&#x27;</span>); <span class="comment">// 隐藏 编码、大小写</span></span><br><span class="line">        _case.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? <span class="literal">null</span> : _case.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hide&#x27;</span>);</span><br><span class="line">        _mode.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _mode.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>; <span class="comment">// 显示</span></span><br><span class="line">        _pad.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _pad.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>;</span><br><span class="line">        _key.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _key.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>;</span><br><span class="line">        _iv.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _iv.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        _code.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _code.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>; <span class="comment">// 显示</span></span><br><span class="line">        _case.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? _case.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hide&#x27;</span>) : <span class="literal">null</span>;</span><br><span class="line">        _mode.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? <span class="literal">null</span> : _mode.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hide&#x27;</span>); <span class="comment">// 隐藏</span></span><br><span class="line">        _pad.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? <span class="literal">null</span> : _pad.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hide&#x27;</span>);</span><br><span class="line">        _key.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? <span class="literal">null</span> : _key.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hide&#x27;</span>);</span><br><span class="line">        _iv.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;hide&#x27;</span>) ? <span class="literal">null</span> : _iv.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hide&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">_mode.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (_mode.<span class="property">value</span> != <span class="string">&#x27;ECB&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (_iv.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;lock&#x27;</span>)) &#123;</span><br><span class="line">            _iv.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;lock&#x27;</span>);</span><br><span class="line">            _iv.<span class="property">disabled</span> = <span class="literal">false</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!_iv.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;lock&#x27;</span>)) &#123;</span><br><span class="line">            _iv.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;lock&#x27;</span>);</span><br><span class="line">            _iv.<span class="property">disabled</span> = <span class="literal">true</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">copyTranscode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    textOut.<span class="title function_">select</span>();</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;copy&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clearTranscode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.encryption .inner&#x27;</span>).<span class="property">value</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    textOut.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    textOut.<span class="property">disabled</span> = <span class="literal">true</span>;</span><br><span class="line">    textOut.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;lock&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">transcode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        b = <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        __mode = <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        __pad = <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        __text = <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        __key = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(_key.<span class="property">value</span>),</span><br><span class="line">        __iv = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(_iv.<span class="property">value</span>);</span><br><span class="line">    <span class="keyword">switch</span> (_mode.<span class="property">value</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;CBC&quot;</span>: __mode = <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">CBC</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;CFB&quot;</span>: __mode = <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">CFB</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;CTR&quot;</span>: __mode = <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">CTR</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;OFB&quot;</span>: __mode = <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">OFB</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;ECB&quot;</span>: __mode = <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">ECB</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>: __mode = <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">CBC</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (_pad.<span class="property">value</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;Pkcs7&quot;</span>: __pad = <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">Pkcs7</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;Iso97971&quot;</span>: __pad = <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">Iso97971</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;Iso10126&quot;</span>: __pad = <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">Iso10126</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;AnsiX923&quot;</span>: __pad = <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">AnsiX923</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;ZeroPadding&quot;</span>: __pad = <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">ZeroPadding</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;NoPadding&quot;</span>: __pad = <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">NoPadding</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>: __pad = <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">Pkcs7</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (_type.<span class="property">value</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;MD5&quot;</span>: </span><br><span class="line">            a = <span class="title class_">CryptoJS</span>.<span class="title class_">MD5</span>(textIn.<span class="property">value</span>);</span><br><span class="line">            b = _code.<span class="property">value</span> == <span class="string">&#x27;Hex&#x27;</span> ? a.<span class="title function_">toString</span>() : <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">stringify</span>(a);</span><br><span class="line">            textOut.<span class="property">value</span> = _case.<span class="property">value</span> == <span class="string">&#x27;Lower&#x27;</span> ? b : b.<span class="title function_">toUpperCase</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;SHA1&quot;</span>: </span><br><span class="line">            a = <span class="title class_">CryptoJS</span>.<span class="title class_">SHA1</span>(textIn.<span class="property">value</span>);</span><br><span class="line">            b = _code.<span class="property">value</span> == <span class="string">&#x27;Hex&#x27;</span> ? a.<span class="title function_">toString</span>() : <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">stringify</span>(a);</span><br><span class="line">            textOut.<span class="property">value</span> = _case.<span class="property">value</span> == <span class="string">&#x27;Lower&#x27;</span> ? b : b.<span class="title function_">toUpperCase</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;SHA3&quot;</span>: </span><br><span class="line">            a = <span class="title class_">CryptoJS</span>.<span class="title class_">SHA3</span>(textIn.<span class="property">value</span>);</span><br><span class="line">            b = _code.<span class="property">value</span> == <span class="string">&#x27;Hex&#x27;</span> ? a.<span class="title function_">toString</span>() : <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">stringify</span>(a);</span><br><span class="line">            textOut.<span class="property">value</span> = _case.<span class="property">value</span> == <span class="string">&#x27;Lower&#x27;</span> ? b : b.<span class="title function_">toUpperCase</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;SHA224&quot;</span>: </span><br><span class="line">            a = <span class="title class_">CryptoJS</span>.<span class="title class_">SHA224</span>(textIn.<span class="property">value</span>);</span><br><span class="line">            b = _code.<span class="property">value</span> == <span class="string">&#x27;Hex&#x27;</span> ? a.<span class="title function_">toString</span>() : <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">stringify</span>(a);</span><br><span class="line">            textOut.<span class="property">value</span> = _case.<span class="property">value</span> == <span class="string">&#x27;Lower&#x27;</span> ? b : b.<span class="title function_">toUpperCase</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;SHA256&quot;</span>: </span><br><span class="line">            a = <span class="title class_">CryptoJS</span>.<span class="title class_">SHA256</span>(textIn.<span class="property">value</span>);</span><br><span class="line">            b = _code.<span class="property">value</span> == <span class="string">&#x27;Hex&#x27;</span> ? a.<span class="title function_">toString</span>() : <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">stringify</span>(a);</span><br><span class="line">            textOut.<span class="property">value</span> = _case.<span class="property">value</span> == <span class="string">&#x27;Lower&#x27;</span> ? b : b.<span class="title function_">toUpperCase</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;SHA384&quot;</span>: </span><br><span class="line">            a = <span class="title class_">CryptoJS</span>.<span class="title class_">SHA384</span>(textIn.<span class="property">value</span>);</span><br><span class="line">            b = _code.<span class="property">value</span> == <span class="string">&#x27;Hex&#x27;</span> ? a.<span class="title function_">toString</span>() : <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">stringify</span>(a);</span><br><span class="line">            textOut.<span class="property">value</span> = _case.<span class="property">value</span> == <span class="string">&#x27;Lower&#x27;</span> ? b : b.<span class="title function_">toUpperCase</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;SHA512&quot;</span>: </span><br><span class="line">            a = <span class="title class_">CryptoJS</span>.<span class="title class_">SHA512</span>(textIn.<span class="property">value</span>);</span><br><span class="line">            b = _code.<span class="property">value</span> == <span class="string">&#x27;Hex&#x27;</span> ? a.<span class="title function_">toString</span>() : <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">stringify</span>(a);</span><br><span class="line">            textOut.<span class="property">value</span> = _case.<span class="property">value</span> == <span class="string">&#x27;Lower&#x27;</span> ? b : b.<span class="title function_">toUpperCase</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;RIPEMD160&quot;</span>: </span><br><span class="line">            a = <span class="title class_">CryptoJS</span>.<span class="title class_">RIPEMD160</span>(textIn.<span class="property">value</span>);</span><br><span class="line">            b = _code.<span class="property">value</span> == <span class="string">&#x27;Hex&#x27;</span> ? a.<span class="title function_">toString</span>() : <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">stringify</span>(a);</span><br><span class="line">            textOut.<span class="property">value</span> = _case.<span class="property">value</span> == <span class="string">&#x27;Lower&#x27;</span> ? b : b.<span class="title function_">toUpperCase</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;AESEncode&quot;</span>: </span><br><span class="line">            __text = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(textIn.<span class="property">value</span>);</span><br><span class="line">            a = <span class="title class_">CryptoJS</span>.<span class="property">AES</span>.<span class="title function_">encrypt</span>(__text, __key, &#123; <span class="attr">iv</span>: __iv, <span class="attr">mode</span>: __mode, <span class="attr">padding</span>: __pad &#125;);</span><br><span class="line">            b = _code.<span class="property">value</span> == <span class="string">&#x27;Hex&#x27;</span> ? <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Hex</span>.<span class="title function_">stringify</span>(a.<span class="property">ciphertext</span>) : a.<span class="title function_">toString</span>();</span><br><span class="line">            textOut.<span class="property">value</span> =  b;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;AESDecode&quot;</span>: </span><br><span class="line">        <span class="comment">// /^([0-9a-zA-Z+/]&#123;4&#125;)*(([0-9a-zA-Z+/]&#123;2&#125;==)|([0-9a-zA-Z+/]&#123;3&#125;=))?$/</span></span><br><span class="line">            <span class="keyword">var</span> base64Regex = <span class="regexp">/^[A-Za-z0-9+/]*=&#123;1,2&#125;$/</span>,</span><br><span class="line">                hexRegex = <span class="regexp">/^(?:[0-9a-fA-F]&#123;4&#125;)*$/</span>;</span><br><span class="line">            <span class="keyword">if</span> (base64Regex.<span class="title function_">test</span>(textIn.<span class="property">value</span>)) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;base64&#x27;</span>);</span><br><span class="line">                __text = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">stringify</span>(<span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Base64</span>.<span class="title function_">parse</span>(textIn.<span class="property">value</span>));</span><br><span class="line">                textOut.<span class="property">value</span> = <span class="title class_">CryptoJS</span>.<span class="property">AES</span>.<span class="title function_">decrypt</span>(__text, __key, &#123; <span class="attr">iv</span>: __iv, <span class="attr">mode</span>: __mode, <span class="attr">padding</span>: __pad &#125;).<span class="title function_">toString</span>(<span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hexRegex.<span class="title function_">test</span>(textIn.<span class="property">value</span>)) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hex&#x27;</span>);</span><br><span class="line">                __text = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Hex</span>.<span class="title function_">parse</span>(textIn.<span class="property">value</span>);</span><br><span class="line">                textOut.<span class="property">value</span> = <span class="title class_">CryptoJS</span>.<span class="property">AES</span>.<span class="title function_">decrypt</span>(&#123; <span class="attr">ciphertext</span>: __text &#125;, __key, &#123; <span class="attr">iv</span>: __iv, <span class="attr">mode</span>: __mode, <span class="attr">padding</span>: __pad &#125;).<span class="title function_">toString</span>(<span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据错误&#x27;</span>);</span><br><span class="line">                <span class="title function_">alert</span>(<span class="string">&#x27;数据错误&#x27;</span>);<span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="attr">default</span>: ;</span><br><span class="line">    &#125;</span><br><span class="line">    textOut.<span class="property">disabled</span> = <span class="literal">false</span>;</span><br><span class="line">    textOut.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;lock&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>winbox 部分代码参考 Leonus 的文章：</p><div class="tag link"><a class="link-card" title="博客背景切换-弹窗版" href="https://blog.leonus.cn/2022/bg2.html"><div class="main"><div class="left"><img src="https://q1.qlogo.cn/g?b=qq&nk=553344777&s=5"/></div><div class="right"><p class="text">博客背景切换-弹窗版</p><p class="url">https://blog.leonus.cn/2022/bg2.html</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Leonus</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div><p>winbox 开源仓库：</p><div class="tag link"><a class="link-card" title="winbox仓库" href="https://github.com/nextapps-de/winbox"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/Github.webp"/></div><div class="right"><p class="text">winbox仓库</p><p class="url">https://github.com/nextapps-de/winbox</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— nextapps-de</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div><p>CryptoJS 参考文档：</p><div class="tag link"><a class="link-card" title="CryptoJS-中文文档" href="https://www.cnblogs.com/huiguo/p/16601076.html"><div class="main"><div class="left"><img src="/img/android-attach.png"/></div><div class="right"><p class="text">CryptoJS-中文文档</p><p class="url">https://www.cnblogs.com/huiguo/p/16601076.html</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— 博客园@灰锅</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div><div class="tag link"><a class="link-card" title="crypto-js aes 加解密" href="https://blog.csdn.net/qq_34402069/article/details/126503916"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/CSDN.webp"/></div><div class="right"><p class="text">crypto-js aes 加解密</p><p class="url">https://blog.csdn.net/qq_34402069/article/details/126503916</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— CSDN@王新焱</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>点赞组件：让你的博客获得更多赞赏！</title>
      <link href="/post/1c75834d.html"/>
      <url>/post/1c75834d.html</url>
      
        <content type="html"><![CDATA[<h2 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h2><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202309191713278.webp" alt="点赞组件预览图"></p><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>点赞组件主要包括两个功能，一个是加载文章时，显示出最新点赞数，另一个是当用户点击点赞按钮时，点赞数自动加一，同时数据同步到云端数据库。</p><p>对于第一个功能，我设计成每次进入文章时都自动从云端拉取点赞数，主要请求参数为文章的 abbrlink 代码，采用 crc32 算法，一文一码，具有唯一性，也可以作为数据库的主键使用。文章的 abbrlink 可通过 window.location.pathname 得到。</p><p>对于第二个功能，为了避免同一用户重复点赞，我增加了一项 IP 参数，一篇文章一个 IP 只能点赞一次，当然，对于代理 IP 是无法识别的。由于 IP 的固定性，所以在网站首次加载时便将 IP 地址存入全局变量中，无需每次请求都获取一次 IP。</p><h2 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h2><p>数据库依旧采用 Supabase，新建一个 LikeCount 表，设三个键：index、count、ips，其中 index 为主键，保存文章 abbrlink 码，count 为点赞数，ips 为用户 IP 地址。表内无需插值，遇到新文章的请求，后端会自动在表中新建一行数据。</p><p>仿照 <a href="/post/602922a7.html">上篇文章</a> 的后端部分内容，补充以下代码即可。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文章点赞计数</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/likecount&#x27;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> mode = req.<span class="property">query</span>.<span class="property">mode</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">const</span> id = req.<span class="property">query</span>.<span class="property">id</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">if</span> (mode == <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: filterData, <span class="attr">error</span>: error1 &#125; = <span class="keyword">await</span> supabase</span><br><span class="line">        .<span class="title function_">from</span>(<span class="string">&#x27;LikeCount&#x27;</span>)</span><br><span class="line">        .<span class="title function_">select</span>()</span><br><span class="line">        .<span class="title function_">eq</span>(<span class="string">&#x27;index&#x27;</span>, id)</span><br><span class="line">      <span class="keyword">if</span> (error1) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error1);</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&#x27;404&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;查询失败&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span> &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!filterData.<span class="property">length</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; <span class="attr">data</span>: insertData, <span class="attr">error</span>: error2 &#125; = <span class="keyword">await</span> supabase</span><br><span class="line">              .<span class="title function_">from</span>(<span class="string">&#x27;LikeCount&#x27;</span>)</span><br><span class="line">              .<span class="title function_">insert</span>([</span><br><span class="line">                &#123; <span class="attr">index</span>: id, <span class="attr">count</span>: <span class="number">0</span> &#125;</span><br><span class="line">              ])</span><br><span class="line">              .<span class="title function_">select</span>()</span><br><span class="line">            <span class="keyword">if</span> (error2) &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error2);</span><br><span class="line">              res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&#x27;500&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;新文章录入失败&#x27;</span>, <span class="attr">content</span>: insertData &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              res.<span class="title function_">status</span>(<span class="number">201</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&#x27;201&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;新文章录入成功&#x27;</span>, <span class="attr">content</span>: insertData &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Data Search completely&#x27;</span>);</span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&#x27;200&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;查询成功&#x27;</span>, <span class="attr">content</span>: filterData &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> ip = req.<span class="property">query</span>.<span class="property">ip</span>.<span class="title function_">toString</span>();</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: oldData, <span class="attr">error</span>: error3 &#125; = <span class="keyword">await</span> supabase</span><br><span class="line">        .<span class="title function_">from</span>(<span class="string">&#x27;LikeCount&#x27;</span>)</span><br><span class="line">        .<span class="title function_">select</span>()</span><br><span class="line">        .<span class="title function_">eq</span>(<span class="string">&#x27;index&#x27;</span>, id)</span><br><span class="line">      <span class="keyword">if</span> (error3) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error3);</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&#x27;404&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;查询失败&#x27;</span>, <span class="attr">content</span>: oldData &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> ips = oldData[<span class="number">0</span>].<span class="property">ips</span></span><br><span class="line">        <span class="keyword">if</span> (ips.<span class="title function_">includes</span>(ip)) &#123;</span><br><span class="line">          res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&#x27;205&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;您已经点过赞啦&#x27;</span>, <span class="attr">content</span>: oldData &#125;);      </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> ipsArray = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(ips)</span><br><span class="line">          ipsArray.<span class="title function_">push</span>(ip)</span><br><span class="line">          <span class="keyword">var</span> newIps = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(ipsArray)</span><br><span class="line">          <span class="keyword">var</span> newNum = oldData[<span class="number">0</span>].<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">          <span class="keyword">const</span> &#123; <span class="attr">data</span>: updateData, <span class="attr">error</span>: error4 &#125; = <span class="keyword">await</span> supabase</span><br><span class="line">            .<span class="title function_">from</span>(<span class="string">&#x27;LikeCount&#x27;</span>)</span><br><span class="line">            .<span class="title function_">update</span>(&#123; <span class="attr">count</span>: newNum, <span class="attr">ips</span>: newIps &#125;)</span><br><span class="line">            .<span class="title function_">eq</span>(<span class="string">&#x27;index&#x27;</span>, id)</span><br><span class="line">            .<span class="title function_">select</span>()</span><br><span class="line">          <span class="keyword">if</span> (error4) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error4);</span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">501</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&#x27;501&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;更新失败&#x27;</span>, <span class="attr">content</span>: oldData &#125;);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Data update completely&#x27;</span>);</span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&#x27;200&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;更新成功&#x27;</span>, <span class="attr">content</span>: updateData &#125;);</span><br><span class="line">          &#125; </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Internal Server Error&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="前端代码"><a href="#前端代码" class="headerlink" title="前端代码"></a>前端代码</h2><p>前端设计按个人喜好，我是将点赞按钮和打赏按钮组合在一起，毕竟赞赏嘛，先赞再赏嘛哈哈哈哈。</p><p>修改 themes/butterfly/layout/includes/post/reward.pug 路径文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">.post-reward</span><br><span class="line">  .like-button(onclick=&#x27;ctrl.sendArticleLike()&#x27;)</span><br><span class="line">    i.fas.fa-thumbs-up</span><br><span class="line">    = &#x27; 赞 &#x27;</span><br><span class="line">    span.like-count= &#x27;0&#x27;</span><br><span class="line">    span.load</span><br><span class="line">      i.fas.fa-spinner.fa-spin</span><br><span class="line">  .reward-button</span><br><span class="line">    i.fas.fa-qrcode</span><br><span class="line">    = &#x27; &#x27; + _p(&#x27;donate&#x27;)</span><br><span class="line">    .reward-main</span><br><span class="line">      ul.reward-all</span><br><span class="line">        each item in theme.reward.QR_code</span><br><span class="line">          - var clickTo = item.link ? item.link : item.img</span><br><span class="line">          li.reward-item</span><br><span class="line">            a(href=url_for(clickTo) data-fancybox=&#x27;gallery&#x27; target=&#x27;_blank&#x27;)</span><br><span class="line">              img.post-qr-code-img(src=url_for(item.img) alt=item.text)</span><br><span class="line">            .post-qr-code-desc=item.text</span><br></pre></td></tr></table></figure><p>修改 themes\butterfly\source\css_layout\reward.styl 路径文件：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-reward</span></span><br><span class="line">  <span class="attribute">position</span>: relative</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">80px</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">  <span class="attribute">text-align</span>: center</span><br><span class="line">  <span class="attribute">pointer-events</span>: none</span><br><span class="line">  <span class="attribute">display</span>: flex</span><br><span class="line">  <span class="attribute">justify-content</span>: center</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">10px</span></span><br><span class="line"></span><br><span class="line">  &amp; &gt; *</span><br><span class="line">    <span class="attribute">pointer-events</span>: auto</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.like-button</span></span><br><span class="line">    <span class="attribute">display</span>: inline-block</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span> <span class="number">12px</span></span><br><span class="line">    <span class="attribute">background</span>: red</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,.<span class="number">8</span>)</span><br><span class="line">    <span class="attribute">cursor</span>: pointer</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0.5rem</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span></span><br><span class="line">    <span class="attribute">pointer-events</span>: all</span><br><span class="line">    <span class="selector-pseudo">&amp;:not</span>(.loading)<span class="selector-pseudo">:hover</span></span><br><span class="line">      <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">90</span>, <span class="number">90</span>)</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-class">.loading</span></span><br><span class="line">      <span class="attribute">cursor</span>: default</span><br><span class="line">      <span class="attribute">pointer-events</span>: none</span><br><span class="line">      <span class="selector-class">.like-count</span></span><br><span class="line">        <span class="attribute">display</span>: none</span><br><span class="line">      <span class="selector-class">.load</span></span><br><span class="line">        <span class="attribute">display</span>: inline-block</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.like-count</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">20px</span></span><br><span class="line">      <span class="attribute">display</span>: inline-block</span><br><span class="line">    <span class="selector-class">.load</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">20px</span></span><br><span class="line">      <span class="attribute">display</span>: none</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.reward-button</span></span><br><span class="line">    <span class="attribute">display</span>: inline-block</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span> <span class="number">12px</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--gavin-blue3)</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,.<span class="number">8</span>)</span><br><span class="line">    <span class="attribute">cursor</span>: pointer</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0.5rem</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span></span><br><span class="line">      <span class="attribute">background</span>: <span class="built_in">var</span>(--gavin-blue1)</span><br><span class="line"></span><br><span class="line">      &amp; &gt; <span class="selector-class">.reward-main</span></span><br><span class="line">        <span class="attribute">display</span>: block</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.reward-main</span></span><br><span class="line">    <span class="attribute">position</span>: absolute</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">40px</span></span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span></span><br><span class="line">    <span class="attribute">display</span>: none</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.reward-all</span></span><br><span class="line">      <span class="attribute">display</span>: inline-block</span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">10px</span></span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">4px</span></span><br><span class="line">      <span class="attribute">background</span>: <span class="built_in">var</span>(--reward-pop)</span><br><span class="line"></span><br><span class="line">      <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">        <span class="attribute">position</span>: absolute</span><br><span class="line">        <span class="attribute">bottom</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">        <span class="attribute">height</span>: <span class="number">10px</span></span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-pseudo">&amp;:after</span></span><br><span class="line">        <span class="attribute">position</span>: absolute</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">bottom</span>: <span class="number">2px</span></span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span> auto</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">height</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">border-top</span>: <span class="number">13px</span> solid <span class="built_in">var</span>(--reward-pop)</span><br><span class="line">        <span class="attribute">border-right</span>: <span class="number">13px</span> solid transparent</span><br><span class="line">        <span class="attribute">border-left</span>: <span class="number">13px</span> solid transparent</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.reward-item</span></span><br><span class="line">        <span class="attribute">display</span>: inline-block</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">8px</span></span><br><span class="line">        <span class="attribute">list-style-type</span>: none</span><br><span class="line">        <span class="attribute">vertical-align</span>: top</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">img</span></span><br><span class="line">          <span class="attribute">width</span>: <span class="number">110px</span></span><br><span class="line">          <span class="attribute">height</span>: <span class="number">110px</span></span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.post-qr-code-desc</span></span><br><span class="line">          <span class="attribute">width</span>: <span class="number">110px</span></span><br><span class="line">          <span class="attribute">line-height</span>: <span class="number">1</span></span><br><span class="line">          <span class="attribute">font-size</span>: <span class="number">90%</span></span><br><span class="line">          <span class="attribute">color</span>: <span class="variable">$reward</span>-pop-up-color</span><br></pre></td></tr></table></figure><p>添加自定义 js 文件。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pjax适配</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    ctrl.<span class="title function_">getIp</span>();</span><br><span class="line">    ctrl.<span class="title function_">refreshLikeCount</span>();</span><br><span class="line">&#125;); <span class="comment">//第一次加载</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:complete&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    ctrl.<span class="title function_">refreshLikeCount</span>();</span><br><span class="line">&#125;) <span class="comment">// pjax加载完成（切换页面）后再执行一次</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ipAddress = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ctrl = &#123;</span><br><span class="line">    <span class="title function_">getIp</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.ipify.org?format=json&#x27;</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">                ipAddress = data.<span class="property">ip</span>;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;您的 IP 地址：&#x27;</span> + ipAddress);</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取 IP 地址失败:&#x27;</span>, error);</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="title function_">refreshLikeCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> p = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span></span><br><span class="line">        <span class="keyword">var</span> q = p.<span class="title function_">substring</span>(<span class="number">1</span>,<span class="number">5</span>)</span><br><span class="line">        <span class="keyword">if</span> (q == <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i = p.<span class="title function_">substring</span>(<span class="number">6</span>,<span class="number">14</span>)</span><br><span class="line">            <span class="title function_">fetch</span>(<span class="string">`https://xxx.xxxx.xxx/likecount?mode=get&amp;id=<span class="subst">$&#123;i&#125;</span>`</span>)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (data.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> likeCount = data.<span class="property">content</span>[<span class="number">0</span>].<span class="property">count</span></span><br><span class="line">                        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.post-reward .like-button .like-count&quot;</span>).<span class="property">innerText</span> = likeCount</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">message</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">                .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取点赞信息失败:&#x27;</span>, error)</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="title function_">sendArticleLike</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.post-reward .like-button&quot;</span>)</span><br><span class="line">        <span class="keyword">var</span> i = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span>.<span class="title function_">substring</span>(<span class="number">6</span>,<span class="number">14</span>)</span><br><span class="line">        a.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;loading&quot;</span>)</span><br><span class="line">        <span class="title function_">fetch</span>(<span class="string">`https://xxx.xxxx.xxx/likecount?mode=add&amp;id=<span class="subst">$&#123;i&#125;</span>&amp;ip=<span class="subst">$&#123;ipAddress&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (data.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> likeCount = data.<span class="property">content</span>[<span class="number">0</span>].<span class="property">count</span></span><br><span class="line">                    a.<span class="title function_">querySelector</span>(<span class="string">&quot;.like-count&quot;</span>).<span class="property">innerText</span> = likeCount</span><br><span class="line">                    a.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;loading&quot;</span>)</span><br><span class="line">                    tools.<span class="title function_">showMessage</span>(<span class="string">&quot;感谢您的认可！&quot;</span>, <span class="string">&quot;success&quot;</span>, <span class="number">2</span>)</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span>(data.<span class="property">code</span> == <span class="number">205</span>) &#123;</span><br><span class="line">                    a.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;loading&quot;</span>)</span><br><span class="line">                    tools.<span class="title function_">showMessage</span>(data.<span class="property">message</span>, <span class="string">&quot;warning&quot;</span>, <span class="number">2</span>)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    a.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;loading&quot;</span>)</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">message</span>)</span><br><span class="line">                    tools.<span class="title function_">showMessage</span>(data.<span class="property">message</span>, <span class="string">&quot;error&quot;</span>, <span class="number">2</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取点赞信息失败:&#x27;</span>, error)</span><br><span class="line">                a.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;loading&quot;</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note primary modern"><p>注意，上面用到的 tools.showMessage 方法依赖于 ElementUI 库，如果你有自己的弹窗通知系统，可以将它替换掉。<br>如果你也要用 ElementUI 的弹窗，可以看上一篇文章 <a href="/post/602922a7.html#index-md">给友链朋友圈加上收藏栏</a> </p></div>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
            <tag> node.js </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>给友链朋友圈加上收藏栏</title>
      <link href="/post/602922a7.html"/>
      <url>/post/602922a7.html</url>
      
        <content type="html"><![CDATA[<p>最近逛友链博客，发现 <a href="https://blog.leonus.cn/">Leonus</a> 大佬又搞了不少新活，像“<a href="https://blog.leonus.cn/fcircle/">博主收藏</a>”、“<a href="https://blog.leonus.cn/link/">友链查询</a>”等等，还有各种外链卡片，都是很实用的功能，非常奈斯啊。今天我也来整一个类似的文章收藏功能。</p><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>首先要在原本的朋友圈文章卡片上新增一个收藏按钮，点击目标文章卡片上的按钮即可收藏该文章，然后在朋友圈文章列表的上方增加一条收藏栏，在收藏栏中显示所有的收藏文章列表。其次，一般只有博主本人才有权限增删收藏栏的文章，所以还要添加一个密码验证功能。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202309181152729.webp" alt="收藏栏"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202309181154316.webp" alt="密码输入框"></p><p>详细效果请前往 <a href="/fcircle/">订阅</a> 页面查看。</p><p>关于收藏栏的后端部分，这里采用的是<code>Github</code>+<code>Supabase</code>+<code>Vercel</code>的方案，另外配有缓存机制，首次进入页面调用云端数据库的数据，重新进入页面则调用本地缓存，缓存设有 1 天的有效期，过期后会自动拉取云端数据库以更新本地缓存。另外为实现多端同步，在收藏栏右上角设有刷新按钮，可以实现一键同步。收藏栏默认显示两行，多余部分折叠隐藏，可点击右上角按钮展开全部内容。</p><h2 id="朋友圈配置"><a href="#朋友圈配置" class="headerlink" title="朋友圈配置"></a>朋友圈配置</h2><p>这个文章收藏是在友链朋友圈的基础上延伸出来的一个附加功能，所以基础是要先配置好友链朋友圈功能。朋友圈我是按照 <a href="https://fcircle-doc.yyyzyyyz.cn/#/deploy">官方文档</a> 配置的，其中后端部分采用的是<code>Github</code>+<code>Sqlite</code>+<code>Vercel</code>的 <a href="https://fcircle-doc.yyyzyyyz.cn/#/backenddeploy?id=githubsqlite%e9%83%a8%e7%bd%b2">无服务器部署</a> 方式，前端部分采用的是 <a href="https://fcircle-doc.yyyzyyyz.cn/#/frontenddeploy?id=%e6%96%b9%e6%a1%88%ef%bc%9a%e6%9e%97%e6%9c%a8%e6%9c%a8">林木木</a> 的方案。林木木的方案不带管理面板，如果需要更改设置的话，会比较麻烦，但优点是代码量少，简短易读，方便我二次修改。</p><p>林木木的朋友圈方案配有一个顶栏，可以显示“订阅”、“活跃”、“日志”等消息，点击“订阅”可以查看随机一个友链的文章列表，点击“活跃”可以切换私有友链库和公共库两种数据源，点击“日志”可以手动清空本地缓存，重新拉取云端数据库。另外支持“创建日期”和“更新日期”两种排列方式，可以自由手动切换。</p><h2 id="数据库配置"><a href="#数据库配置" class="headerlink" title="数据库配置"></a>数据库配置</h2><p>Vercel 的 Integrations Marketplace 上提供有很多种数据库，其中 MongoDB Atlas 之前在部署 twikoo 评论的时候用过，Upstash 在配置个人网盘的时候用过，听群友推荐说 PlanetScale 和 Supabase 也不错。这里采用 Supabase 作为项目云端数据存储。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202309181410259.webp" alt="Databases in Integrations Marketplace"></p><p>注册 <a href="https://supabase.com/">Supabase</a> 后进入 Dashboard，首先点击 New project 创建一个新的项目，设置项目名称和数据库密码，选择合适的地区，然后确认创建。整个创建过程有点长，需要耐心等待几十秒的时间。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202309181513346.webp" alt="Create a new project"></p><p>创建完成会自动进入项目，页面左侧有一条纵向菜单栏，点击 Table Editor 可以对数据库进行可视化操作，点击 SQL Editor 可以进行命令行操作，这对于小白来说还是非常方便的。我们进入 Table Editor 点击 New table 创建一个新数据表，设置好表名、描述，最重要的是各列的参数配置，默认的 Column 有 id 和 created_at 两列，点击 Add column 新增几条参数，分别是 index、title、link、author、avatar、time 六个参数，参数类型均设置为 text，点击 save 保存。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202309181516521.webp" alt="Create a new table"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202309181545572.webp" alt="Add columns"></p><p>进入数据表，点击 Insert 可以手动插入数据，因为是可视化界面，增删改查都十分直观。当然我们不需要在这里插入数据，而是要能够在外部调用它的增删改查能力。在左侧菜单栏中点击 API Docs 可以查看详细的使用方法，其中，Introduction 栏提供了初始化代码。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createClient &#125; <span class="keyword">from</span> <span class="string">&quot;@supabase/supabase-js&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> supabaseUrl = <span class="string">&quot;https://xxxxxxxxxxxxx.supabase.co&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> supabaseKey = process.<span class="property">env</span>.<span class="property">SUPABASE_KEY</span>;</span><br><span class="line"><span class="keyword">const</span> supabase = <span class="title function_">createClient</span>(supabaseUrl, supabaseKey);</span><br></pre></td></tr></table></figure><p>这里有两个重要参数<code>supabaseUrl</code>和<code>supabaseKey</code>，需要在设置里面查找。点击左侧菜单栏中的 Project Settings，点击 API 栏，其中 Project URL 即为 supabaseUrl，Project API keys 即为 supabaseKey。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202309181650740.webp" alt="获取supabaseUrl和supabaseKey"></p><p>回到 API Docs，在 Tables and Views 栏找到刚刚新建的表名，进入文档后可以看到详细的增删改查示例代码。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202309181657578.webp" alt="示例代码"></p><h2 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h2><p>Github 新建一个私有仓库，仓库内主要包含 3 个文件，内容如下。</p><h3 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h3><p>注意这里 supabaseUrl 做了脱敏处理，要替换成自己的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入所需包和模块</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;dotenv&quot;</span>).<span class="title function_">config</span>(); <span class="comment">// 导入 dotenv 并加载 .env 文件</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  res.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&quot;*&quot;</span>);</span><br><span class="line">  res.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;GET, POST, PUT, DELETE&quot;</span>);</span><br><span class="line">  res.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="string">&quot;Content-Type, Authorization&quot;</span>);</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 创建 Express 应用程序</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"><span class="keyword">const</span> savedKey = process.<span class="property">env</span>.<span class="property">KEY</span>;</span><br><span class="line"><span class="comment">// 连接数据库</span></span><br><span class="line"><span class="keyword">const</span> &#123; createClient &#125; = <span class="built_in">require</span>(<span class="string">&quot;@supabase/supabase-js&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> supabaseUrl = <span class="string">&quot;https://xxxxxxxxxxxxxxxxx.supabase.co&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> supabaseKey = process.<span class="property">env</span>.<span class="property">SUPABASE_KEY</span>;</span><br><span class="line"><span class="keyword">const</span> supabase = <span class="title function_">createClient</span>(supabaseUrl, supabaseKey);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新增收藏</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/subscribe&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> key = req.<span class="property">query</span>.<span class="property">key</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">const</span> index = req.<span class="property">query</span>.<span class="property">index</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">const</span> title = req.<span class="property">query</span>.<span class="property">title</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">const</span> link = req.<span class="property">query</span>.<span class="property">link</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">const</span> author = req.<span class="property">query</span>.<span class="property">author</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">const</span> avatar = req.<span class="property">query</span>.<span class="property">avatar</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">const</span> time = req.<span class="property">query</span>.<span class="property">time</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">if</span> (key == savedKey) &#123;</span><br><span class="line">      <span class="comment">// 存入数据库</span></span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: filterData, <span class="attr">error</span>: error1 &#125; = <span class="keyword">await</span> supabase</span><br><span class="line">        .<span class="title function_">from</span>(<span class="string">&quot;Subscribe&quot;</span>)</span><br><span class="line">        .<span class="title function_">select</span>()</span><br><span class="line">        .<span class="title function_">eq</span>(<span class="string">&quot;index&quot;</span>, index);</span><br><span class="line">      <span class="keyword">if</span> (error1) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error:&quot;</span>, error1);</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;500&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;查询失败&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!filterData.<span class="property">length</span>) &#123;</span><br><span class="line">          <span class="keyword">const</span> &#123; <span class="attr">data</span>: createdData, <span class="attr">error</span>: error2 &#125; = <span class="keyword">await</span> supabase</span><br><span class="line">            .<span class="title function_">from</span>(<span class="string">&quot;Subscribe&quot;</span>)</span><br><span class="line">            .<span class="title function_">insert</span>([</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">index</span>: index,</span><br><span class="line">                <span class="attr">title</span>: title,</span><br><span class="line">                <span class="attr">link</span>: link,</span><br><span class="line">                <span class="attr">author</span>: author,</span><br><span class="line">                <span class="attr">avatar</span>: avatar,</span><br><span class="line">                <span class="attr">time</span>: time,</span><br><span class="line">              &#125;,</span><br><span class="line">            ])</span><br><span class="line">            .<span class="title function_">select</span>();</span><br><span class="line">          <span class="keyword">if</span> (error2) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error:&quot;</span>, error2);</span><br><span class="line">            res</span><br><span class="line">              .<span class="title function_">status</span>(<span class="number">500</span>)</span><br><span class="line">              .<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;500&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;存储失败&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Data stored successfully:&quot;</span>, createdData[<span class="number">0</span>]);</span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">              <span class="attr">code</span>: <span class="string">&quot;200&quot;</span>,</span><br><span class="line">              <span class="attr">message</span>: <span class="string">&quot;存储成功&quot;</span>,</span><br><span class="line">              <span class="attr">content</span>: createdData[<span class="number">0</span>],</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          res</span><br><span class="line">            .<span class="title function_">status</span>(<span class="number">402</span>)</span><br><span class="line">            .<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;402&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;文章已存在&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;401&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;密码错误&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&quot;Internal Server Error&quot;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文章删除</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/delsavedtitles&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> key = req.<span class="property">query</span>.<span class="property">key</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">const</span> index = req.<span class="property">query</span>.<span class="property">index</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">if</span> (key == savedKey) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; data, error &#125; = <span class="keyword">await</span> supabase</span><br><span class="line">        .<span class="title function_">from</span>(<span class="string">&quot;Subscribe&quot;</span>)</span><br><span class="line">        .<span class="title function_">delete</span>()</span><br><span class="line">        .<span class="title function_">eq</span>(<span class="string">&quot;index&quot;</span>, index);</span><br><span class="line">      <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error:&quot;</span>, error);</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;500&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;删除失败&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!data.<span class="property">length</span>) &#123;</span><br><span class="line">          res</span><br><span class="line">            .<span class="title function_">status</span>(<span class="number">404</span>)</span><br><span class="line">            .<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;404&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;未找到文章&quot;</span>, <span class="attr">content</span>: data &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Data delete completely&quot;</span>);</span><br><span class="line">          res</span><br><span class="line">            .<span class="title function_">status</span>(<span class="number">200</span>)</span><br><span class="line">            .<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;200&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;删除成功&quot;</span>, <span class="attr">content</span>: data &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;401&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;密码错误&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&quot;Internal Server Error&quot;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 收藏文章查询</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/getsavedtitles&quot;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> mode = req.<span class="property">query</span>.<span class="property">mode</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">const</span> column = req.<span class="property">query</span>.<span class="property">column</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">const</span> value = req.<span class="property">query</span>.<span class="property">value</span>.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">if</span> (mode == <span class="string">&quot;search&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: filterData, error &#125; = <span class="keyword">await</span> supabase</span><br><span class="line">        .<span class="title function_">from</span>(<span class="string">&quot;Subscribe&quot;</span>)</span><br><span class="line">        .<span class="title function_">select</span>()</span><br><span class="line">        .<span class="title function_">eq</span>(column, value);</span><br><span class="line">      <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error:&quot;</span>, error);</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;404&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;查询失败&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Data serach completely:&quot;</span>, filterData);</span><br><span class="line">        res</span><br><span class="line">          .<span class="title function_">status</span>(<span class="number">200</span>)</span><br><span class="line">          .<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;200&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;查询成功&quot;</span>, <span class="attr">content</span>: filterData &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="string">&quot;all&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: filterData, error &#125; = <span class="keyword">await</span> supabase</span><br><span class="line">        .<span class="title function_">from</span>(<span class="string">&quot;Subscribe&quot;</span>)</span><br><span class="line">        .<span class="title function_">select</span>();</span><br><span class="line">      <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error:&quot;</span>, error);</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;404&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;查询失败&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mode == <span class="string">&quot;all&quot;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Data serach completely:&quot;</span>, filterData);</span><br><span class="line">        res</span><br><span class="line">          .<span class="title function_">status</span>(<span class="number">200</span>)</span><br><span class="line">          .<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;200&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;查询成功&quot;</span>, <span class="attr">content</span>: filterData &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">code</span>: <span class="string">&quot;401&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;参数错误&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&quot;Internal Server Error&quot;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动服务器</span></span><br><span class="line"><span class="keyword">const</span> server = app.<span class="title function_">listen</span>(process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> port = server.<span class="title function_">address</span>().<span class="property">port</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server is running on port <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;projectname&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Echo \&quot;error: error\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node index.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MIT&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;axios&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.27.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;express&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.18.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dotenv&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^8.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@supabase/supabase-js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.0.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="vercel-json"><a href="#vercel-json" class="headerlink" title="vercel.json"></a>vercel.json</h3><p>注意 KEY 和 SUPABASE_KEY 要换成自己的，其中<code>KEY</code>为 SHA256 加密后的前端身份验证密码，<code>SUPABASE_KEY</code>为 Supabase 密钥。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;builds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;use&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@vercel/node&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;routes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;KEY&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;SUPABASE_KEY&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>仓库建好后，部署到 Vercel 上，在 Storage 栏进入 Integrations Marketplace 找到 Supabase，点击 Add Integration 将其添加进项目。然后就是配置自定义域名，自此后端配置完成。</p><h2 id="前端代码"><a href="#前端代码" class="headerlink" title="前端代码"></a>前端代码</h2><h3 id="index-md"><a href="#index-md" class="headerlink" title="index.md"></a>index.md</h3><p>打开先前在配置友链朋友圈的时候创建的 /fcircle/index.md，配置如下：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 订阅</span><br><span class="line">descr: 使用 友链朋友圈 订阅友链最新文章</span><br><span class="line">cover: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><br><span class="line"><span class="section">date: xxxxxxxxxxxxxxxxxxxxxxx</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;我的收藏&quot;</span>&gt;</span></span></span><br><span class="line"><span class="code">    我的收藏</span></span><br><span class="line"><span class="code">    &lt;a class=&quot;refresh&quot; onclick=&quot;localStorage.removeItem(&#x27;savedArticles&#x27;);location.reload();&quot;&gt;</span></span><br><span class="line"><span class="code">        &lt;i class=&quot;blogfont icon-refresh&quot;&gt;&lt;/i&gt;</span></span><br><span class="line"><span class="code">    &lt;/a&gt;</span></span><br><span class="line"><span class="code">    &lt;a class=&quot;fold&quot; onclick=&quot;foldSavedArticles(event)&quot;&gt;</span></span><br><span class="line"><span class="code">        &lt;i class=&quot;blogfont icon-arrow-down&quot;&gt;&lt;/i&gt;</span></span><br><span class="line"><span class="code">    &lt;/a&gt;</span></span><br><span class="line"><span class="code">&lt;/h2&gt;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;cf-saved-post&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;最新文章&quot;</span>&gt;</span></span></span><br><span class="line"><span class="code">    最新文章</span></span><br><span class="line"><span class="code">&lt;/h2&gt;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="code">    &lt;div id=&quot;cf-container&quot;&gt;</span></span><br><span class="line"><span class="code">        与主机通讯中……</span></span><br><span class="line"><span class="code">    &lt;/div&gt;</span></span><br><span class="line"><span class="code">&lt;/div&gt;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inputBoxMain&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fcircleInputBox&quot;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inputBox&quot;</span>&gt;</span></span></span><br><span class="line"><span class="code">    &lt;div class=&quot;content-body&quot;&gt;</span></span><br><span class="line"><span class="code">      &lt;span class=&quot;title&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="code">      &lt;span class=&quot;tips&quot;&gt;请输入密码以验证您的身份&lt;/span&gt;</span></span><br><span class="line"><span class="code">      &lt;input class=&quot;input-password&quot; type=&quot;password&quot; placeholder=&quot;密码&quot;&gt;</span></span><br><span class="line"><span class="code">    &lt;/div&gt;</span></span><br><span class="line"><span class="code">    &lt;div class=&quot;content-bottom&quot;&gt;</span></span><br><span class="line"><span class="code">      &lt;span class=&quot;btn close&quot; onclick=&quot;switchSecretInput()&quot;&gt;取消&lt;/span&gt;</span></span><br><span class="line"><span class="code">      &lt;span class=&quot;btn&quot; onclick=&quot;sendSubscribeInfo()&quot;&gt;确认&lt;/span&gt;</span></span><br><span class="line"><span class="code">    &lt;/div&gt;</span></span><br><span class="line"><span class="code">  &lt;/div&gt;</span></span><br><span class="line"><span class="code">  &lt;div class=&quot;noteBox hide&quot;&gt;</span></span><br><span class="line"><span class="code">    &lt;a class=&quot;icon&quot;&gt;</span></span><br><span class="line"><span class="code">      &lt;i class=&quot;fas fa-spinner fa-spin&quot;&gt;&lt;/i&gt;</span></span><br><span class="line"><span class="code">    &lt;/a&gt;</span></span><br><span class="line"><span class="code">    &lt;span class=&quot;tips&quot;&gt;请稍候 ...&lt;/span&gt;</span></span><br><span class="line"><span class="code">  &lt;/div&gt;</span></span><br><span class="line"><span class="code">  &lt;div class=&quot;inputBoxMask&quot;&gt;</span></span><br><span class="line"><span class="code">  &lt;/div&gt;</span></span><br><span class="line"><span class="code">&lt;/div&gt;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span></span><br><span class="line"><span class="code">    var fdataUser = &#123;</span></span><br><span class="line"><span class="code">      apiurl: &#x27;https://xxx.xxx.top/&#x27;</span></span><br><span class="line"><span class="code">    &#125;;</span></span><br><span class="line"><span class="code">    var article_index = &#x27;&#x27;,</span></span><br><span class="line"><span class="code">        article_title = &#x27;&#x27;,</span></span><br><span class="line"><span class="code">        article_link = &#x27;&#x27;,</span></span><br><span class="line"><span class="code">        article_author = &#x27;&#x27;,</span></span><br><span class="line"><span class="code">        article_avatar = &#x27;&#x27;,</span></span><br><span class="line"><span class="code">        article_time = &#x27;&#x27;,</span></span><br><span class="line"><span class="code">        article_pwd = &#x27;&#x27;;</span></span><br><span class="line"><span class="code">    var savedArticlesIndex = &#x27;&#x27;;</span></span><br><span class="line"><span class="code">    var catchNowTime = Date.now();</span></span><br><span class="line"><span class="code">    var updateTime = localStorage.getItem(&quot;updateTime&quot;);</span></span><br><span class="line"><span class="code">    updateTime == null || catchNowTime - updateTime &lt; 86400000 ? null : localStorage.removeItem(&quot;savedArticles&quot;);//每隔1天刷新一次</span></span><br><span class="line"><span class="code">    var savedArticles = localStorage.getItem(&quot;savedArticles&quot;);</span></span><br><span class="line"><span class="code">    if (savedArticles != null) &#123;</span></span><br><span class="line"><span class="code">        console.log(&quot;内存读取成功&quot;);</span></span><br><span class="line"><span class="code">        var savedArticlesJson = JSON.parse(savedArticles)</span></span><br><span class="line"><span class="code">        addArticleCard(savedArticlesJson);</span></span><br><span class="line"><span class="code">        savedArticlesIndex = savedArticlesJson.map(item =&gt; item.index);</span></span><br><span class="line"><span class="code">    &#125; else &#123;</span></span><br><span class="line"><span class="code">        fetch(&quot;https://xxx.xxx.top/getsavedtitles?mode=all&amp;column=&amp;value=&amp;output=jsonp&quot;)</span></span><br><span class="line"><span class="code">            .then(response =&gt; response.json())</span></span><br><span class="line"><span class="code">            .then(data =&gt; &#123;</span></span><br><span class="line"><span class="code">                if (data.code == 200) &#123;</span></span><br><span class="line"><span class="code">                    console.log(&#x27;获取收藏夹成功&#x27;);</span></span><br><span class="line"><span class="code">                    savedArticles = data.content;</span></span><br><span class="line"><span class="code">                    localStorage.setItem(&quot;updateTime&quot;, catchNowTime);</span></span><br><span class="line"><span class="code">                    localStorage.setItem(&quot;savedArticles&quot;, JSON.stringify(savedArticles));</span></span><br><span class="line"><span class="code">                    console.log(savedArticles);</span></span><br><span class="line"><span class="code">                    addArticleCard(savedArticles);</span></span><br><span class="line"><span class="code">                    savedArticlesIndex = savedArticles.map(item =&gt; item.index);</span></span><br><span class="line"><span class="code">                    console.log(savedArticlesIndex);</span></span><br><span class="line"><span class="code">                    checkStared(savedArticlesIndex);</span></span><br><span class="line"><span class="code">                &#125; else &#123;</span></span><br><span class="line"><span class="code">                    console.log(&#x27;获取收藏夹失败&#x27;)</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">            &#125;)</span></span><br><span class="line"><span class="code">            .catch(error =&gt; &#123;</span></span><br><span class="line"><span class="code">                console.error(&#x27;获取收藏夹失败&#x27;, error);</span></span><br><span class="line"><span class="code">            &#125;)</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">    function checkStared(s) &#123;</span></span><br><span class="line"><span class="code">        for (let i = 0; i &lt; s.length; i++) &#123;</span></span><br><span class="line"><span class="code">            var j = document.querySelector(&quot;#cf-container .&quot; + s[i] + &quot; .cf-star&quot;);</span></span><br><span class="line"><span class="code">            if (j) &#123;</span></span><br><span class="line"><span class="code">                j.classList.contains(&quot;saved&quot;) ? null : j.classList.add(&quot;saved&quot;);</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">    function addArticleCard(a) &#123;</span></span><br><span class="line"><span class="code">        var container = &#x27;&#x27;;</span></span><br><span class="line"><span class="code">        for (let i=0; i&lt;a.length; i++) &#123;</span></span><br><span class="line"><span class="code">            var item = a[i];</span></span><br><span class="line"><span class="code">            container += `</span></span><br><span class="line"><span class="code">            &lt;div class=&quot;cf-article $&#123;item.index&#125;&quot;&gt;</span></span><br><span class="line"><span class="code">                &lt;a class=&quot;cf-article-title&quot; href=&quot;$&#123;item.link&#125;&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot; data-title=&quot;$&#123;item.title&#125;&quot;&gt;$&#123;item.title&#125;&lt;/a&gt;</span></span><br><span class="line"><span class="code">                &lt;a class=&quot;cf-star saved&quot; onclick=&quot;switchSecretInput(event)&quot;&gt;&lt;i class=&quot;fa-regular fa-star&quot;&gt;&lt;/i&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="code">                &lt;div class=&quot;cf-article-avatar no-lightbox flink-item-icon&quot;&gt;</span></span><br><span class="line"><span class="code">                    &lt;img class=&quot;cf-img-avatar avatar&quot; src=&quot;$&#123;item.avatar&#125;&quot; alt=&quot;avatar&quot; onerror=&quot;this.src=&#x27;&#x27;; this.onerror = null;&quot;&gt;</span></span><br><span class="line"><span class="code">                    &lt;a class=&quot;&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot;&gt;&lt;span class=&quot;cf-article-author&quot;&gt;$&#123;item.author&#125;&lt;/span&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="code">                &lt;/div&gt;</span></span><br><span class="line"><span class="code">                &lt;span class=&quot;cf-article-time&quot;&gt;</span></span><br><span class="line"><span class="code">                    &lt;span class=&quot;cf-time-created&quot;&gt;$&#123;item.time&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="code">                &lt;/span&gt;</span></span><br><span class="line"><span class="code">            &lt;/div&gt;</span></span><br><span class="line"><span class="code">            `;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">        document.getElementById(&quot;cf-saved-post&quot;).insertAdjacentHTML(&#x27;beforeend&#x27;, container);</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">    function switchSecretInput(event) &#123;</span></span><br><span class="line"><span class="code">        const a = document.getElementById(&quot;fcircleInputBox&quot;);</span></span><br><span class="line"><span class="code">        const b = a.querySelector(&quot;.input-password&quot;);</span></span><br><span class="line"><span class="code">        const f = a.querySelector(&quot;.content-body .title&quot;);</span></span><br><span class="line"><span class="code">        function c(e) &#123; article_pwd = e.target.value; &#125;</span></span><br><span class="line"><span class="code">        if (a.classList.contains(&quot;open&quot;)) &#123;</span></span><br><span class="line"><span class="code">            a.classList.remove(&quot;open&quot;);</span></span><br><span class="line"><span class="code">            b.removeEventListener(&#x27;input&#x27;, c);</span></span><br><span class="line"><span class="code">            article_index = &#x27;&#x27;;</span></span><br><span class="line"><span class="code">            article_title = &#x27;&#x27;;</span></span><br><span class="line"><span class="code">            article_link = &#x27;&#x27;;</span></span><br><span class="line"><span class="code">            article_author = &#x27;&#x27;;</span></span><br><span class="line"><span class="code">            article_avatar = &#x27;&#x27;;</span></span><br><span class="line"><span class="code">            article_time = &#x27;&#x27;;</span></span><br><span class="line"><span class="code">        &#125; else &#123;</span></span><br><span class="line"><span class="code">            a.classList.add(&quot;open&quot;);</span></span><br><span class="line"><span class="code">            b.addEventListener(&#x27;input&#x27;, c);</span></span><br><span class="line"><span class="code">            var d = &#x27;&#x27;;</span></span><br><span class="line"><span class="code">            if (event.target.nodeName.toUpperCase() == &quot;A&quot;) &#123;</span></span><br><span class="line"><span class="code">                if (event.target.classList.contains(&quot;saved&quot;)) &#123;</span></span><br><span class="line"><span class="code">                    sendMode = 1;</span></span><br><span class="line"><span class="code">                    f.innerHTML = &quot;移出收藏&quot;;</span></span><br><span class="line"><span class="code">                &#125; else &#123;</span></span><br><span class="line"><span class="code">                    sendMode = 0;</span></span><br><span class="line"><span class="code">                    f.innerHTML = &quot;添加收藏&quot;;</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">                d = event.target.parentElement.querySelector(&quot;.cf-article-title&quot;);</span></span><br><span class="line"><span class="code">                article_author = event.target.parentElement.querySelector(&quot;.cf-article-avatar .cf-article-author&quot;).innerText;</span></span><br><span class="line"><span class="code">                article_avatar = event.target.parentElement.querySelector(&quot;.cf-article-avatar .cf-img-avatar&quot;).src;</span></span><br><span class="line"><span class="code">                article_time = event.target.parentElement.querySelector(&quot;.cf-article-time .cf-time-created&quot;).innerText;</span></span><br><span class="line"><span class="code">            &#125; else if (event.target.nodeName.toUpperCase() == &quot;I&quot;) &#123;</span></span><br><span class="line"><span class="code">                if (event.target.parentElement.classList.contains(&quot;saved&quot;)) &#123;</span></span><br><span class="line"><span class="code">                    sendMode = 1;</span></span><br><span class="line"><span class="code">                    f.innerHTML = &quot;移出收藏&quot;;</span></span><br><span class="line"><span class="code">                &#125; else &#123;</span></span><br><span class="line"><span class="code">                    sendMode = 0;</span></span><br><span class="line"><span class="code">                    f.innerHTML = &quot;添加收藏&quot;;</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">                d = event.target.parentElement.parentElement.querySelector(&quot;.cf-article-title&quot;);</span></span><br><span class="line"><span class="code">                article_author = event.target.parentElement.parentElement.querySelector(&quot;.cf-article-avatar .cf-article-author&quot;).innerText;</span></span><br><span class="line"><span class="code">                article_avatar = event.target.parentElement.parentElement.querySelector(&quot;.cf-article-avatar .cf-img-avatar&quot;).src;</span></span><br><span class="line"><span class="code">                article_time = event.target.parentElement.parentElement.querySelector(&quot;.cf-article-time .cf-time-created&quot;).innerText;</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code">            article_title = d.innerText;</span></span><br><span class="line"><span class="code">            article_link = d.getAttribute(&quot;href&quot;);</span></span><br><span class="line"><span class="code">            article_index = &quot;cf-&quot; + CryptoJS.MD5(article_link).toString();</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    &#125;,</span></span><br><span class="line"><span class="code">    function sendSubscribeInfo() &#123;</span></span><br><span class="line"><span class="code">        var key = CryptoJS.SHA256(article_pwd);</span></span><br><span class="line"><span class="code">        var url = sendMode == 1</span></span><br><span class="line"><span class="code">            ? &quot;https://xxx.xxx.top/delsavedtitles?key=&quot; + key + &quot;&amp;index=&quot; + article_index</span></span><br><span class="line"><span class="code">            : &quot;https://xxx.xxx.top/subscribe?key=&quot; + key + &quot;&amp;index=&quot; + article_index + &quot;&amp;title=&quot; + article_title + &quot;&amp;link=&quot; + article_link + &quot;&amp;author=&quot; + article_author + &quot;&amp;avatar=&quot; + article_avatar + &quot;&amp;time=&quot; + article_time;</span></span><br><span class="line"><span class="code">        var inputBox = document.querySelector(&quot;#fcircleInputBox .inputBox&quot;);</span></span><br><span class="line"><span class="code">        var noteBox = document.querySelector(&quot;#fcircleInputBox .noteBox&quot;);</span></span><br><span class="line"><span class="code">        inputBox.classList.add(&quot;hide&quot;);</span></span><br><span class="line"><span class="code">        noteBox.classList.remove(&quot;hide&quot;);</span></span><br><span class="line"><span class="code">        fetch(url)</span></span><br><span class="line"><span class="code">            .then(response =&gt; response.json())</span></span><br><span class="line"><span class="code">            .then(data =&gt; &#123;</span></span><br><span class="line"><span class="code">                if (data.code == 200) &#123;</span></span><br><span class="line"><span class="code">                    var a = document.querySelector(&quot;#cf-saved-post .&quot; + article_index);</span></span><br><span class="line"><span class="code">                    if (a) &#123; a.outerHTML = &quot;&quot;; &#125;</span></span><br><span class="line"><span class="code">                    var b = document.querySelector(&quot;.&quot; + article_index + &quot; .cf-star&quot;);</span></span><br><span class="line"><span class="code">                    if (typeof savedArticlesIndex != &#x27;undefined&#x27;) savedArticlesIndex = savedArticlesIndex.filter(element =&gt; element !== article_index);</span></span><br><span class="line"><span class="code">                    if (b) &#123;b.classList.contains(&quot;saved&quot;) ? b.classList.remove(&quot;saved&quot;) : b.classList.add(&quot;saved&quot;);&#125;</span></span><br><span class="line"><span class="code">                    if (sendMode == 0) &#123;</span></span><br><span class="line"><span class="code">                        var container = `</span></span><br><span class="line"><span class="code">                            &lt;div class=&quot;cf-article $&#123;article_index&#125;&quot;&gt;</span></span><br><span class="line"><span class="code">                                &lt;a class=&quot;cf-article-title&quot; href=&quot;$&#123;article_link&#125;&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot; data-title=&quot;$&#123;article_title&#125;&quot;&gt;$&#123;article_title&#125;&lt;/a&gt;</span></span><br><span class="line"><span class="code">                                &lt;a class=&quot;cf-star saved&quot; onclick=&quot;switchSecretInput(event)&quot;&gt;&lt;i class=&quot;fa-regular fa-star&quot;&gt;&lt;/i&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="code">                                &lt;div class=&quot;cf-article-avatar no-lightbox flink-item-icon&quot;&gt;</span></span><br><span class="line"><span class="code">                                    &lt;img class=&quot;cf-img-avatar avatar&quot; src=&quot;$&#123;article_avatar&#125;&quot; alt=&quot;avatar&quot; onerror=&quot;this.src=&#x27;&#x27;; this.onerror = null;&quot;&gt;</span></span><br><span class="line"><span class="code">                                    &lt;a class=&quot;&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot;&gt;&lt;span class=&quot;cf-article-author&quot;&gt;$&#123;article_author&#125;&lt;/span&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="code">                                &lt;/div&gt;</span></span><br><span class="line"><span class="code">                                &lt;span class=&quot;cf-article-time&quot;&gt;</span></span><br><span class="line"><span class="code">                                    &lt;span class=&quot;cf-time-created&quot;&gt;$&#123;article_time&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="code">                                &lt;/span&gt;</span></span><br><span class="line"><span class="code">                            &lt;/div&gt;</span></span><br><span class="line"><span class="code">                            `;</span></span><br><span class="line"><span class="code">                        document.getElementById(&quot;cf-saved-post&quot;).insertAdjacentHTML(&#x27;beforeend&#x27;, container);</span></span><br><span class="line"><span class="code">                    &#125;</span></span><br><span class="line"><span class="code">                    tools.showMessage(data.message, &quot;success&quot;, 2);</span></span><br><span class="line"><span class="code">                    localStorage.removeItem(&quot;savedArticles&quot;);</span></span><br><span class="line"><span class="code">                    inputBox.classList.remove(&quot;hide&quot;);</span></span><br><span class="line"><span class="code">                    noteBox.classList.add(&quot;hide&quot;);</span></span><br><span class="line"><span class="code">                    document.querySelector(&quot;#fcircleInputBox .btn.close&quot;).click();</span></span><br><span class="line"><span class="code">                &#125; else &#123;</span></span><br><span class="line"><span class="code">                    tools.showMessage(data.message, &quot;error&quot;, 2);</span></span><br><span class="line"><span class="code">                    inputBox.classList.remove(&quot;hide&quot;);</span></span><br><span class="line"><span class="code">                    noteBox.classList.add(&quot;hide&quot;);</span></span><br><span class="line"><span class="code">                    document.querySelector(&quot;#fcircleInputBox .btn.close&quot;).click();</span></span><br><span class="line"><span class="code">                &#125;</span></span><br><span class="line"><span class="code">            &#125;)</span></span><br><span class="line"><span class="code">            .catch(error =&gt; &#123;</span></span><br><span class="line"><span class="code">                console.error(&#x27;收藏失败:&#x27;, error);</span></span><br><span class="line"><span class="code">            &#125;)</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">    function foldSavedArticles(event) &#123;</span></span><br><span class="line"><span class="code">        var a = document.getElementById(&quot;cf-saved-post&quot;)</span></span><br><span class="line"><span class="code">        var b = event.target.parentElement.querySelector(&quot;i&quot;)</span></span><br><span class="line"><span class="code">        if (b.style.transform == &quot;rotate(180deg)&quot;) &#123;</span></span><br><span class="line"><span class="code">            a.style.maxHeight = &quot;240px&quot;</span></span><br><span class="line"><span class="code">            b.style.transform = &quot;&quot;</span></span><br><span class="line"><span class="code">        &#125; else &#123;</span></span><br><span class="line"><span class="code">            a.style.maxHeight = typeof savedArticlesIndex != &#x27;undefined&#x27; ? (savedArticlesIndex.length * 130 - 20) + &quot;px&quot; : &quot;fit-content&quot;</span></span><br><span class="line"><span class="code">            b.style.transform = &quot;rotate(180deg)&quot;</span></span><br><span class="line"><span class="code">        &#125;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">&lt;/script&gt;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/fcircle.css&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/crypto-js/4.1.1/crypto-js.min.js&quot;</span>&gt;</span></span></span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/fcircle.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><div class="note primary modern"><p>注意，友链头像的链接含有 &amp; 字符会产生干扰，建议采用图床存储头像图片，或者在上面代码中对 article_avatar 参数做 encodeURIComponent 和 decodeURIComponent 编解码处理。</p></div><div class="note primary modern"><p>另外，上面用到的 tools.showMessage 方法依赖于 ElementUI 库，如果你有自己的弹窗通知系统，可以将它替换掉，比如主题自带的 btf.snackbarShow。<br>如果你也要用 ElementUI 的弹窗，可以参照下面方法，更多用法参考文档：<a href="https://element.eleme.cn/#/zh-CN/component/message">ElementUI文档 - Message</a></p></div><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line"><span class="addition">+    - &lt;link rel=&quot;stylesheet&quot; href=&quot;https://npm.elemecdn.com/element-ui@2.15.6/lib/theme-chalk/index.css&quot;  media=&quot;defer&quot; onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+    - &lt;script async src=&quot;https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/vue/2.6.14/vue.min.js&quot;&gt;&lt;/script&gt; # 引入VUE</span></span><br><span class="line"><span class="addition">+    - &lt;script async src=&quot;https://npm.elemecdn.com/element-ui@2.15.6/lib/index.js&quot;&gt;&lt;/script&gt; # 引入ElementUI</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tools = &#123;</span><br><span class="line">    <span class="title function_">showMessage</span>(<span class="params">text, style, delay</span>) &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">            <span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.$message(&#123;</span><br><span class="line">                    <span class="attr">message</span>: text,</span><br><span class="line">                    <span class="attr">showClose</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">type</span>: style,</span><br><span class="line">                    <span class="attr">duration</span>: delay * <span class="number">1000</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="fcircle-js"><a href="#fcircle-js" class="headerlink" title="fcircle.js"></a>fcircle.js</h3><p>fcircle.js 的改动不多，主要是卡片 HTML 结构修改。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Last Modified time : 20220326 15:38 by https://immmmm.com</span></span><br><span class="line"><span class="comment">已适配 FriendCircle 公共库和主库</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//默认数据</span></span><br><span class="line"><span class="keyword">var</span> fdata = &#123;</span><br><span class="line">  <span class="attr">jsonurl</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">apiurl</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">apipublieurl</span>: <span class="string">&quot;https://fcircle-pub.rct.cool/&quot;</span>, <span class="comment">//默认公共库</span></span><br><span class="line">  <span class="attr">initnumber</span>: <span class="number">24</span>, <span class="comment">//首次加载文章数</span></span><br><span class="line">  <span class="attr">stepnumber</span>: <span class="number">12</span>, <span class="comment">//更多加载文章数</span></span><br><span class="line">  <span class="attr">article_sort</span>: <span class="string">&quot;created&quot;</span>, <span class="comment">//文章排序 updated or created</span></span><br><span class="line">  <span class="attr">error_img</span>: <span class="string">&quot;https://xxxxxxxxxxxxxx.webp&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//可通过 var fdataUser 替换默认值</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> fdataUser !== <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> fdataUser) &#123;</span><br><span class="line">    <span class="keyword">if</span> (fdataUser[key]) &#123;</span><br><span class="line">      fdata[key] = fdataUser[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> article_num = <span class="string">&quot;&quot;</span>,</span><br><span class="line">  sortNow = <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="title class_">UrlNow</span> = <span class="string">&quot;&quot;</span>,</span><br><span class="line">  friends_num = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> container =</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-container&quot;</span>) ||</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fcircleContainer&quot;</span>);</span><br><span class="line"><span class="comment">// 获取本地 排序值、加载apiUrl，实现记忆效果</span></span><br><span class="line"><span class="keyword">var</span> localSortNow = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;sortNow&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> localUrlNow = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;urlNow&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (localSortNow &amp;&amp; localUrlNow) &#123;</span><br><span class="line">  sortNow = localSortNow;</span><br><span class="line">  <span class="title class_">UrlNow</span> = localUrlNow;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  sortNow = fdata.<span class="property">article_sort</span>;</span><br><span class="line">  <span class="keyword">if</span> (fdata.<span class="property">jsonurl</span>) &#123;</span><br><span class="line">    <span class="title class_">UrlNow</span> = fdata.<span class="property">apipublieurl</span> + <span class="string">&quot;postjson?jsonlink=&quot;</span> + fdata.<span class="property">jsonurl</span> + <span class="string">&quot;&amp;&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fdata.<span class="property">apiurl</span>) &#123;</span><br><span class="line">    <span class="title class_">UrlNow</span> = fdata.<span class="property">apiurl</span> + <span class="string">&quot;all?&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title class_">UrlNow</span> = fdata.<span class="property">apipublieurl</span> + <span class="string">&quot;all?&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前模式：&quot;</span> + <span class="title class_">UrlNow</span>);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;urlNow&quot;</span>, <span class="title class_">UrlNow</span>);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;sortNow&quot;</span>, sortNow);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印基本信息</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadStatistical</span>(<span class="params">sdata</span>) &#123;</span><br><span class="line">  article_num = sdata.<span class="property">article_num</span>;</span><br><span class="line">  friends_num = sdata.<span class="property">friends_num</span>;</span><br><span class="line">  <span class="keyword">var</span> messageBoard = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div id=&quot;cf-state&quot; class=&quot;cf-new-add&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;cf-state-data&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;cf-data-friends&quot; onclick=&quot;openToShow()&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;span class=&quot;cf-label&quot;&gt;订阅&lt;/span&gt;</span></span><br><span class="line"><span class="string">          &lt;span class=&quot;cf-message&quot;&gt;<span class="subst">$&#123;sdata.friends_num&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;cf-data-active&quot; onclick=&quot;changeEgg()&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;span class=&quot;cf-label&quot;&gt;活跃&lt;/span&gt;</span></span><br><span class="line"><span class="string">          &lt;span class=&quot;cf-message&quot;&gt;<span class="subst">$&#123;sdata.active_num&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;cf-data-article&quot; onclick=&quot;clearLocal()&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;span class=&quot;cf-label&quot;&gt;日志&lt;/span&gt;</span></span><br><span class="line"><span class="string">          &lt;span class=&quot;cf-message&quot;&gt;<span class="subst">$&#123;sdata.article_num&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div id=&quot;cf-change&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;span id=&quot;cf-change-created&quot; data-sort=&quot;created&quot; onclick=&quot;changeSort(event)&quot; class=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">            sortNow == <span class="string">&quot;created&quot;</span> ? <span class="string">&quot;cf-change-now&quot;</span> : <span class="string">&quot;&quot;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">          &#125;</span>&quot;&gt;Created&lt;/span&gt; | &lt;span id=&quot;cf-change-updated&quot; data-sort=&quot;updated&quot; onclick=&quot;changeSort(event)&quot; class=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">    sortNow == <span class="string">&quot;updated&quot;</span> ? <span class="string">&quot;cf-change-now&quot;</span> : <span class="string">&quot;&quot;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">  &#125;</span>&quot; &gt;Updated&lt;/span&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  <span class="keyword">var</span> loadMoreBtn = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div id=&quot;cf-more&quot; class=&quot;cf-new-add&quot; onclick=&quot;loadNextArticle()&quot;&gt;&lt;i class=&quot;fas fa-angle-double-down&quot;&gt;&lt;/i&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div id=&quot;cf-footer&quot; class=&quot;cf-new-add&quot;&gt;</span></span><br><span class="line"><span class="string">       &lt;span id=&quot;cf-version-up&quot; onclick=&quot;checkVersion()&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">       &lt;span class=&quot;cf-data-lastupdated&quot;&gt;更新于：<span class="subst">$&#123;sdata.last_updated_time&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        Powered by &lt;a target=&quot;_blank&quot; href=&quot;https://github.com/Rock-Candy-Tea/hexo-circle-of-friends&quot; target=&quot;_blank&quot;&gt;FriendCircle&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;br&gt;</span></span><br><span class="line"><span class="string">        Designed by &lt;a target=&quot;_blank&quot; href=&quot;https://immmmm.com&quot; target=&quot;_blank&quot;&gt;林木木&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;br&gt;</span></span><br><span class="line"><span class="string">        Adapted by &lt;a target=&quot;_blank&quot; href=&quot;https://gavin-chen.top&quot; target=&quot;_blank&quot;&gt;南方嘉木&lt;/a&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div id=&quot;cf-overlay&quot; class=&quot;cf-new-add&quot; onclick=&quot;closeShow()&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div id=&quot;cf-overshow&quot; class=&quot;cf-new-add&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  <span class="keyword">if</span> (container) &#123;</span><br><span class="line">    container.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;beforebegin&quot;</span>, messageBoard);</span><br><span class="line">    container.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;afterend&quot;</span>, loadMoreBtn);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印文章内容 cf-article          &lt;span class=&quot;cf-article-floor&quot;&gt;$&#123;item.floor&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadArticleItem</span>(<span class="params">datalist, start, end</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> articleItem = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> articleNum = article_num;</span><br><span class="line">  <span class="keyword">var</span> endFor = end;</span><br><span class="line">  <span class="keyword">if</span> (end &gt; articleNum) &#123;</span><br><span class="line">    endFor = articleNum;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (start &lt; articleNum) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = start; i &lt; endFor; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> item = datalist[i];</span><br><span class="line">      <span class="keyword">var</span> id = <span class="string">&quot;cf-&quot;</span> + <span class="title class_">CryptoJS</span>.<span class="title class_">MD5</span>(item.<span class="property">link</span>).<span class="title function_">toString</span>();</span><br><span class="line">      articleItem += <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;cf-article <span class="subst">$&#123;id&#125;</span>&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;a class=&quot;cf-article-title&quot; href=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">              item.link</span></span></span><br><span class="line"><span class="subst"><span class="string">            &#125;</span>&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot; data-title=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">        item.title</span></span></span><br><span class="line"><span class="subst"><span class="string">      &#125;</span>&quot;&gt;<span class="subst">$&#123;item.title&#125;</span>&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a class=&quot;cf-star&quot; onclick=&quot;switchSecretInput(event)&quot;&gt;&lt;i class=&quot;fa-regular fa-star&quot;&gt;&lt;/i&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;cf-article-avatar no-lightbox flink-item-icon&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;img class=&quot;cf-img-avatar avatar&quot; src=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">                  item.avatar</span></span></span><br><span class="line"><span class="subst"><span class="string">                &#125;</span>&quot; alt=&quot;avatar&quot; onerror=&quot;this.src=&#x27;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">        fdata.error_img</span></span></span><br><span class="line"><span class="subst"><span class="string">      &#125;</span>&#x27;; this.onerror = null;&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;a onclick=&quot;openMeShow(event)&quot; data-link=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">                  item.link</span></span></span><br><span class="line"><span class="subst"><span class="string">                &#125;</span>&quot; class=&quot;&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot; href=&quot;javascript:;&quot;&gt;&lt;span class=&quot;cf-article-author&quot;&gt;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">        item.author</span></span></span><br><span class="line"><span class="subst"><span class="string">      &#125;</span>&lt;/span&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;span class=&quot;cf-article-time&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;span class=&quot;cf-time-created&quot; style=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">                  sortNow == <span class="string">&quot;created&quot;</span> ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;display:none&quot;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">                &#125;</span>&quot;&gt;<span class="subst">$&#123;item.created&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">                &lt;span class=&quot;cf-time-updated&quot; style=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">                  sortNow == <span class="string">&quot;updated&quot;</span> ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;display:none&quot;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">                &#125;</span>&quot;&gt;<span class="subst">$&#123;item.updated&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    container.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;beforeend&quot;</span>, articleItem);</span><br><span class="line">    <span class="keyword">if</span> (savedArticlesIndex != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="title function_">checkStared</span>(savedArticlesIndex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 预载下一页文章</span></span><br><span class="line">    <span class="title function_">fetchNextArticle</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 文章加载到底</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(</span><br><span class="line">      <span class="string">&quot;cf-more&quot;</span></span><br><span class="line">    ).<span class="property">outerHTML</span> = <span class="string">`&lt;div id=&quot;cf-more&quot; class=&quot;cf-new-add&quot; onclick=&quot;loadNoArticle()&quot;&gt;&lt;small&gt;一切皆有尽头！&lt;/small&gt;&lt;/div&gt;`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印个人卡片 cf-overshow</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadFcircleShow</span>(<span class="params">userinfo, articledata</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> showHtml = <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;cf-overshow&quot;&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&quot;cf-overshow-head&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;img class=&quot;cf-img-avatar avatar&quot; src=&quot;<span class="subst">$&#123;userinfo.avatar&#125;</span>&quot; alt=&quot;avatar&quot; onerror=&quot;this.src=&#x27;<span class="subst">$&#123;fdata.error_img&#125;</span>&#x27;; this.onerror = null;&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;a class=&quot;&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot; href=&quot;<span class="subst">$&#123;userinfo.link&#125;</span>&quot;&gt;<span class="subst">$&#123;userinfo.name&#125;</span>&lt;/a&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;div class=&quot;cf-overshow-content&quot;&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; userinfo.<span class="property">article_num</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> item = articledata[i];</span><br><span class="line">    showHtml += <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;p&gt;&lt;a class=&quot;cf-article-title&quot;  href=&quot;<span class="subst">$&#123;item.link&#125;</span>&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot; data-title=&quot;<span class="subst">$&#123;item.title&#125;</span>&quot;&gt;<span class="subst">$&#123;item.title&#125;</span>&lt;/a&gt;&lt;span&gt;<span class="subst">$&#123;item.created&#125;</span>&lt;/span&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  showHtml += <span class="string">&quot;&lt;/div&gt;&lt;/div&gt;&quot;</span>;</span><br><span class="line">  <span class="variable language_">document</span></span><br><span class="line">    .<span class="title function_">getElementById</span>(<span class="string">&quot;cf-overshow&quot;</span>)</span><br><span class="line">    .<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;beforeend&quot;</span>, showHtml);</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-overshow&quot;</span>).<span class="property">className</span> = <span class="string">&quot;cf-show-now&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 预载下一页文章，存为本地数据 nextArticle</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchNextArticle</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> start = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#cf-container .cf-article&quot;</span>).<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">var</span> end = start + fdata.<span class="property">stepnumber</span>;</span><br><span class="line">  <span class="keyword">var</span> articleNum = article_num;</span><br><span class="line">  <span class="keyword">if</span> (end &gt; articleNum) &#123;</span><br><span class="line">    end = articleNum;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (start &lt; articleNum) &#123;</span><br><span class="line">    <span class="title class_">UrlNow</span> = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;urlNow&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> fetchUrl =</span><br><span class="line">      <span class="title class_">UrlNow</span> + <span class="string">&quot;rule=&quot;</span> + sortNow + <span class="string">&quot;&amp;start=&quot;</span> + start + <span class="string">&quot;&amp;end=&quot;</span> + end;</span><br><span class="line">    <span class="comment">//console.log(fetchUrl)</span></span><br><span class="line">    <span class="title function_">fetch</span>(fetchUrl)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">json</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> nextArticle = <span class="built_in">eval</span>(json.<span class="property">article_data</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">          <span class="string">&quot;已预载&quot;</span> + <span class="string">&quot;?rule=&quot;</span> + sortNow + <span class="string">&quot;&amp;start=&quot;</span> + start + <span class="string">&quot;&amp;end=&quot;</span> + end</span><br><span class="line">        );</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;nextArticle&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(nextArticle));</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((start = articleNum)) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(</span><br><span class="line">      <span class="string">&quot;cf-more&quot;</span></span><br><span class="line">    ).<span class="property">outerHTML</span> = <span class="string">`&lt;div id=&quot;cf-more&quot; class=&quot;cf-new-add&quot; onclick=&quot;loadNoArticle()&quot;&gt;&lt;small&gt;一切皆有尽头！&lt;/small&gt;&lt;/div&gt;`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 显示下一页文章，从本地缓存 nextArticle 中获取          &lt;span class=&quot;cf-article-floor&quot;&gt;$&#123;item.floor&#125;&lt;/span&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadNextArticle</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> nextArticle = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;nextArticle&quot;</span>));</span><br><span class="line">  <span class="keyword">var</span> articleItem = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nextArticle.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> item = nextArticle[i];</span><br><span class="line">    <span class="keyword">var</span> id = <span class="string">&quot;cf-&quot;</span> + <span class="title class_">CryptoJS</span>.<span class="title class_">MD5</span>(item.<span class="property">link</span>).<span class="title function_">toString</span>();</span><br><span class="line">    articleItem += <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;cf-article <span class="subst">$&#123;id&#125;</span>&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;a class=&quot;cf-article-title&quot; href=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">              item.link</span></span></span><br><span class="line"><span class="subst"><span class="string">            &#125;</span>&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot; data-title=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">      item.title</span></span></span><br><span class="line"><span class="subst"><span class="string">    &#125;</span>&quot;&gt;<span class="subst">$&#123;item.title&#125;</span>&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a class=&quot;cf-star&quot; onclick=&quot;switchSecretInput(event)&quot;&gt;&lt;i class=&quot;fa-regular fa-star&quot;&gt;&lt;/i&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;cf-article-avatar no-lightbox flink-item-icon&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;img class=&quot;cf-img-avatar avatar&quot; src=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">                  item.avatar</span></span></span><br><span class="line"><span class="subst"><span class="string">                &#125;</span>&quot; alt=&quot;avatar&quot; onerror=&quot;this.src=&#x27;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">      fdata.error_img</span></span></span><br><span class="line"><span class="subst"><span class="string">    &#125;</span>&#x27;; this.onerror = null;&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;a onclick=&quot;openMeShow(event)&quot; data-link=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">                  item.link</span></span></span><br><span class="line"><span class="subst"><span class="string">                &#125;</span>&quot; class=&quot;&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot; href=&quot;javascript:;&quot;&gt;&lt;span class=&quot;cf-article-author&quot;&gt;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">      item.author</span></span></span><br><span class="line"><span class="subst"><span class="string">    &#125;</span>&lt;/span&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;span class=&quot;cf-article-time&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;span class=&quot;cf-time-created&quot; style=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">                  sortNow == <span class="string">&quot;created&quot;</span> ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;display:none&quot;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">                &#125;</span>&quot;&gt;<span class="subst">$&#123;item.created&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">                &lt;span class=&quot;cf-time-updated&quot; style=&quot;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">                  sortNow == <span class="string">&quot;updated&quot;</span> ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;display:none&quot;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">                &#125;</span>&quot;&gt;<span class="subst">$&#123;item.updated&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  container.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;beforeend&quot;</span>, articleItem);</span><br><span class="line">  <span class="keyword">if</span> (savedArticlesIndex != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="title function_">checkStared</span>(savedArticlesIndex);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 同时预载下一页文章</span></span><br><span class="line">  <span class="title function_">fetchNextArticle</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 没有更多文章</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadNoArticle</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> articleSortData = sortNow + <span class="string">&quot;ArticleData&quot;</span>;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(articleSortData);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;statisticalData&quot;</span>);</span><br><span class="line">  <span class="comment">//localStorage.removeItem(&quot;sortNow&quot;)</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-more&quot;</span>).<span class="title function_">remove</span>();</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;cf-state&quot;</span>).<span class="property">offsetTop</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 清空本地数据</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clearLocal</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;updatedArticleData&quot;</span>);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;createdArticleData&quot;</span>);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;nextArticle&quot;</span>);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;statisticalData&quot;</span>);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;sortNow&quot;</span>);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;urlNow&quot;</span>);</span><br><span class="line">  location.<span class="title function_">reload</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkVersion</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> url = fdata.<span class="property">apiurl</span> + <span class="string">&quot;version&quot;</span>;</span><br><span class="line">  <span class="title function_">fetch</span>(url)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">json</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(json);</span><br><span class="line">      <span class="keyword">var</span> nowStatus = json.<span class="property">status</span>,</span><br><span class="line">        nowVersion = json.<span class="property">current_version</span>,</span><br><span class="line">        newVersion = json.<span class="property">latest_version</span>;</span><br><span class="line">      <span class="keyword">var</span> versionID = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-version-up&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> (nowStatus == <span class="number">0</span>) &#123;</span><br><span class="line">        versionID.<span class="property">innerHTML</span> = <span class="string">&quot;当前版本：v&quot;</span> + nowVersion;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nowStatus == <span class="number">1</span>) &#123;</span><br><span class="line">        versionID.<span class="property">innerHTML</span> = <span class="string">&quot;发现新版本：v&quot;</span> + nowVersion + <span class="string">&quot; ↦ &quot;</span> + newVersion;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        versionID.<span class="property">innerHTML</span> = <span class="string">&quot;网络错误，检测失败！&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 切换为公共全库</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeEgg</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//有自定义json或api执行切换</span></span><br><span class="line">  <span class="keyword">if</span> (fdata.<span class="property">jsonurl</span> || fdata.<span class="property">apiurl</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.cf-new-add&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> el.<span class="title function_">remove</span>());</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;updatedArticleData&quot;</span>);</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;createdArticleData&quot;</span>);</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;nextArticle&quot;</span>);</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;statisticalData&quot;</span>);</span><br><span class="line">    container.<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="title class_">UrlNow</span> = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;urlNow&quot;</span>);</span><br><span class="line">    <span class="comment">//console.log(&quot;新&quot;+UrlNow)</span></span><br><span class="line">    <span class="keyword">var</span> <span class="title class_">UrlNowPublic</span> = fdata.<span class="property">apipublieurl</span> + <span class="string">&quot;all?&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">UrlNow</span> !== <span class="title class_">UrlNowPublic</span>) &#123;</span><br><span class="line">      <span class="comment">//非完整默认公开库</span></span><br><span class="line">      changeUrl = fdata.<span class="property">apipublieurl</span> + <span class="string">&quot;all?&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (fdata.<span class="property">jsonurl</span>) &#123;</span><br><span class="line">        changeUrl =</span><br><span class="line">          fdata.<span class="property">apipublieurl</span> + <span class="string">&quot;postjson?jsonlink=&quot;</span> + fdata.<span class="property">jsonurl</span> + <span class="string">&quot;&amp;&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fdata.<span class="property">apiurl</span>) &#123;</span><br><span class="line">        changeUrl = fdata.<span class="property">apiurl</span> + <span class="string">&quot;all?&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;urlNow&quot;</span>, changeUrl);</span><br><span class="line">    <span class="title class_">FetchFriendCircle</span>(sortNow, changeUrl);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">clearLocal</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 首次加载文章</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">FetchFriendCircle</span>(<span class="params">sortNow, changeUrl</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> end = fdata.<span class="property">initnumber</span>;</span><br><span class="line">  <span class="keyword">var</span> fetchUrl = <span class="title class_">UrlNow</span> + <span class="string">&quot;rule=&quot;</span> + sortNow + <span class="string">&quot;&amp;start=0&amp;end=&quot;</span> + end;</span><br><span class="line">  <span class="keyword">if</span> (changeUrl) &#123;</span><br><span class="line">    fetchUrl = changeUrl + <span class="string">&quot;rule=&quot;</span> + sortNow + <span class="string">&quot;&amp;start=0&amp;end=&quot;</span> + end;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//console.log(fetchUrl)</span></span><br><span class="line">  <span class="title function_">fetch</span>(fetchUrl)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">json</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> statisticalData = json.<span class="property">statistical_data</span>;</span><br><span class="line">      <span class="keyword">var</span> articleData = <span class="built_in">eval</span>(json.<span class="property">article_data</span>);</span><br><span class="line">      <span class="keyword">var</span> articleSortData = sortNow + <span class="string">&quot;ArticleData&quot;</span>;</span><br><span class="line">      <span class="title function_">loadStatistical</span>(statisticalData);</span><br><span class="line">      <span class="title function_">loadArticleItem</span>(articleData, <span class="number">0</span>, end);</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;statisticalData&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(statisticalData));</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(articleSortData, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(articleData));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 点击切换排序</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeSort</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  sortNow = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">sort</span>;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;sortNow&quot;</span>, sortNow);</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.cf-new-add&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> el.<span class="title function_">remove</span>());</span><br><span class="line">  container.<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  changeUrl = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;urlNow&quot;</span>);</span><br><span class="line">  <span class="comment">//console.log(changeUrl)</span></span><br><span class="line">  <span class="title function_">initFriendCircle</span>(sortNow, changeUrl);</span><br><span class="line">  <span class="keyword">if</span> (fdata.<span class="property">apiurl</span>) &#123;</span><br><span class="line">    <span class="title function_">checkVersion</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//查询个人文章列表</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">openMeShow</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  event.<span class="title function_">preventDefault</span>();</span><br><span class="line">  <span class="keyword">var</span> parse_url =</span><br><span class="line">    <span class="regexp">/^(?:([A-Za-z]+):)?(\/&#123;0,3&#125;)([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/</span>;</span><br><span class="line">  <span class="keyword">var</span> meLink = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">link</span>.<span class="title function_">replace</span>(parse_url, <span class="string">&quot;$1:$2$3&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(meLink);</span><br><span class="line">  <span class="keyword">var</span> fetchUrl = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (fdata.<span class="property">apiurl</span>) &#123;</span><br><span class="line">    fetchUrl = fdata.<span class="property">apiurl</span> + <span class="string">&quot;post?num=5&amp;link=&quot;</span> + meLink;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fetchUrl = fdata.<span class="property">apipublieurl</span> + <span class="string">&quot;post?num=5&amp;link=&quot;</span> + meLink;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//console.log(fetchUrl)</span></span><br><span class="line">  <span class="keyword">if</span> (noClick == <span class="string">&quot;ok&quot;</span>) &#123;</span><br><span class="line">    noClick = <span class="string">&quot;no&quot;</span>;</span><br><span class="line">    <span class="title function_">fetchShow</span>(fetchUrl);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 关闭 show</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">closeShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-overlay&quot;</span>).<span class="property">className</span> -= <span class="string">&quot;cf-show-now&quot;</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-overshow&quot;</span>).<span class="property">className</span> -= <span class="string">&quot;cf-show-now&quot;</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-overshow&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 点击开往</span></span><br><span class="line"><span class="keyword">var</span> noClick = <span class="string">&quot;ok&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">openToShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> fetchUrl = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (fdata.<span class="property">apiurl</span>) &#123;</span><br><span class="line">    fetchUrl = fdata.<span class="property">apiurl</span> + <span class="string">&quot;post&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    fetchUrl = fdata.<span class="property">apipublieurl</span> + <span class="string">&quot;post&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//console.log(fetchUrl)</span></span><br><span class="line">  <span class="keyword">if</span> (noClick == <span class="string">&quot;ok&quot;</span>) &#123;</span><br><span class="line">    noClick = <span class="string">&quot;no&quot;</span>;</span><br><span class="line">    <span class="title function_">fetchShow</span>(fetchUrl);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 展示个人文章列表</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchShow</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> closeHtml = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;cf-overshow-close&quot; onclick=&quot;closeShow()&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-overlay&quot;</span>).<span class="property">className</span> = <span class="string">&quot;cf-show-now&quot;</span>;</span><br><span class="line">  <span class="variable language_">document</span></span><br><span class="line">    .<span class="title function_">getElementById</span>(<span class="string">&quot;cf-overshow&quot;</span>)</span><br><span class="line">    .<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;afterbegin&quot;</span>, closeHtml);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;开往&quot;</span> + url);</span><br><span class="line">  <span class="title function_">fetch</span>(url)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">json</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//console.log(json)</span></span><br><span class="line">      noClick = <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">      <span class="keyword">var</span> statisticalData = json.<span class="property">statistical_data</span>;</span><br><span class="line">      <span class="keyword">var</span> articleData = <span class="built_in">eval</span>(json.<span class="property">article_data</span>);</span><br><span class="line">      <span class="title function_">loadFcircleShow</span>(statisticalData, articleData);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 初始化方法，如有本地数据首先调用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">initFriendCircle</span>(<span class="params">sortNow, changeUrl</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> articleSortData = sortNow + <span class="string">&quot;ArticleData&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> localStatisticalData = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;statisticalData&quot;</span>)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">var</span> localArticleData = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(articleSortData));</span><br><span class="line">  container.<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (localStatisticalData &amp;&amp; localArticleData) &#123;</span><br><span class="line">    <span class="title function_">loadStatistical</span>(localStatisticalData);</span><br><span class="line">    <span class="title function_">loadArticleItem</span>(localArticleData, <span class="number">0</span>, fdata.<span class="property">initnumber</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;本地数据加载成功&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> fetchUrl =</span><br><span class="line">      <span class="title class_">UrlNow</span> + <span class="string">&quot;rule=&quot;</span> + sortNow + <span class="string">&quot;&amp;start=0&amp;end=&quot;</span> + fdata.<span class="property">initnumber</span>;</span><br><span class="line">    <span class="title function_">fetch</span>(fetchUrl)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">json</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> statisticalData = json.<span class="property">statistical_data</span>;</span><br><span class="line">        <span class="keyword">var</span> articleData = <span class="built_in">eval</span>(json.<span class="property">article_data</span>);</span><br><span class="line">        <span class="comment">//获取文章总数与第一篇文章标题</span></span><br><span class="line">        <span class="keyword">var</span> localSnum = localStatisticalData.<span class="property">article_num</span>;</span><br><span class="line">        <span class="keyword">var</span> newSnum = statisticalData.<span class="property">article_num</span>;</span><br><span class="line">        <span class="keyword">var</span> localAtile = localArticleData[<span class="number">0</span>].<span class="property">title</span>;</span><br><span class="line">        <span class="keyword">var</span> newAtile = articleData[<span class="number">0</span>].<span class="property">title</span>;</span><br><span class="line">        <span class="comment">//判断文章总数或文章标题是否一致，否则热更新</span></span><br><span class="line">        <span class="keyword">if</span> (localSnum !== newSnum || localAtile !== newAtile) &#123;</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-state&quot;</span>).<span class="title function_">remove</span>();</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-more&quot;</span>).<span class="title function_">remove</span>();</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cf-footer&quot;</span>).<span class="title function_">remove</span>();</span><br><span class="line">          container.<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">          <span class="keyword">var</span> articleSortData = sortNow + <span class="string">&quot;ArticleData&quot;</span>;</span><br><span class="line">          <span class="title function_">loadStatistical</span>(statisticalData);</span><br><span class="line">          <span class="title function_">loadArticleItem</span>(articleData, <span class="number">0</span>, fdata.<span class="property">initnumber</span>);</span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(</span><br><span class="line">            <span class="string">&quot;statisticalData&quot;</span>,</span><br><span class="line">            <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(statisticalData)</span><br><span class="line">          );</span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(articleSortData, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(articleData));</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;热更新完成&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;API数据未更新&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title class_">FetchFriendCircle</span>(sortNow, changeUrl);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;第一次加载完成&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 执行初始化</span></span><br><span class="line"><span class="title function_">initFriendCircle</span>(sortNow);</span><br></pre></td></tr></table></figure><p>CSS 样式部分比较冗杂，可自行 F12 获取。</p>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
            <tag> node.js </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于博客页码模块的设计</title>
      <link href="/post/241391f0.html"/>
      <url>/post/241391f0.html</url>
      
        <content type="html"><![CDATA[<p>之前看大家都增加了页码跳转功能，觉得很实用，就抄了过来，顺带把页码的样式整个优化了一下。以前的页码样式一直是butterfly默认的，当时文章少，页码就一个，所以也没觉得不适，但如果后面页数多了，肯定会导致手机端显示错位的问题。就像这样：</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308301955073.webp" alt="旧款页码"></p><p>所以重新设计一个页码样式是很有必要的。</p><p>首先看一下别人的优秀设计。第一个是 <a href="https://blog.zhheo.com">@张洪</a> 的博客，洪哥不愧是设计大佬，交互动画和细节处理都是我友链的博客里做的最好的。下图为电脑端的页码样式，该有的功能基本上都有，“上一页”、“下一页”和页码跳转这三个按钮单独设计了优美的交互动画。页码跳转基本结构是一个输入框加一个确认按钮，洪哥将确认按钮覆盖在输入框上方，巧妙的将它们整合成了一个模块，只有当光标移动到模块上方时，输入框才会展开，这样设计既美观又节省了空间。另外，页码跳转功能的逻辑设计考虑的很周全，只支持输入有效范围内的整数，对于超出范围的数会强制转换为最大值，而对于自然数以外的其它字符，则无法输入。输入完页码后，可以通过确认按钮完成跳转，也可以通过回车键完成跳转。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308302009407.webp" alt="HEO的页码样式（电脑端）"></p><p>至于手机端的适配，洪哥选择的方案是舍去低频的部件，只保留高频的“上一页”和“下一页”按钮，避免了手机端显示过于臃肿的现象，使得整体效果更加美观。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308302034681.webp" alt="HEO的页码样式（手机端）"></p><p>第二个是 <a href="https://www.qcqx.cn">@轻笑</a> 的博客，他的手机端和电脑端样式基本一样，都支持页码跳转，因为取消了“上一页”和“下一页”按钮，且缩小了按钮尺寸，所以也不会出现错位的现象，不失为一种好方案。在页码跳转的逻辑功能方面，只支持通过点击跳转按钮完成跳转，不支持回车键跳转，另外对于超出有效范围的页码也没有进行强制转换（实际逻辑上是强制跳转到最后一页，只是前端显示没有做限制）。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308302039884.webp" alt="轻笑的页码样式"></p><p>最后看的是 <a href="https://blog.leonus.cn">@Leonus</a> 的博客，他的整体样式跟洪哥差不多，逻辑功能也一样，但砍掉了“上一页”、“下一页”和页码跳转三个按钮的交互动画，砍掉了页码跳转的确认按钮，只保留了回车键跳转，这样整体看起来简洁很多，也更契合他的主题。移动端的适配也是采取的跟洪哥一样的方案，只保留“上一页”和“下一页”按钮。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308302200910.webp" alt="Leonus的页码样式"></p><p>综合考虑下来决定采用 Leonus 的方案，毕竟我的博客主题也是跟他的更契合。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308302110040.webp" alt="新版本页码样式（电脑端）"></p><p>电脑端的样式跟 Leonus 的一样，但手机端我还是希望保留页码跳转等功能，所以我在 Leonus 结构的基础上稍微做了下调整，在仅增加一个按钮的情况下，使其既保留了页码跳转的功能，又保留了当前页码显示功能。另外，不仅主页文章列表，分类页、标签页和归档页等页面也做了同样的适配。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308302117244.webp" alt="新版本页码样式（手机端）"></p><p>首先通过<code>order</code>属性将页码输入框移至中间显示，然后通过 js 读取当前页码使其通过页码输入框的<code>placeholder</code>显示出来，这样，就使其同时具备了页码显示和页码跳转的功能。</p><h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>首先pagination.pug部分，将页面跳转模块应用到全部，大概在第32行的位置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">else</span><br><span class="line">  nav#pagination</span><br><span class="line">    .pagination</span><br><span class="line">      if is_home()</span><br><span class="line">        - options.format = &#x27;page/%d/#content-inner&#x27;</span><br><span class="line">        //- 如果是一图流，可以把#content-inner删了</span><br><span class="line">      !=paginator(options)</span><br><span class="line">      input.toPageInput(placeholder=&quot;Go&quot; oninput=&quot;value=value.replace(/[^0-9]/g,&#x27;&#x27;)&quot; maxlength=&quot;3&quot;)</span><br></pre></td></tr></table></figure><p>在逻辑代码部分，由于洪哥他们仅支持主页文章列表的页码跳转，并没有对分类页、标签页和归档页的页码做适配，所以这里对原 js 代码做了改进。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ctrl = &#123;</span><br><span class="line">    <span class="title function_">toPageJump</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> e = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#pagination input.toPageInput&quot;</span>);</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">k</span>(<span class="params">v</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> p = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span>, <span class="comment">// 获取当前网页相对路径</span></span><br><span class="line">                i = [],</span><br><span class="line">                c = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> ((c = p.<span class="title function_">indexOf</span>(<span class="string">&#x27;/&#x27;</span>, c + <span class="number">1</span>)) !== -<span class="number">1</span>) i.<span class="title function_">push</span>(c) <span class="comment">// i是所有/的索引</span></span><br><span class="line">            <span class="keyword">var</span> l = i.<span class="property">length</span></span><br><span class="line">            <span class="keyword">if</span> (l == <span class="number">1</span> || p.<span class="title function_">substring</span>(<span class="number">1</span>, i[l-<span class="number">2</span>]) == <span class="string">&quot;page&quot;</span>) <span class="keyword">return</span> [<span class="string">&quot;/#content-inner&quot;</span>, <span class="string">`/page/<span class="subst">$&#123;v&#125;</span>/#content-inner`</span>]</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (l &gt;= <span class="number">4</span> &amp;&amp; p.<span class="title function_">substring</span>(i[l-<span class="number">3</span>]+<span class="number">1</span>, i[l-<span class="number">2</span>]) == <span class="string">&quot;page&quot;</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> j = p.<span class="title function_">substring</span>(<span class="number">0</span>, i[l-<span class="number">3</span>]+<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> [<span class="string">`<span class="subst">$&#123;j&#125;</span>`</span>, <span class="string">`<span class="subst">$&#123;j&#125;</span>page/<span class="subst">$&#123;v&#125;</span>/`</span>]</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">return</span> [<span class="string">`<span class="subst">$&#123;p&#125;</span>`</span>, <span class="string">`<span class="subst">$&#123;p&#125;</span>page/<span class="subst">$&#123;v&#125;</span>/`</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        e &amp;&amp; (e.<span class="title function_">addEventListener</span>(<span class="string">&quot;input&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> t = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.page-number&quot;</span>)</span><br><span class="line">                , n = t[t.<span class="property">length</span> - <span class="number">1</span>].<span class="property">innerHTML</span>;</span><br><span class="line">            <span class="title class_">Number</span>(e.<span class="property">value</span>) &gt; n &amp;&amp; (e.<span class="property">value</span> = n),</span><br><span class="line">                <span class="title class_">Number</span>(e.<span class="property">value</span>) &lt; <span class="number">1</span> &amp;&amp; (e.<span class="property">value</span> = <span class="string">&quot;&quot;</span>)</span><br><span class="line">        &#125;),</span><br><span class="line">            e.<span class="title function_">addEventListener</span>(<span class="string">&quot;keyup&quot;</span>, <span class="function"><span class="params">t</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="string">&quot;Enter&quot;</span> == t.<span class="property">key</span> &amp;&amp; <span class="string">&quot;&quot;</span> != e.<span class="property">value</span> &amp;&amp; <span class="string">&quot;0&quot;</span> != e.<span class="property">value</span> &amp;&amp; pjax.<span class="title function_">loadUrl</span>(<span class="string">&quot;1&quot;</span> == e.<span class="property">value</span> ? <span class="title function_">k</span>(e.<span class="property">value</span>)[<span class="number">0</span>] : <span class="title function_">k</span>(e.<span class="property">value</span>)[<span class="number">1</span>])</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getCurrentPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">innerWidth</span> &lt;= <span class="number">768</span> &amp;&amp; (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#body-wrap.page.home&quot;</span>) || <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tag&quot;</span>) || <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;category&quot;</span>) || <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;archive&quot;</span>))) &#123;</span><br><span class="line">            <span class="keyword">var</span> c = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.pagination .page-number.current&quot;</span>).<span class="property">innerHTML</span>;</span><br><span class="line">            <span class="keyword">if</span> (c) &#123;</span><br><span class="line">                <span class="keyword">var</span> t = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.pagination .toPageInput&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (t) &#123;</span><br><span class="line">                    t.<span class="property">placeholder</span> = <span class="string">&quot;第 &quot;</span> + c + <span class="string">&quot; 页&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>常用的<code>window.location</code>属性：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>);      <span class="comment">// 获取完整的 URL 地址</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">protocol</span>);  <span class="comment">// 获取协议部分（如 &quot;http:&quot; 或 &quot;https:&quot;）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">host</span>);      <span class="comment">// 获取主机部分（包括域名和端口号）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hostname</span>);  <span class="comment">// 获取主机名部分（不包括端口号）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">port</span>);      <span class="comment">// 获取端口号部分</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span>);  <span class="comment">// 获取路径部分</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>);    <span class="comment">// 获取查询字符串部分</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>);      <span class="comment">// 获取 URL 锚点部分</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字电子技术基础（4）——触发器</title>
      <link href="/post/603cec67.html"/>
      <url>/post/603cec67.html</url>
      
        <content type="html"><![CDATA[<p>数字系统中常用触发器作为存储单元，它是构成时序逻辑电路的基本逻辑器件，根据逻辑功能的不同，触发器可分为 RS 触发器、D 触发器、JK 触发器、T 触发器和 T&#39;触发器等。根据结构形式不同，又可分为基本 RS 触发器、同步触发器、主从触发器和边沿触发器等。</p><h2 id="SR-锁存器"><a href="#SR-锁存器" class="headerlink" title="SR 锁存器"></a>SR 锁存器</h2><p>SR 锁存器，有的教材也叫基本 RS 触发器，有与非门构成的也有或非门构成的。</p><ul><li>或非门构成的 SR 锁存器</li></ul><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181548885.webp" alt="电路结构与图形符号"></p><div class="table-container"><table><thead><tr><th style="text-align:center"><script type="math/tex">S_D</script></th><th style="text-align:center"><script type="math/tex">R_D</script></th><th style="text-align:center"><script type="math/tex">Q^*</script></th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">Q</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">Q=Q&#39;=0</td></tr></tbody></table></div><div class="note primary no-icon flat"><p>[<span class='p blue'>注</span>]: 当<script type="math/tex">S_D</script>和<script type="math/tex">R_D</script>同时由 1 变为 0 ，<script type="math/tex">Q^*</script>状态不定</p></div><div class="note info modern"><p>状态方程：</p><script type="math/tex; mode=display">Q^*=S+\overline{R}Q \\SR=0</script></div><ul><li>与非门构成的 SR 锁存器</li></ul><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181623497.webp" alt="电路结构与图形符号"></p><div class="table-container"><table><thead><tr><th style="text-align:center"><script type="math/tex">S_D'</script></th><th style="text-align:center"><script type="math/tex">R_D'</script></th><th style="text-align:center"><script type="math/tex">Q^*</script></th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">Q</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">Q=Q&#39;=1</td></tr></tbody></table></div><div class="note primary no-icon flat"><p>[<span class='p blue'>注</span>]: 当<script type="math/tex">S_D</script>和<script type="math/tex">R_D</script>同时由 0 变为 1 ，<script type="math/tex">Q^*</script>状态不定</p></div><div class="note info modern"><p>状态方程：</p><script type="math/tex; mode=display">Q^*=S+\overline{R}Q \\\overline{S}+\overline{R}=1</script></div><p>状态不定部分的波形图可以用阴影部分代替。</p><h2 id="同步触发器"><a href="#同步触发器" class="headerlink" title="同步触发器"></a>同步触发器</h2><p>SR 锁存器的状态直接受输入信号控制，而一般将有时钟信号控制的锁存器叫做触发器。</p><div class="note primary modern"><p>同步 = 电平触发</p></div><div class="note primary modern"><p>电平触发，即电平为 1 期间，输入信号每次变化都将引起输出变化，发生多次翻转，这种现象也称<code>空翻</code>现象。所以这种器件的抗干扰能力还是比较低。</p></div><h3 id="同步-RS-触发器"><a href="#同步-RS-触发器" class="headerlink" title="同步 RS 触发器"></a>同步 RS 触发器</h3><p>同步触发器即由电平触发的触发器，所以有的教材也称同步 RS 触发器为电平触发 SR 触发器或门控 SR 锁存器。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181720130.webp" alt="同步RS触发器"></p><div class="table-container"><table><thead><tr><th style="text-align:center">S</th><th style="text-align:center">R</th><th style="text-align:center"><script type="math/tex">Q^*</script></th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">Q</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">Q=Q&#39;=1</td></tr></tbody></table></div><div class="note primary no-icon flat"><p>[<span class='p blue'>注</span>]: 当<script type="math/tex">S_D</script>和<script type="math/tex">R_D</script>同时由 1 变为 0 ，<script type="math/tex">Q^*</script>状态不定</p></div><div class="note info modern"><p>状态方程：</p><script type="math/tex; mode=display">Q^*=S+\overline{R}Q \\RS=0</script></div><p>还有一种具有异步置 1 和置 0 功能的同步 RS 触发器，当有置数信号的时候，无论时钟信号如何，触发器将立即置数，所以有个下标 D，也称直接置数。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181739299.webp" alt="具有异步置1和置0功能的同步 RS 触发器"></p><h3 id="同步-D-触发器"><a href="#同步-D-触发器" class="headerlink" title="同步 D 触发器"></a>同步 D 触发器</h3><p>将同步 RS 触发器的 S 端和 R 端用非门连接在一起，形成新的 D 端，那么这就变成了同步 D 触发器。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181742966.webp" alt="同步D触发器"></p><div class="table-container"><table><thead><tr><th style="text-align:center">D</th><th style="text-align:center"><script type="math/tex">Q^*</script></th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">1</td></tr></tbody></table></div><div class="note info modern"><p>状态方程：</p><script type="math/tex; mode=display">Q^*=D</script></div><h3 id="同步-JK-触发器"><a href="#同步-JK-触发器" class="headerlink" title="同步 JK 触发器"></a>同步 JK 触发器</h3><p>将同步 RS 触发器的 Q&#39;端接到 S 端与非门的输入，Q 端接到 R 端与非门的输入，原来的 S 端变成 J 端，原来的 R 端变成 K 端，那么这就变成了同步 JK 触发器。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181751534.webp" alt="同步 JK 触发器"></p><div class="table-container"><table><thead><tr><th style="text-align:center">J</th><th style="text-align:center">K</th><th style="text-align:center"><script type="math/tex">Q^*</script></th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">0</td><td style="text-align:center">Q</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center"><script type="math/tex">\overline{Q}</script></td></tr></tbody></table></div><div class="note info modern"><p>状态方程：</p><script type="math/tex; mode=display">Q^*=J\overline{Q}+\overline{K}Q</script></div><h3 id="同步-T-触发器"><a href="#同步-T-触发器" class="headerlink" title="同步 T 触发器"></a>同步 T 触发器</h3><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181813260.webp" alt="同步 T 触发器"></p><div class="table-container"><table><thead><tr><th style="text-align:center">T</th><th style="text-align:center"><script type="math/tex">Q^*</script></th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">Q</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center"><script type="math/tex">\overline{Q}</script></td></tr></tbody></table></div><div class="note info modern"><p>状态方程：</p><script type="math/tex; mode=display">Q^* = T\overline{Q}+\overline{T}Q = T \oplus Q</script></div><h2 id="主从触发器"><a href="#主从触发器" class="headerlink" title="主从触发器"></a>主从触发器</h2><div class="note primary modern"><p>主从 = 脉冲触发</p></div><h3 id="主从-RS-触发器"><a href="#主从-RS-触发器" class="headerlink" title="主从 RS 触发器"></a>主从 RS 触发器</h3><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181949178.webp" alt="主从 RS 触发器"></p><p>主从 RS 触发器的逻辑功能与同步 RS 触发器一致，故功能表、状态方程略。</p><div class="note primary modern"><p>主从 RS 触发器克服了 CP=1 期间触发器输出状态可能多次翻转，即“空翻”的问题。但同时还是受 RS = 0 条件的约束。</p></div><p>在绘制波形图时，注意要先绘制主触发器的输出波形<script type="math/tex">Q_主</script>，然后再绘制最终输出波形Q，一般来说，Q与<script type="math/tex">Q_主</script>相似且比<script type="math/tex">Q_主</script>晚半个时钟周期。例如下图：</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308182029874.webp" alt=""></p><h3 id="主从-JK-触发器"><a href="#主从-JK-触发器" class="headerlink" title="主从 JK 触发器"></a>主从 JK 触发器</h3><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308182012403.webp" alt="主从 JK 触发器"></p><p>主从 JK 触发器也是在主从 RS 触发器的基础上引入 Q 和 Q&#39;两条反馈线转变而来。主从 JK 触发器的逻辑功能与同步 JK 触发器一致，故功能表、状态方程略。</p><div class="note primary modern"><p>与主从 RS 触发器一样，主从 JK 触发器同样可以防止触发器在 CP 作用期间可能发生多次翻转的现象，即不会出现空翻现象。</p><p>但它同时却出现了新的<code>一次翻转</code>现象。即在 CP = 1 期间,无论 J、K 变化多少次,只要其变化引起主触发器翻转了一次，在此 CP = 1 期间就不再变化了。这时，对应于 CP 下降沿的从触发器状态就既不由 CP 下降沿前的 JK 状态决定,也不由 CP 上升沿前的 J、K 状态决定，而是由引起主触发器这次变化的 J、K 状态所决定。因此，在时钟脉冲下降沿到达时，触发器接收这一时刻主触发器的状态，并发生状态转移。状态转移的结果就有可能与 JK 触发器的状态方程描述的转移结果不一致。</p></div><p>在绘制波形图时，一定要注意“一次翻转”特性，可以先（也可以不）绘制主触发器的输出波形<script type="math/tex">Q_主</script>，然后再绘制最终输出波形Q，这里，Q和<script type="math/tex">Q_主</script>就不一定相似了。例如下图：</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308182029598.webp" alt=""></p><h2 id="边沿触发器"><a href="#边沿触发器" class="headerlink" title="边沿触发器"></a>边沿触发器</h2><p>边沿触发器的输出仅在上升沿或下降沿的时刻发生变化，而在此之前和之后输入状态的变化对触发器的次态没有影响，因此其抗干扰能力比较强。</p><p>边沿触发器的符号特点是在时钟输入端有一个小三角，端口有小圆圈为下降沿触发，否则为上升沿触发。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308182045486.webp" alt="下降沿触发的 JK 触发器"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308182046429.webp" alt="示例波形图"></p><h2 id="触发器之间的转换"><a href="#触发器之间的转换" class="headerlink" title="触发器之间的转换"></a>触发器之间的转换</h2><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308182049657.webp" alt="触发器的转换（1）"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308182050244.webp" alt="触发器的转换（2）"></p>]]></content>
      
      
      <categories>
          
          <category> 硬件知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数电 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字电子技术基础（3）——组合逻辑电路</title>
      <link href="/post/d625d0a6.html"/>
      <url>/post/d625d0a6.html</url>
      
        <content type="html"><![CDATA[<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ol><li><p>什么是组合逻辑电路？<br>在任何时刻，电路的输出仅取决于该时刻的输入信号，而与电路原来的状态无关，这种电路称为组合逻辑电路。</p></li><li><p>组合逻辑电路的特点<br>结构特点：电路只有从输入到输出的通路，没有从输出到输入的反馈回路。电路中不存在含有记忆功能的存储器件。<br>逻辑特点：只要输入量确定，那么各级的输出量皆可确定。</p></li></ol><h2 id="组合逻辑电路的分析与设计"><a href="#组合逻辑电路的分析与设计" class="headerlink" title="组合逻辑电路的分析与设计"></a>组合逻辑电路的分析与设计</h2><p>组合逻辑电路的分析方法：</p><ol><li>根据逻辑电路图，确定输入变量、输出变量、中间变量；</li><li>逐级推导出各输出端的逻辑函数表达式；</li><li>化简输出表达式，列出真值表；</li><li>根据输出表达式和真值表，概括逻辑功能。</li></ol><p>组合逻辑电路的设计方法：</p><ol><li>对问题进行逻辑抽象，列出真值表；</li><li>写出逻辑表达式；</li><li>化简逻辑表达式，并根据所需器件进行变换；</li><li>绘制逻辑电路图。</li></ol><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308052320978.webp" alt="组合电路设计流程"></p><p>对于最简 <strong>与或</strong> 式，若需采用 <strong>与非</strong> 门实现，可以对该式<code>两次取反</code>，变换成 <strong>与非-与非</strong> 表达式；若需采用 <strong>或非</strong> 门实现，可以先转换成 <strong>或与</strong> 式（或者直接在卡诺图上圈0得到最简或与式），再<code>两次取反</code>，变换成 <strong>或非-或非</strong> 表达式。</p><p>当题目中有两组输出，且输入端共享，可以合理利用公共乘积项，以此优化电路设计。<br>例如：</p><script type="math/tex; mode=display">F_1 = C + A\bar{B} = \overline{\bar{C}\overline{A\bar{B}}} \\F_2 = BC + A\bar{B}\bar{C} = \overline{\overline{BC}\overline{A\bar{B}\bar{C}}}</script><p>可以利用公共乘积项<script type="math/tex">A\bar{B}\bar{C}</script>，简化电路结构。</p><script type="math/tex; mode=display">F_1 = C + A\bar{B} = C + A\bar{B}\bar{C} = \overline{\bar{C}\overline{A\bar{B}\bar{C}}} \\F_2 = BC + A\bar{B}\bar{C} = \overline{\overline{BC}\overline{A\bar{B}\bar{C}}}</script><p>简化前（左/上）与简化后（右/下）电路结构对比：</p><center><img no-lazy class="inline" src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308161826797.webp" style="height:200px;"/> ⇨ <img no-lazy class="inline" src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308161826151.webp" style="height:200px;"/></center><p>如果选用 MSI 组合逻辑器件设计电路时，对于多输出函数来说，通常选用 <strong>译码器</strong> 实现电路较方便。对于单输出函数来说，选用 <strong>数据选择器</strong> 实现电路较方便。</p><div class="note primary modern"><p>常用中规模组合逻辑器件（MSI）包括<strong>加法器</strong>、<strong>编码器</strong>、<strong>译码器</strong>、<strong>数据选择器</strong>、<strong>数值比较器</strong>等，除了基本功能外，还要掌握这些器件的扩展和应用。</p></div><h2 id="加法器"><a href="#加法器" class="headerlink" title="加法器"></a>加法器</h2><p>加法器是构成算术运算器的基本单元，两个二进制数之间所进行的算术运算加、减、乘、除等，在计算机中都是化作若干步加法运算进行的。实现1位加法运算的模块有半加器和全加器，实现多位加法运算的模块有串行进位加法器和超前进位加法器。</p><h3 id="半加器"><a href="#半加器" class="headerlink" title="半加器"></a>半加器</h3><p>如果不考虑有来自低位的进位，将两个1位二进制数相加称为半加。半加器公式：</p><script type="math/tex; mode=display">S = \bar{A}B + A\bar{B} = A \oplus B \\CO = AB</script><p>其中，A为被加数、B为加数，S为本位之和，CO为本位向高位的进位。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308162239749.png" alt="半加器逻辑图与符号"></p><h3 id="全加器"><a href="#全加器" class="headerlink" title="全加器"></a>全加器</h3><p>能对两个1位二进制数进行相加，并考虑低位来的进位，即相当于3个1位二进制数相加，求得和及进位的逻辑电路称为全加器。全加器公式：</p><script type="math/tex; mode=display">S = A \oplus B \oplus CI \\CO = (A \oplus B)CI + AB</script><p>其中，A、B为两个1位二进制加数，CI为低位来的进位，S为本位的和，CO为本位向高位的进位。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308162254327.png" alt="全加器符号"></p><h3 id="多位加法器"><a href="#多位加法器" class="headerlink" title="多位加法器"></a>多位加法器</h3><p>一般有串行进位加法器和超前进位加法器两种。</p><ol><li><p>串行进位加法器<br> 将N位全加器串联起来，低位全加器的进位输出连接到相邻的高位全加器的进位输人，这种进位方式称为串行进位。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308162312111.png" alt="4位串行进位加法器"></p><p>由于串行进位加法器的进位信号采用逐级传输方式，每一位的加法运算必须在低一位的加法运算完成之后才能进行，故其运算速度慢，只能用于低速数字设备中。但这种电路的结构简单，实现加法的位数扩展方便。</p></li><li><p>超前进位加法器<br> 超前进位又称并行进位，就是让各级进位信号同时产生，每位的进位只由加数和被加数决定，而不必等低位的进位，即实行了提前进位，因而提高了运算速度。但同时不可避免地，其电路复杂度会随着位数增加而急剧上升。我们日常使用的加法器模块多为超前进位的工作方式，如双全加器<code>74**183</code>、4位超前进位加法器<code>74**283</code>等。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308162318194.png" alt="4位超前进位加法器74HC283"></p></li></ol><h3 id="加法器的应用"><a href="#加法器的应用" class="headerlink" title="加法器的应用"></a>加法器的应用</h3><ol><li><p>构成加减乘除运算器<br>  若需求减法运算，只需把减数转成补码，即可把两数相减变换成两数相加的加法运算。至于乘法运算，可以先计算出每一位的本位和以及进位的表达式，再按照表达式画出逻辑图。</p>  <div class="note info no-icon flat"><p>例：用全加器实现一个2位二进制乘法运算电路。</p></div><p>  假设两个2位二进制数<script type="math/tex">A_1A0</script>和<script type="math/tex">B_1B_0</script>，两者相乘最高为4位，设为<script type="math/tex">Y_3Y_2Y_1Y_0</script>，列竖式计算</p><p>  <img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308171552003.png" alt=""></p><p>  具体电路实现方式：利用与门实现<script type="math/tex">A_0B_0</script>、<script type="math/tex">A_1B_0</script>、<script type="math/tex">A_0B_1</script>、<script type="math/tex">A_1B_1</script>（当然，如果题目中不允许使用门器件，也可以使用全加器实现<sup><span class='p blue'>*</span></sup>），然后利用一个全加器实现<script type="math/tex">Y_1=A_1B_0+A_0B_1</script>，产生的和就是<script type="math/tex">Y_1</script>，产生的进位<script type="math/tex">CO_1</script>供给高位计算产生<script type="math/tex">Y_2</script>；再利用一个全加器实现<script type="math/tex">Y_2=A_1B_1+CO_1</script>，产生的和是<script type="math/tex">Y_2</script>，产生的进位<script type="math/tex">CO_2</script>就是<script type="math/tex">Y_3</script>。逻辑电路图如下：</p><p>  <img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308171959587.webp" alt="乘法器逻辑图"></p>  <div class="note primary no-icon flat"><p>[<span class='p blue'>*</span>]: 将全加器的CI端接地，则输出CO即为AB。输出S为<script type="math/tex">A\oplus B</script></p></div></li><li><p>构成代码转换器<br>  比如常用的8421BCD码和余3码，它们之间的差值固定，因此通过加减这个差值，可以实现这两种编码的转换。</p></li><li><p>构成二-十进制码加法器</p>  <div class="note info no-icon flat"><p>例：用4位二进制加法器构成1位8421BCD码十进制加法器。</p></div><p>  首先举例分析十进制数的加法和8421BCD4位二进制码加法的差异。</p><p>  <img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308171525504.png" alt=""></p><p>  所以电路应由3个部分组成：第一部分进行加数和被加数相加；第二部分产生修正控制信号；第三部分完成加6修正。第一部分和第三部分均由4位加法器实现。第二部分判别信号F，应在4位8421BCD码相加有进位信号CO产生时或者和数在10~15的情况下产生，所以F应为</p><script type="math/tex; mode=display">  F=CO+F_3F_2F_1F_0+F_3F_2F_1F_0'+F_3F_2F_1'F_0+F_3F_2F_1'F_0'+F_3F_2'F_1F_0+F_3F_2'F_1F_0'</script><p>  化简变换为</p><script type="math/tex; mode=display">  F=CO+F_3F_2+F_3F_1=\overline{\overline{CO}\bullet\overline{F_3F_2}\bullet\overline{F_3F_1}}</script><p>  根据表达式可绘制出逻辑电路图如下</p><p>  <img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308171541727.png" alt="8421BCD码十进制加法器逻辑图"></p></li></ol><h2 id="编码器"><a href="#编码器" class="headerlink" title="编码器"></a>编码器</h2><p>编码器一般有普通编码器和优先编码器两种。</p><h3 id="普通编码器"><a href="#普通编码器" class="headerlink" title="普通编码器"></a>普通编码器</h3><p>在普通编码器中，任何时刻只允许输入一个编码有效信号，否则输出将发生混乱。常见的3位二进制编码器又称8线-3线编码器，4位二进制编码器又称16线-4线编码器。此外还有8421BCD码编码器，这是一种二-十进制编码器。不同的编码器要注意其输入端和输出端的引脚是否有小圆圈，输入端有小圆圈代表低电平有效，否则高电平有效，输出端有小圆圈代表输出为反码，否则输出原码。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172027963.webp" alt="3位二进制编码器真值表"></p><h3 id="优先编码器"><a href="#优先编码器" class="headerlink" title="优先编码器"></a>优先编码器</h3><p>在优先编码器电路中，允许同时输人两个以上的编码信号。不过在设计优先编码器时已经将所有的输入信号按优先顺序排了队，当几个输入信号同时出现时，只对其中优先权最高的一个进行编码。</p><p>我们常用的有 <strong>8线-3线优先编码器</strong><code>74**148</code>，还有 <strong>二-十进制优先编码器</strong><code>74**147</code>（输入低电平有效，输出为8421BCD码的反码）。</p><center><img no-lazy class="inline" src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172043150.webp" style="height:200px;"/><img no-lazy class="inline" src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172044777.webp" style="height:200px;"/></center><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172039257.webp" alt="74HC148功能表"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172040256.webp" alt="74HC147功能表"></p><h3 id="编码器扩展"><a href="#编码器扩展" class="headerlink" title="编码器扩展"></a>编码器扩展</h3><div class="note info no-icon flat"><p>例：用8线-3线优先编码器74HC148扩展成16线-4线优先编码器。</p></div><p>显然需要2片74HC148。我们知道74HC148的输出范围为 000 ~ 111，而需要得到的输出为 0000 ~ 1111，不难发现，0000 ~ 1111 可以拆成 0000 ~ 0111 和 1000 ~ 1111 两部分，这两部分的低三位都是 000 ~ 111，不同的只有最高位。我们可以利用使能端<script type="math/tex">S'</script>和使能输出端<script type="math/tex">Y_s'</script>，控制其中一片编码器工作，而另一片编码器不工作，而扩展输出端<script type="math/tex">Y_{EX}'</script>作为输出的最高位。注意，由于74HC148输出为反码，所以低三位输出端用与非门相接。逻辑电路图如下。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172222003.webp" alt="16线-4线优先编码器电路"></p><h2 id="译码器"><a href="#译码器" class="headerlink" title="译码器"></a>译码器</h2><p>译码是编码的逆过程。译码器的种类很多，根据所完成的逻辑功能可分为变量译码器、码制译码器和显示译码器3种。</p><h3 id="变量译码器"><a href="#变量译码器" class="headerlink" title="变量译码器"></a>变量译码器</h3><p>常见的变量译码器有 <strong>双2线-4线译码器</strong><code>74**139</code>、<strong>3线-8线译码器</strong><code>74**138</code>、<strong>4线-16线译码器</strong><code>74**154</code>等。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172249511.webp" alt="74HC138逻辑框图"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172250467.webp" alt="74HC138功能表"></p><p>从功能表可以看出，74HC138的输出<script type="math/tex">Y_t'=m_t'</script>，所以这种译码器也称最小项译码器。根据这个特性，我们可以用它来输出特定的逻辑函数表达式。</p><div class="note info no-icon flat"><p>例：用74HC138输出</p><script type="math/tex; mode=display">F_1=AB'+B'C+AC \\F_2=A'B'+BC'+ABC \\F_3=A'C+BC+AC'</script></div><p>先将<script type="math/tex">F_1、F_2、F_3</script>变换成最小项之和的形式，并变换成与非式。</p><script type="math/tex; mode=display">F_1 = \overline{m_1'm_4'm_5'm_7'} = \overline{Y_1'Y_4'Y_5'Y_7'} \\F_2 = \overline{m_0'm_1'm_2'm_6'm_7'} = \overline{Y_0'Y_1'Y_2'Y_6'Y_7'} \\F_3 = \overline{m_1'm_3'm_4'm_6'm_7'} = \overline{Y_1'Y_3'Y_4'Y_6'Y_7'}</script><p>逻辑电路图如下：</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172308027.png" alt=""></p><h3 id="码制译码器"><a href="#码制译码器" class="headerlink" title="码制译码器"></a>码制译码器</h3><p>最常用的是8421BCD码译码器，即 <strong>二-十进制译码器</strong><code>74**42</code>。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172316610.webp" alt="74HC42逻辑框图"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172316898.webp" alt="74HC42真值表"></p><p>根据真值表可见，若将<script type="math/tex">A_3</script>接地，弃用<script type="math/tex">Y_8、Y_9</script>，此时74HC42就可作为一片3线-8线译码器使用。</p><h3 id="显示译码器"><a href="#显示译码器" class="headerlink" title="显示译码器"></a>显示译码器</h3><p>常用的主要是<code>74**48</code>。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172346030.webp" alt="74LS48逻辑框图"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172347161.webp" alt="74LS48功能表"></p><p>其中，LT&#39; 为灯测试输入，令 LT&#39; = 0 可将所有数码管点亮，已检查发光是否正常。平时应置 LT&#39; 为1。</p><p>RBI&#39; 为灭零输入，其功能是把冗余的0熄灭，比如“00013.700”变成“13.7”。</p><p>BI&#39;/RBO&#39;为灭灯输入/灭零输出，当作输入端使用时，称灭灯输入控制端，令 BI&#39; = 0 即可熄灭所有数码管；当作为输出端使用时，称灭零输出端，只有当输入 A 全为 0，且 RBI&#39; = 0 时，才有输出 RBO&#39; = 0，表明已经将本来应该显示的零熄灭了。</p><p>将 BI&#39;/RBO&#39; 与 RBI&#39; 配合使用，很容易实现多位数码显示的灭零控制。将多谐振荡器与 BI&#39;/RBO&#39; 相连接，还可以实现亮度调节（PWM控制间歇显示）。</p><h3 id="译码器扩展"><a href="#译码器扩展" class="headerlink" title="译码器扩展"></a>译码器扩展</h3><div class="note info no-icon flat"><p>例：用3线-8线译码器74HC138扩展成4线-16线译码器。</p></div><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172330286.webp" alt="4线-16线译码器电路"></p><div class="note info no-icon flat"><p>例：用2线-4线译码器74LS139和4线-10线译码器74LS42扩展成5线-32线译码器。</p></div><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308172335270.webp" alt="5线-32线译码器电路"></p><h2 id="数据选择器"><a href="#数据选择器" class="headerlink" title="数据选择器"></a>数据选择器</h2><p>数据选择器输出通用表达式：</p><script type="math/tex; mode=display">Y = \sum_{i=0}^{2^n-1} D_im_i</script><p>常见的有 <strong>双4选1数据选择器</strong><code>74**153</code>，<strong>8选1数据选择器</strong><code>74**151</code>。其中S为选通端，A为地址端。芯片画法不固定，一般标注“MUX”的也是数据选择器。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308180821395.webp" alt="74HC153逻辑框图"></p><h3 id="数据选择器扩展"><a href="#数据选择器扩展" class="headerlink" title="数据选择器扩展"></a>数据选择器扩展</h3><div class="note info no-icon flat"><p>例：用8选1和4选1数据选择器扩展成32选1数据选择器。</p></div><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308180823418.webp" alt="32选1数据选择器电路"></p><h3 id="数据选择器生成函数"><a href="#数据选择器生成函数" class="headerlink" title="数据选择器生成函数"></a>数据选择器生成函数</h3><ol><li><p>用具有N个地址端的数据选择器实现M变量逻辑函数（M ≤ N）</p><ul><li>当 M = N 时，只需将选择器的输入端按照卡诺图中对应的 0 和 1 填写。</li></ul><div class="note info no-icon flat"><p>例：用8选1数据选择器实现3变量逻辑函数：</p><script type="math/tex; mode=display">  F=A'B+AB'+C</script></div><p>显然，<script type="math/tex">F(A,B,C)=\sum m(1,2,3,4,5,7)</script>，故将<script type="math/tex">D_1、D_2、D_3、D_4、D_5、D_7</script>接1，而<script type="math/tex">D_0、D_6</script>则接0。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308180902535.webp" alt=""></p><ul><li>当 M &lt; N 时，只需要将高位地址端和相应输入端接地（接0）即可。</li></ul><div class="note info no-icon flat"><p>例：用8选1数据选择器实现2变量逻辑函数：</p><script type="math/tex; mode=display">  F=A'B+AB'</script></div><p>显然，<script type="math/tex">F(A,B)=\sum m(1,2)</script>，故将<script type="math/tex">D_1、D_2</script>接1，而<script type="math/tex">D_0、D_3、D_4、D_5、D_6、D_7</script>则接0，至于地址端，高位<script type="math/tex">A_2</script>接0，剩余<script type="math/tex">A_1=A，A_0=B</script>。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308180902553.webp" alt=""></p></li><li><p>用具有N个地址端的数据选择器实现M变量逻辑函数（M &gt; N）</p><ul><li>一种方法是扩展法，一般将最高位作为片选信号。</li></ul><div class="note info no-icon flat"><p>例：用8选1数据选择器实现4变量逻辑函数：</p><script type="math/tex; mode=display">  F(A,B,C,D)=\sum m(0,3,6,7,10,11,13,14)</script></div><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308180902255.webp" alt=""></p><ul><li>另一种方法是降维图法。</li></ul><p>降维的方法是：如果记图变量为<script type="math/tex">X</script>，对于原卡诺图（或降维图）中，当 <script type="math/tex">X = 0</script> 时，原图单元值为 <script type="math/tex">f</script>；<script type="math/tex">X = 1</script> 时，原图单元值为 <script type="math/tex">g</script>，则在新的降维图中，对应的降维图单元填入子函数 <script type="math/tex">\overline{X} \bullet f + X \bullet g</script>。其中 <script type="math/tex">f</script> 和 <script type="math/tex">g</script> 可以为0，可以为1，可以为某一变量，也可以为某一函数。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308180921611.webp" alt="降维示例"></p><div class="note info no-icon flat"><p>例：用8选1数据选择器实现4变量逻辑函数：</p><script type="math/tex; mode=display">  F(A,B,C,D)=\sum m(1,5,6,7,9,11,12,13,14)</script></div><p>降维可得：<script type="math/tex">D_0=D，D_1=0，D_2=D，D_3=1，D_4=D，D_5=D，D_6=1，D_7=\overline{D}</script>。绘制出逻辑电路图如下：</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308180928995.webp" alt=""></p></li></ol><h2 id="数值比较器"><a href="#数值比较器" class="headerlink" title="数值比较器"></a>数值比较器</h2><p>数值比较器的输入为要进行比较的两个二进制数，输出为比较的三个结果：大于、小于和等于。<br>对于1位数值比较器，其逻辑表达式为</p><script type="math/tex; mode=display">F_{A>B}=A\overline{B} \\F_{A<B}=\overline{A}B \\F_{A=B}=A\odot B</script><p>在比较两个多位数的大小时，必须自高而低地逐位比较，而且只有在高位相等时，才需要比较低位。常用的集成模块有 <strong>4位数值比较器</strong><code>74**85</code>。</p><p>数值比较器有串联和并联2种扩展方式，当位数较少且要求速度不高时，常采用串联方式；当位数较多且要满足一定速度要求时，应采用并联方式。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181007053.webp" alt="两片74HC85扩展为8位数值比较器电路（串联扩展）"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181003321.webp" alt="用74LS85组成16位数值比较器电路（并联扩展）"></p><h2 id="竞争与冒险"><a href="#竞争与冒险" class="headerlink" title="竞争与冒险"></a>竞争与冒险</h2><p>理想情况下，在组合逻辑电路的设计中，假设电路的连线和集成门电路都没有延迟，电路中的多个输入信号发生变化时，都是同时瞬间完成的。实际上，信号通过连线及集成门都有一定的延迟时间，输入信号变化也需要一个过渡时间，多个输入信号发生变化时，也可能有先后快慢的差异。因此，在理想情况下设计的组合逻辑电路，受到上述因素的影响后，可能在输入信号发生变化的瞬间，在输出端出现一些不正确的尖峰信号。这些尖峰信号又称毛刺信号，主要是由信号经不同的路径或控制，到达同一点的时间不同而产生的竞争引起的，故称为竞争冒险现象，简称竞争冒险或冒险。它分为静态冒险和动态冒险两大类。</p><p>静态冒险分为静态1冒险和静态0冒险两类。静态1冒险，Y=AA&#39;；静态0冒险，Y=A+A&#39;。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181017227.webp" alt="静态1冒险"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181017136.webp" alt="静态0冒险"></p><h3 id="竞争冒险的判断"><a href="#竞争冒险的判断" class="headerlink" title="竞争冒险的判断"></a>竞争冒险的判断</h3><ol><li><p>代数法<br> 若输出函数在一定条件下可以简化为某原变量与反变量之和或之积，则电路存在竞争冒险现象。<br> 例如F=AB+A&#39;C，当B=C=1时，F=A+A&#39;，所以该电路存在竞争冒险现象。</p></li><li><p>卡诺图法<br> 若输出函数的卡诺图上，存在包围圈相邻的情况，则有竞争冒险现象；包围圈相交或不相邻，则无竞争冒险。</p></li></ol><h3 id="竞争冒险的消除"><a href="#竞争冒险的消除" class="headerlink" title="竞争冒险的消除"></a>竞争冒险的消除</h3><ol><li><p>修改逻辑设计<br> 可以通过对输出函数增加冗余项，修改逻辑设计。<br> 例如 F=AB+A&#39;C 添加冗余项 BC 变成 F=AB+A&#39;C+BC。</p> <center> <img no-lazy class="inline" src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181032192.webp" style="height:200px;"/> ⇨  <img no-lazy class="inline" src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308181032140.webp" style="height:200px;"/> </center></li><li><p>引入选通脉冲</p></li><li><p>加输出滤波电容</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 硬件知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数电 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>歌词淡入淡出效果的实现</title>
      <link href="/post/fbfe8234.html"/>
      <url>/post/fbfe8234.html</url>
      
        <content type="html"><![CDATA[<h2 id="歌词淡入淡出"><a href="#歌词淡入淡出" class="headerlink" title="歌词淡入淡出"></a>歌词淡入淡出</h2><p>利用<code>mask-image</code>和<code>linear-gradient</code>可制作一个渐变的遮罩，应用在文本上就能实现淡入淡出的效果了。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202307271624260.webp" alt="无渐变效果歌词"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202307271624072.webp" alt="淡入淡出歌词"></p><p>mask-image 属性可以创建自定义的、具有不同形状的遮罩效果，它接受一个URL值，表示要用作遮罩的图像的路径，该图像具有透明和非透明区域，其中非透明部分定义了遮罩的形状。linear-gradient 属性用于创建线性渐变效果，它的参数主要为渐变方向、颜色断点和范围。渐变方向可以是角度，如“45deg”、“90deg”等；也可以是方向词，如“to left”、“to bottom”等等。<br>mask-image 之前在<a href="/post/7c589660.html">超级圆角</a>上用过，linear-gradient 也在<a href="/post/a5c582fd.html#滚动条样式">滚动条</a>上用过，现在用在文本上也是很棒的组合。</p><ul><li><p>上下淡入淡出</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div</span>&#123;</span><br><span class="line">    -webkit-<span class="attribute">mask-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">0deg</span>,</span><br><span class="line">        transparent,</span><br><span class="line">        <span class="number">#fff</span> <span class="number">100px</span>,</span><br><span class="line">        <span class="number">#fff</span> <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">100px</span>),</span><br><span class="line">        transparent</span><br><span class="line">    );</span><br><span class="line">    <span class="attribute">mask-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">0deg</span>,</span><br><span class="line">        transparent,</span><br><span class="line">        <span class="number">#fff</span> <span class="number">100px</span>,</span><br><span class="line">        <span class="number">#fff</span> <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">100px</span>),</span><br><span class="line">        transparent</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>仅淡出</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div</span>&#123;</span><br><span class="line">    -webkit-<span class="attribute">mask-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">0deg</span>,</span><br><span class="line">        transparent,</span><br><span class="line">        <span class="number">#fff</span> <span class="number">200px</span></span><br><span class="line">    );</span><br><span class="line">    <span class="attribute">mask-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">0deg</span>,</span><br><span class="line">        transparent,</span><br><span class="line">        <span class="number">#fff</span> <span class="number">200px</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>仅淡入</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div</span>&#123;</span><br><span class="line">    -webkit-<span class="attribute">mask-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">180deg</span>,</span><br><span class="line">        transparent,</span><br><span class="line">        <span class="number">#fff</span> <span class="number">200px</span></span><br><span class="line">    );</span><br><span class="line">    <span class="attribute">mask-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">180deg</span>,</span><br><span class="line">        transparent,</span><br><span class="line">        <span class="number">#fff</span> <span class="number">200px</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>左右淡入淡出</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div</span>&#123;</span><br><span class="line">    -webkit-<span class="attribute">mask-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">90deg</span>,</span><br><span class="line">        transparent,</span><br><span class="line">        <span class="number">#fff</span> <span class="number">100px</span>,</span><br><span class="line">        <span class="number">#fff</span> <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">100px</span>),</span><br><span class="line">        transparent</span><br><span class="line">    );</span><br><span class="line">    <span class="attribute">mask-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        <span class="number">90deg</span>,</span><br><span class="line">        transparent,</span><br><span class="line">        <span class="number">#fff</span> <span class="number">100px</span>,</span><br><span class="line">        <span class="number">#fff</span> <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">100px</span>),</span><br><span class="line">        transparent</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a href="/post/de0459c0.html">长文本滚动</a>加上这个左右淡入淡出，结合使用效果会更好。</p><h2 id="歌词进度颜色填充"><a href="#歌词进度颜色填充" class="headerlink" title="歌词进度颜色填充"></a>歌词进度颜色填充</h2><p>以下Demo可以实现一个简易的效果。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308091820078.gif" alt="文本进度颜色填充"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;lyrics&quot;</span>&gt;</span>我想要怒放的生命！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#lyrics</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: fit-content;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">36px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">900</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right,<span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>) <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>) <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>) <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>) <span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">200%</span> <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">    -webkit-<span class="attribute">background-clip</span>: text;</span><br><span class="line">    -webkit-text-fill-<span class="attribute">color</span>: transparent;</span><br><span class="line">    <span class="attribute">animation</span>: progress <span class="number">3s</span> infinite linear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> progress &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>想要应用在播放器中，只需根据歌词的时长实时更改<code>animationDuration</code>控制动画的时长，再结合播控模块控制动画的开关，即可实现歌词进度颜色填充效果。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308091918155.gif" alt="歌词应用效果"></p><p>但是，这也只是一种简易的实现效果。实际上，歌手的语调是非线性的，歌词的进度需要尽可能地与歌手的语调同步，所以也必须是非线性的动画，而这在一般的歌词文件中是无法体现的，或许需要结合更加复杂的自然语义识别，或者结合对应的曲谱才能实现。</p>]]></content>
      
      
      <categories>
          
          <category> 前端后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于mathjax公式的一些bug</title>
      <link href="/post/a6751e89.html"/>
      <url>/post/a6751e89.html</url>
      
        <content type="html"><![CDATA[<p>很多时候，在 Typora 上展现出来是一种样式，在 hexo 博客上又是另一种样式。<br>这次遇到了 mathjax 公式的一些问题。</p><h2 id="无法换行问题"><a href="#无法换行问题" class="headerlink" title="无法换行问题"></a>无法换行问题</h2><p>通常，在 LaTeX 语法中，用“\\”可以实现换行显示。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">A \odot 1 = A \\</span><br><span class="line">A \odot 0 = \bar&#123;A&#125; \\</span><br><span class="line">A \odot \bar&#123;A&#125; = 0 \\</span><br><span class="line">A \odot A = 1</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>但实际渲染出来是这种效果：</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202307251248240.png" alt="错误效果"></p><p>通过 F12 查看 HTML 结构，发现“\\”被渲染成了一个空的 mjx-mspace 标签，而这个 mjx-mspace 标签的 display 属性默认为 inline-block，长宽皆为 0，所以就没有换行显示。那么只需在 CSS 文件里加一句 “mjx-mspace{display:block;}” 就可以了。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202307251248267.png" alt="HTML结构"></p><p>修改后公式的换行就正常了。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202307251252710.png" alt="正确效果"></p><h2 id="强制中文引号问题"><a href="#强制中文引号问题" class="headerlink" title="强制中文引号问题"></a>强制中文引号问题</h2><p>在markdown中输入的是英文引号，编译后就自动渲染成了中文引号。</p><p>这个问题跟hexo-render-kramed插件的配置有关，我在Github上找到了类似问题的解答。</p><div class="tag link"><a class="link-card" title="关于英文的引号会被渲染为中文的引号的问题" href="https://github.com/theme-next/hexo-theme-next/issues/462"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/Github.webp"/></div><div class="right"><p class="text">关于英文的引号会被渲染为中文的引号的问题</p><p class="url">https://github.com/theme-next/hexo-theme-next/issues/462</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Github</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div><p>我用的mathjax，所以用的hexo-render-kramed编译插件，对应的修正方法就是在<code>_config.yml</code>中修改以下配置项。</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">kramed:</span><br><span class="line">  gfm: true</span><br><span class="line">  pedantic: false</span><br><span class="line">  sanitize: false</span><br><span class="line">  tables: true</span><br><span class="line">  breaks: true</span><br><span class="line">  smartLists: true</span><br><span class="line"><span class="deletion">-  smartypants: true</span></span><br><span class="line"><span class="addition">+  smartypants: false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字电子技术基础（2）——逻辑代数基础</title>
      <link href="/post/8eb385ff.html"/>
      <url>/post/8eb385ff.html</url>
      
        <content type="html"><![CDATA[<h2 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h2><p>基本的逻辑运算包括与、或、非三项，常用的复合逻辑运算有与非、或非、与或非、异或、同或等。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/%E5%9F%BA%E6%9C%AC%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6%E5%8F%B7.webp" alt="基本逻辑运算符号"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/%E5%A4%8D%E5%90%88%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6%E5%8F%B7.webp" alt="复合逻辑运算符号"></p><ol><li><p>异或</p><script type="math/tex; mode=display">F = A \oplus B = A\bar{B}+\bar{A}B</script><p>性质：</p><script type="math/tex; mode=display">A \oplus 1 = \bar{A} \\A \oplus 0 = A \\A \oplus \bar{A} = 1 \\A \oplus A = 0</script></li><li><p>同或</p><script type="math/tex; mode=display">F = A \odot B = \bar{A}\bar{B}+AB</script><p>性质：</p><script type="math/tex; mode=display">A \odot 1 = A \\A \odot 0 = \bar{A} \\A \odot \bar{A} = 0 \\A \odot A = 1</script></li><li><p>异或和同或的关系</p><script type="math/tex; mode=display">A \oplus B = \overline{A \odot B} = \bar{A} \oplus \bar{B} \\A \odot B = \overline{A \oplus B} = \bar{A} \odot \bar{B}</script></li></ol><h2 id="逻辑函数"><a href="#逻辑函数" class="headerlink" title="逻辑函数"></a>逻辑函数</h2><p>逻辑函数的表示方法有：1.逻辑函数式；2.逻辑真值表；3.逻辑（电路）图；4.（方波）波形图；5.卡诺图等；</p><h3 id="常用公式"><a href="#常用公式" class="headerlink" title="常用公式"></a>常用公式</h3><script type="math/tex; mode=display">A + AB = A \\A + \bar{A}B = A + B \\AB + A\bar{B} = A \\A(A+B) = A \\AB + \bar{A}C + BC = AB + \bar{A}C \\AB + \bar{A}C + BCD = AB + \bar{A}C \\A\bullet\overline{AB} = A\bar{B} \\\bar{A}\bullet\overline{AB} = \bar{A}</script><p>德摩根律：</p><script type="math/tex; mode=display">\overline{AB} = \bar{A} + \bar{B} \\\overline{A+B} = \bar{A}\bar{B}</script><h3 id="基本定理"><a href="#基本定理" class="headerlink" title="基本定理"></a>基本定理</h3><ol><li><p>反演定理</p><p> 对于任意一个逻辑式 Y，将所有的与换成或，或换成与，0换成1，1换成0，原变量换成反变量，反变量换成原变量，所得结果即为 Y&#39;。（Y&#39;也作<script type="math/tex">\bar{Y}</script>）<br> 简单的说，就是所有元素都取反。<br> 使用反演定理时，需要注意保持原式中的优先顺序不变。</p></li><li><p>对偶定理</p><p> 若两式相等，则它们的对偶式也相等。<br> 对偶式：对于任意一个逻辑式 Y，将所有的与换成或，或换成与，0换成1，1换成0，所得结果即为 Y 的对偶式 Y*。（有的书也作<script type="math/tex">Y^D</script>）<br> 简单的说，就是除了变量外元素都取反。</p></li><li><p>Y、Y&#39;、Y*的关系</p><p> 若<script type="math/tex">Y = \sum m(0,1,4,6,7)</script>，则<script type="math/tex">Y' = \sum m(2,3,5)</script>，而<script type="math/tex">Y^* = \sum m(2,4,5)</script>。<br> 可以发现，Y 与 Y&#39; 是互补的，两者合集即为全集。而 Y&#39; 和 Y* 对应元素之和为固定值，即元素总数-1。</p></li></ol><h3 id="标准表达式"><a href="#标准表达式" class="headerlink" title="标准表达式"></a>标准表达式</h3><p>一般表达式分为与或式和或与式，例如 AB+CD 是与或式，(A+B)(C+D) 是或与式。<br>标准表达式也分两种，标准与或式和标准或与式。</p><ol><li><p>最小项</p><p> 在与或式中，函数展开式的每一项都是由全部变量组成的与项，每个变量以原变量或反变量形式出现，仅出现一次。这种与项，称为<code>最小项</code>。<br> 标准与或式，就是全部由最小项之和组成，也称最小项表达式。</p><script type="math/tex; mode=display"> F(A,B,C) = AB + AC + BC \\          =\bar{A}BC + A\bar{B}C + AB\bar{C} + ABC \\          =m_3 + m_5 + m_6 + m_7 \\          =\sum m(3,5,6,7)</script><p> 性质：</p><ul><li>对于任意最小项，只有一组取值使其为 1；</li><li>任意不同最小项之积为 0；</li><li>所有最小项之和为 1。</li></ul></li><li><p>最大项</p><p> 在或与式中，函数展开式的每一项都是由全部变量组成的或项，每个变量以原变量或反变量形式出现，仅出现一次。这种或项，称为<code>最大项</code>。<br> 标准或与式，就是全部由最大项之积组成，也称最大项表达式。</p><script type="math/tex; mode=display"> F(A,B,C) = AB + AC + BC \\          =(\bar{A}+B+C)(A+\bar{B}+C)(A+B+\bar{C})(A+B+C) \\          =M_3 M_5 M_6 M_7 \\          =\prod M(3,5,6,7)</script><p> 性质：</p><ul><li>对于任意最大项，只有一组取值使其为 0；</li><li>任意不同最大项之和为 1；</li><li>所有最大项之积为 0。</li></ul></li><li><p>最小项与最大项互为反函数，<script type="math/tex">\overline{m_i} = M_i, \overline{M_i} = m_i</script>。</p></li></ol><h3 id="卡诺图"><a href="#卡诺图" class="headerlink" title="卡诺图"></a>卡诺图</h3><p>逻辑函数化简的标准：</p><ol><li>项数少（与、或符号少），使用门电路器件就少；</li><li>各项变量少，其输入端数就少；</li><li>输入到输出的级数少，电路延迟就低；</li><li>可靠性要强。</li></ol><p>卡诺图画圈的过程中，主要项是指圈到最大的圈，必要项（属于主要项）是指不可缺少的圈，多余项（属于主要项）是画重复了的圈。</p><p>利用卡诺图化简有两种方法，一种是合并最小项，即圈 1 的方法，也是最常用的方法；另一种是合并最大项，即圈 0 的方法。<br>在做题的时候，可以根据实际情况，采用合适的方法。有的时候圈 0 会更简单！<br>包含任意项（约束项）的时候，要争取画的圈最大。</p><p>关于5变量卡诺图：</p><div class="table-container"><table><thead><tr><th style="text-align:center">AB\CDE</th><th style="text-align:center">000</th><th style="text-align:center">001</th><th style="text-align:center">011</th><th style="text-align:center">010</th><th style="text-align:center">110</th><th style="text-align:center">111</th><th style="text-align:center">101</th><th style="text-align:center">100</th></tr></thead><tbody><tr><td style="text-align:center">00</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">3</td><td style="text-align:center">2</td><td style="text-align:center">6</td><td style="text-align:center">7</td><td style="text-align:center">5</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">01</td><td style="text-align:center">8</td><td style="text-align:center">9</td><td style="text-align:center">11</td><td style="text-align:center">10</td><td style="text-align:center">14</td><td style="text-align:center">15</td><td style="text-align:center">13</td><td style="text-align:center">12</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">24</td><td style="text-align:center">25</td><td style="text-align:center">27</td><td style="text-align:center">26</td><td style="text-align:center">30</td><td style="text-align:center">31</td><td style="text-align:center">29</td><td style="text-align:center">28</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">16</td><td style="text-align:center">17</td><td style="text-align:center">19</td><td style="text-align:center">18</td><td style="text-align:center">22</td><td style="text-align:center">23</td><td style="text-align:center">21</td><td style="text-align:center">20</td></tr></tbody></table></div><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202307251811869.webp" alt="五变量卡诺图"></p><h3 id="逻辑图"><a href="#逻辑图" class="headerlink" title="逻辑图"></a>逻辑图</h3><p>逻辑图一般画法：</p><script type="math/tex; mode=display">Y_1(A,B,C,D)=B+AC+\bar{A}\bar{C}D \\Y_2(A,B,C,D)=\bar{A}D+B\bar{D} \\Y_3(A,B,C,D)=\bar{A}CD+A\bar{B}C</script><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202307251657145.webp" alt="逻辑图"></p>]]></content>
      
      
      <categories>
          
          <category> 硬件知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数电 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字电子技术基础（1）——数制与码制</title>
      <link href="/post/ca0077c.html"/>
      <url>/post/ca0077c.html</url>
      
        <content type="html"><![CDATA[<h2 id="数字电路"><a href="#数字电路" class="headerlink" title="数字电路"></a>数字电路</h2><p>工作在数字信号下的电子电路称为数字电路。与模拟电路相比，数字电路的优点有：</p><ol><li>稳定性好，抗干扰能力强；</li><li>容易设计，便于构成大规模集成电路，所以成本低廉，使用方便；</li><li>信息处理能力强；</li><li>精度高且容易保持；</li><li>便于存储；</li><li>静态功耗小。</li></ol><h2 id="数制"><a href="#数制" class="headerlink" title="数制"></a>数制</h2><p>常用的有十进制（D）、二进制（B）、十六进制（H）、八进制（O）。</p><script type="math/tex; mode=display">(1961)_{10}=1×10^3+9×10^2+6×10^1+1×10^0</script><p>其中，10 为<code>基数</code>，<script type="math/tex">10^0</script>、<script type="math/tex">10^1</script>、<script type="math/tex">10^2</script>、<script type="math/tex">10^3</script>为各位数的<code>权</code>。<br>对于任意一个 R 进制数，可以表示为：</p><script type="math/tex; mode=display">(N)_R=\sum_{i=-m}^{n-1} a_i×R^i</script><h3 id="B-gt-H"><a href="#B-gt-H" class="headerlink" title="B -&gt; H"></a>B -&gt; H</h3><p>4 位二进制数对应 1 位十六进制数，所以当二进制转换十六进制时，整数部分和小数部分都需要按 4 位一组划分，不足则补 0。</p><script type="math/tex; mode=display">(1101100.11)_B = 0110 1100 . 1100 = (6C.C)_H</script><h3 id="D-gt-B、D-gt-H"><a href="#D-gt-B、D-gt-H" class="headerlink" title="D -&gt; B、D -&gt; H"></a>D -&gt; B、D -&gt; H</h3><p>十进制转二进制和十六进制，需要分别对整数部分和小数部分进行转换，最后合并。</p><ol><li><p>整数部分</p><p>整数部分采用“除基取余”法，即不断除以基数，取余数，直至商为 0。<br>以 (208)₁₀ 转换成十六进制为例，基数是 16，所以逐次除以 16 取余数，得到结果为 (D0)₁₆。</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">16 │  2  0  8     余0      ↑ 低位</span><br><span class="line">   │___________            │</span><br><span class="line">  16  │  1  3     余13     │</span><br><span class="line">      │________            │</span><br><span class="line">            0              │ 高位</span><br></pre></td></tr></table></figure></li><li><p>小数部分</p><p>小数部分采用“乘基取整”法，即不断将小数部分乘以基数，取积的整数部分，再对积的小数部分乘以基数，如此循环直至小数部分为 0。<br>以 (0.625)₁₀ 转化为十六进制为例，正好乘一次小数部分就为 0 了，结果为 (0.A)₁₆。</p><script type="math/tex; mode=display">0.625×16=10.0</script><p>所以 (208.625)₁₀ = (D0.A)₁₆。</p></li></ol><h2 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h2><p>二-十进制代码（Binary Coded Decimal，BCD 码）是用 4 位二进制数表示 1 位十进制数码。常见的有 8421BCD 码、2421BCD 码、5211BCD 码，这些都是<code>恒权码</code>。另外还有余三码、格雷码，属于<code>无权码</code>。<br>余三码是由 8421BCD 码加 3 得到的，它有一个特点，从表中可以看出 0/9、1/8、2/7、3/6、4/5 互为反码。2421BCD 码也存在同样的特点。</p><div class="table-container"><table><thead><tr><th style="text-align:center">十进制数码</th><th style="text-align:center">8421BCD</th><th style="text-align:center">2421BCD</th><th style="text-align:center">余 3 码</th><th style="text-align:center">5211BCD</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">0000</td><td style="text-align:center">0000</td><td style="text-align:center">0011</td><td style="text-align:center">0000</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0001</td><td style="text-align:center">0001</td><td style="text-align:center">0100</td><td style="text-align:center">0001</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">0010</td><td style="text-align:center">0010</td><td style="text-align:center">0101</td><td style="text-align:center">0100</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">0011</td><td style="text-align:center">0011</td><td style="text-align:center">0110</td><td style="text-align:center">0101</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">0100</td><td style="text-align:center">0100</td><td style="text-align:center">0111</td><td style="text-align:center">0111</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">0101</td><td style="text-align:center">1011</td><td style="text-align:center">1000</td><td style="text-align:center">1000</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">0110</td><td style="text-align:center">1100</td><td style="text-align:center">1001</td><td style="text-align:center">1001</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">0111</td><td style="text-align:center">1101</td><td style="text-align:center">1010</td><td style="text-align:center">1100</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">1000</td><td style="text-align:center">1110</td><td style="text-align:center">1011</td><td style="text-align:center">1101</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">1001</td><td style="text-align:center">1111</td><td style="text-align:center">1100</td><td style="text-align:center">1111</td></tr><tr><td style="text-align:center">x</td><td style="text-align:center">1010</td><td style="text-align:center">0101</td><td style="text-align:center">0000</td><td style="text-align:center">0010</td></tr><tr><td style="text-align:center">x</td><td style="text-align:center">1011</td><td style="text-align:center">0110</td><td style="text-align:center">0001</td><td style="text-align:center">0011</td></tr><tr><td style="text-align:center">x</td><td style="text-align:center">1100</td><td style="text-align:center">0111</td><td style="text-align:center">0010</td><td style="text-align:center">0110</td></tr><tr><td style="text-align:center">x</td><td style="text-align:center">1101</td><td style="text-align:center">1000</td><td style="text-align:center">1101</td><td style="text-align:center">1010</td></tr><tr><td style="text-align:center">x</td><td style="text-align:center">1110</td><td style="text-align:center">1001</td><td style="text-align:center">1110</td><td style="text-align:center">1011</td></tr><tr><td style="text-align:center">x</td><td style="text-align:center">1111</td><td style="text-align:center">1010</td><td style="text-align:center">1111</td><td style="text-align:center">1110</td></tr></tbody></table></div><p>格雷码又叫循环码，它的优点是，相邻的代码之间只有一位发生变化。因此，格雷码有助于提高系统的抗干扰性能和可靠性，能够提高系统工作速度。</p><div class="table-container"><table><thead><tr><th style="text-align:center">十进制数码</th><th style="text-align:center">二进制代码</th><th style="text-align:center">格雷码</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">0000</td><td style="text-align:center">0000</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">0001</td><td style="text-align:center">0001</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">0010</td><td style="text-align:center">0011</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">0011</td><td style="text-align:center">0010</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">0100</td><td style="text-align:center">0110</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">0101</td><td style="text-align:center">0111</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">0110</td><td style="text-align:center">0101</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">0111</td><td style="text-align:center">0100</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">1000</td><td style="text-align:center">1100</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">1001</td><td style="text-align:center">1101</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">1010</td><td style="text-align:center">1111</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">1011</td><td style="text-align:center">1110</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">1100</td><td style="text-align:center">1010</td></tr><tr><td style="text-align:center">13</td><td style="text-align:center">1101</td><td style="text-align:center">1011</td></tr><tr><td style="text-align:center">14</td><td style="text-align:center">1110</td><td style="text-align:center">1001</td></tr><tr><td style="text-align:center">15</td><td style="text-align:center">1111</td><td style="text-align:center">1000</td></tr></tbody></table></div><h2 id="原码、反码、补码"><a href="#原码、反码、补码" class="headerlink" title="原码、反码、补码"></a>原码、反码、补码</h2><p>二进制数以 0 表示正数“+”，1 表示负数“-”。原码即在二进制数绝对值左侧加上符号位。<br>对于正数，它的反码、补码与原码相同。<br>对于负数，保持符号位不变，数值部分按位求反，即为反码；在反码的基础上，保持符号位不变，数值部分再加 1，即为补码。<br>已知反码，对其求反码即为原码；已知补码，对其求补码即为原码。</p>]]></content>
      
      
      <categories>
          
          <category> 硬件知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数电 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>音乐工具相关分享</title>
      <link href="/post/efb0b0af.html"/>
      <url>/post/efb0b0af.html</url>
      
        <content type="html"><![CDATA[<h2 id="YesPlayMusic"><a href="#YesPlayMusic" class="headerlink" title="YesPlayMusic"></a>YesPlayMusic</h2><p>我在逛朋友的博客的时候，发现很多人都用过一个叫 <a href="https://github.com/qier222/YesPlayMusic">YesPlayMusic</a> 的开源的音乐播放器，界面优雅美观，觉得很不错。于是就去 github 找到了该项目的仓库，fork 了一份打算也放到我的网站里。但是试着听了几首歌之后发现有些无音源或者 VIP 的曲目还是无法播放，又仔细看了一下文档才知道，原来网页版不支持 <a href="https://github.com/UnblockNeteaseMusic/server#%E9%9F%B3%E6%BA%90%E6%B8%85%E5%8D%95">UnblockNeteaseMusic</a> 自动音源替换。</p><p>好在随手百度的时候看到了 B 站一个 UP 主 <a href="https://space.bilibili.com/11363292">ROGINX</a> 发的视频，他基于 YesPlayMusic 做了一些优化，使得网页版也支持了 UnblockNeteaseMusic 的音源替换功能，而且还做了手机端的 UI 适配（原版不支持）。这款 <a href="https://github.com/janxland/YesPlayMusic">改进版YesPlayMusic</a> 虽然不如原版稳定，存在一点点小 bug，但功能性上远胜原版。当然了，YesPlayMusic 是支持网易云账户登录的，如果本身有网易云黑胶会员，它也能识别出来，基本上就是不需要音乐解灰的，那用原版其实就可以了。</p><div class="tag link"><a class="link-card" title="YesPlayMusic+unblock——打造属于自己的高颜值音乐播放器" href="https://www.bilibili.com/video/BV1Fc411j7vR/?share_source=copy_web&vd_source=712717e9ea794f4f9612082ec2a80f7c"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/OhHkyt.webp"/></div><div class="right"><p class="text">YesPlayMusic+unblock——打造属于自己的高颜值音乐播放器</p><p class="url">https://www.bilibili.com/video/BV1Fc411j7vR/?share_source=copy_web&vd_source=712717e9ea794f4f9612082ec2a80f7c</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— ROGINX</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div><p>在修正了一些界面显示上的小瑕疵后，我把它部署到了 vercel 上，成为了网站的一部分，现在可以进入 <a href="https://music.cansin.top">司音堂</a> 预览效果。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/OhH7hv.webp" alt="首页界面"></p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/OhHxsx.webp" alt="播放界面"></p><p>对于作者来说，该项目更多的应用还是在客户端，支持 Linux、Mac、Windows 三端应用。另外，该项目的 v2.0.0Alpha 版已经发布，相对于 v0.4.7 正式版，这款 Alpha 版界面进行了全面的替换升级，还改了个新的名字 R3PLAY，已经完全不是一个东西了。当然，毕竟是 Alpha 版，bug 还是不少的，等正式版出来再搞一搞。</p><h2 id="黑胶侠"><a href="#黑胶侠" class="headerlink" title="黑胶侠"></a>黑胶侠</h2><p>其实我本身是个 QQ 音乐用户，所以没有特意去充这个网易云的黑胶会员，但偶尔也会来网易云听一听，就会有这么个短期的黑胶的需求。有一天无意就发现了一个叫“黑胶侠”的公众号，它里面有免费的黑胶会员周卡，我试着用了一次，确实可以。只可惜这个周卡仅限非会员兑换，而且一个月只能兑换一次。后来加了他们的粉丝群，想不到里面福利更多，他们有一个积分系统，时不时完成个任务就有几十个积分，然后你可以用 80 个积分兑换一张周卡，310 个积分兑换一张月卡，而且这个卡是可以叠加的，无门槛。因为我不怎么听网易云，所以一般不兑月卡，想听的时候就兑一张周卡，这样比较划算。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308271903077.webp" alt="黑胶周卡"></p>]]></content>
      
      
      <categories>
          
          <category> 生活日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 分享 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用vercel部署一个简单的后端程序</title>
      <link href="/post/27d667eb.html"/>
      <url>/post/27d667eb.html</url>
      
        <content type="html"><![CDATA[<p>有些 API 请求需要用到密钥，直接将密钥暴露在前端存在一定的风险，那么可以尝试把该部分程序放在服务器端执行，直接把结果返回给前端。<br>听起来很有道理，可惜我不会。不会就去现学，在 ChatGPT 这个不靠谱的老师教导下，摸索半天终于搞出了点效果。<br>这里整理记录一下，也不知道对不对。</p><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>这里以和风天气为例，做个获取当前城市天气信息的 API。和风天气有现成的插件，但是样式是固定的，只能添加一个插件，而且密钥是暴露在前端的。所以我打算用和风天气 API 获取天气数据。和风天气 API 请求 URL 结构如下：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://devapi.qweather.com/v7/weather/now?location=xxx&amp;key=xxx</span><br><span class="line">\___/   \_________________/\______________/\__________________/</span><br><span class="line">scheme           host   (port)   path        query parameters</span><br></pre></td></tr></table></figure><blockquote><p>其中重要参数：</p><ul><li>location: 城市代码；</li><li>key: 和风 KEY。</li></ul></blockquote><p>参考文档：<br><div class="tag link"><a class="link-card" title="实时天气" href="https://dev.qweather.com/docs/api/weather/weather-now"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/和风天气.webp"/></div><div class="right"><p class="text">实时天气</p><p class="url">https://dev.qweather.com/docs/api/weather/weather-now</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— 和风天气</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p><p>和风 KEY 在控制台可以找到，城市代码则需要由和风天气 GeoAPI 城市搜索功能获取。GeoAPI 城市搜索请求 URL 结构如下：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://geoapi.qweather.com/v2/city/lookup?location=xxx&amp;adm=xxx&amp;key=xxx</span><br><span class="line">\___/   \_________________/\______________/\__________________________/</span><br><span class="line">scheme          host    (port)   path            query parameters</span><br></pre></td></tr></table></figure><blockquote><p>其中重要参数：</p><ul><li>location: 必选，城市名称；</li><li>adm: 可选，所属上一级行政区域；</li><li>key: 必选，和风 KEY；</li><li>另外还有 range、number、lang 等可选参数，这里暂不需要。</li></ul></blockquote><p>参考文档：<br><div class="tag link"><a class="link-card" title="GeoAPI - 城市搜索" href="https://dev.qweather.com/docs/api/geoapi/city-lookup/"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/和风天气.webp"/></div><div class="right"><p class="text">GeoAPI - 城市搜索</p><p class="url">https://dev.qweather.com/docs/api/geoapi/city-lookup/</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— 和风天气</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p><p>这里城市名称需要用到 <a href="https://lbs.qq.com/dev/console/application/mine">腾讯位置服务</a> 的 IP 定位功能。</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://apis.map.qq.com/ws/location/v1/ip?ip=xxx&amp;key=xxx</span><br><span class="line">\___/   \_____________/\_________________/\____________/</span><br><span class="line">scheme        host  (port)    path       query parameters</span><br></pre></td></tr></table></figure><blockquote><p>其中重要参数：</p><ul><li>ip: 客户端 IP 地址；</li><li>key: 腾讯 KEY。</li></ul></blockquote><p>参考文档：<br><div class="tag link"><a class="link-card" title="WebService API - 开发指南 - IP定位" href="https://lbs.qq.com/service/webService/webServiceGuide/webServiceIp"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/腾讯位置服务.webp"/></div><div class="right"><p class="text">WebService API - 开发指南 - IP定位</p><p class="url">https://lbs.qq.com/service/webService/webServiceGuide/webServiceIp</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— 腾讯位置服务</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p><p>客户端 IP 地址由前端获取并传入，这里采用的由 <a href="https://www.ipify.org/">Paul Seelman</a> 提供的 IP 定位服务，无需参数，自动获取当前网络 IP。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://api.ipify.org?format=json&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> ipAddress = data.<span class="property">ip</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;IP 地址：&quot;</span> + ipAddress);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取 IP 地址失败:&#x27;</span>, error);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>整体流程如下：</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/OzpslD.webp" alt="流程图"></p><h2 id="新建-github-仓库"><a href="#新建-github-仓库" class="headerlink" title="新建 github 仓库"></a>新建 github 仓库</h2><p>首先，我们在 github 新建一个 <code>私有的</code> 仓库，并上传几个文件。</p><h3 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h3><p>这里包含了服务器端处理的程序，注意文件名一定要是 <strong>index</strong> ，包括后面的文件里也要保持一致。另外为解决跨域问题，需要引入 cors 模块，将你的域名填入白名单。</p><blockquote><p>这里按理说使用通配符“*”就可以，但是不知道为什么没有效果，就老老实实写全域名了。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入所需包和模块</span></span><br><span class="line"><span class="keyword">const</span> fetch = <span class="built_in">require</span>(<span class="string">&#x27;node-fetch&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;dotenv&#x27;</span>).<span class="title function_">config</span>(); <span class="comment">// 导入 dotenv 并加载 .env 文件</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>(&#123;</span><br><span class="line">  <span class="attr">origin</span>: [<span class="string">&#x27;https://cansin.top&#x27;</span>, <span class="string">&#x27;https://blog.cansin.top&#x27;</span>, <span class="string">&#x27;https://gavin-chen.top&#x27;</span>, <span class="string">&#x27;https://*.gavin-chen.top&#x27;</span>] <span class="comment">// 指定允许跨域访问的域名</span></span><br><span class="line">&#125;));</span><br><span class="line"><span class="comment">// 创建 Express 应用程序</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"><span class="comment">// 路由和处理程序</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/weather&#x27;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> ip = req.<span class="property">query</span>.<span class="property">ip</span>; <span class="comment">// 请求后面带ip的值，格式：domain/weather?ip=xxx</span></span><br><span class="line">    <span class="keyword">const</span> weatherKey = process.<span class="property">env</span>.<span class="property">WEATHER_API_KEY</span>; <span class="comment">// 从环境变量中获取 API 密钥</span></span><br><span class="line">    <span class="keyword">const</span> locationKey = process.<span class="property">env</span>.<span class="property">LOCATION_API_KEY</span>; <span class="comment">// 从环境变量中获取 API 密钥</span></span><br><span class="line">    <span class="keyword">var</span> weatherNowJson = &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> weatherJson = &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> locationJson = &#123;&#125;;</span><br><span class="line">    <span class="keyword">const</span> response1 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://apis.map.qq.com/ws/location/v1/ip?ip=<span class="subst">$&#123;ip&#125;</span>&amp;key=<span class="subst">$&#123;locationKey&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">const</span> data1 = <span class="keyword">await</span> response1.<span class="title function_">json</span>();</span><br><span class="line">    locationJson = data1;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> province = data1.<span class="property">result</span>.<span class="property">ad_info</span>.<span class="property">province</span>;</span><br><span class="line">      <span class="keyword">var</span> city = data1.<span class="property">result</span>.<span class="property">ad_info</span>.<span class="property">city</span>;</span><br><span class="line">      <span class="keyword">var</span> district = data1.<span class="property">result</span>.<span class="property">ad_info</span>.<span class="property">district</span>;</span><br><span class="line">      <span class="keyword">var</span> place = district == <span class="string">&#x27;&#x27;</span> ? city : district;</span><br><span class="line">      <span class="keyword">var</span> adm = district == <span class="string">&#x27;&#x27;</span> ? province : city;</span><br><span class="line">      <span class="keyword">const</span> response2 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://geoapi.qweather.com/v2/city/lookup?location=<span class="subst">$&#123;place&#125;</span>&amp;adm=<span class="subst">$&#123;adm&#125;</span>&amp;key=<span class="subst">$&#123;weatherKey&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">const</span> data2 = <span class="keyword">await</span> response2.<span class="title function_">json</span>();</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> cityId = data2.<span class="property">location</span>[<span class="number">0</span>].<span class="property">id</span>;</span><br><span class="line">        <span class="keyword">const</span> response3 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://devapi.qweather.com/v7/weather/now?location=<span class="subst">$&#123;cityId&#125;</span>&amp;key=<span class="subst">$&#123;weatherKey&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">const</span> data3 = <span class="keyword">await</span> response3.<span class="title function_">json</span>();</span><br><span class="line">        <span class="keyword">const</span> response4 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://devapi.qweather.com/v7/weather/24h?location=<span class="subst">$&#123;cityId&#125;</span>&amp;key=<span class="subst">$&#123;weatherKey&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">const</span> data4 = <span class="keyword">await</span> response4.<span class="title function_">json</span>();</span><br><span class="line">        weatherNowJson = data3;</span><br><span class="line">        weatherJson = data4;</span><br><span class="line">        res.<span class="title function_">json</span>(&#123; weatherNowJson, weatherJson, locationJson &#125;); <span class="comment">// 将 JSON 数据返回给前端</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Internal Server Error3&#x27;</span> &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Internal Server Error2&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Internal Server Error1&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动服务器</span></span><br><span class="line"><span class="keyword">const</span> server = app.<span class="title function_">listen</span>(process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> port = server.<span class="title function_">address</span>().<span class="property">port</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server is running on port <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><p>这里注意文件名 index.js ，还有 dependencies 中列出所有需要的包。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;projectname&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node index.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Gavin&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MIT&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;axios&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.27.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;express&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.18.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dotenv&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^8.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;node-fetch&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cors&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.8.5&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="vercel-json"><a href="#vercel-json" class="headerlink" title="vercel.json"></a>vercel.json</h3><p>这里在环境变量里填入密钥。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;builds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;use&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@vercel/node&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;routes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;WEATHER_API_KEY&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;LOCATION_API_KEY&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="导入-vercel"><a href="#导入-vercel" class="headerlink" title="导入 vercel"></a>导入 vercel</h2><p>接下来就是在 vercel 导入该仓库，并绑定自己的域名，比如 <a href="https://api.domain.com">https://api.domain.com</a> ，此时在浏览器输入 <a href="https://api.domain.com/weather?ip=xxx.xxx.xxx.xxx">https://api.domain.com/weather?ip=xxx.xxx.xxx.xxx</a> ，即可返回一串包含了天气信息的 json 数据。</p><h2 id="前端处理"><a href="#前端处理" class="headerlink" title="前端处理"></a>前端处理</h2><p>注意 url 后加上 <strong>&#39;&amp;output=jsonp&#39;</strong> ，防止跨域问题。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://api.ipify.org?format=json&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> ipAddress = data.<span class="property">ip</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;IP 地址：&quot;</span> + ipAddress);</span><br><span class="line">        <span class="title function_">fetch</span>(<span class="string">&#x27;https://apis.cansin.top/weather?ip=&#x27;</span>+ipAddress+<span class="string">&#x27;&amp;output=jsonp&#x27;</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">                <span class="comment">// 此处填写json数据读取与处理程序</span></span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取天气信息失败:&#x27;</span>, error);</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取 IP 地址失败:&#x27;</span>, error);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>目前来看，利用ChatGPT学习还是不太方便的，首先是对提问的句式有很高的要求，其次给出的答案经常不是最优解，甚至常常给出错误答案（比如代码方面），我需要不停的发现问题，纠正它的错误——这其实还不如一篇CSDN的经验贴。因此，作为初学者，还是老老实实看一些系统性的课程或者专业的书籍，而ChatGPT可以作为一本辞典来使用。<br>上面的代码很多地方还没琢磨明白，有空还是得翻翻文档仔细研究研究。<br>最后要感谢Wei Wei视频的讲解，照着现成的项目摸索简直是事半功倍，希望这种小白类的视频可以多一点。<br><div class="tag link"><a class="link-card" title="使用 Vercel 部署前端与后端项目（React，NodeJS API Service）" href="https://www.youtube.com/watch?v=fz77TeUTkPE"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/202308271835006.webp"/></div><div class="right"><p class="text">使用 Vercel 部署前端与后端项目（React，NodeJS API Service）</p><p class="url">https://www.youtube.com/watch?v=fz77TeUTkPE</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Wei Wei</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p>]]></content>
      
      
      <categories>
          
          <category> 前端后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>长文本滚动动效</title>
      <link href="/post/de0459c0.html"/>
      <url>/post/de0459c0.html</url>
      
        <content type="html"><![CDATA[<p>有些地方需要显示完整的文本，但容器的宽度是固定死的，所以就需要滚动显示的功能。由于文本内容长短不一，只有溢出容器宽度的文本需要滚动显示，而短文本则保持静态显示。</p><p>具体框架需要两层结构，一个外层固定视窗，一个内层滚动文本。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;A&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;B&quot;</span>&gt;</span>长长长长长长长长长长长长长长长文本<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>首先确定滚动的路径，要想使得滚动动效无缝衔接，那么就让B从A的右端点出发，向左滚动，直到B的右端点到达A的左端点。通过@keyframes来创建动画的关键帧规则，一般以视窗A的左端点为O点，那么起点位置为A的右端点横坐标A.offsetWidth（实测为200px），终点位置为终止时B的左端点横坐标-B.offsetWidth（即-100%，此处%是相对于B来说）。<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/Ozz4Px.jpg" alt="位移轨迹"><br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> marquee &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">200px</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#A</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap; <span class="comment">/* 不换行 */</span></span><br><span class="line">    <span class="attribute">overflow</span>: hidden; <span class="comment">/* 溢出部分隐藏 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>通过js判断是否为长文本，长文本则开启滚动显示。这里设置为无限滚动，每次滚动10s。可根据需要控制总滚动时长，也可以替换成注释部分，则为匀速滚动。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> marqueeContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;A&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> marqueeContent = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;B&#x27;</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">marquee</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (marqueeContent.<span class="property">offsetWidth</span> &gt; marqueeContainer.<span class="property">offsetWidth</span>) &#123;</span><br><span class="line">        <span class="comment">// var speed = marqueeContent.offsetWidth / marqueeContainer.offsetWidth * 5</span></span><br><span class="line">        <span class="comment">// marqueeContent.style.animation = &#x27;marquee &#x27; + speed + &#x27;s linear infinite&#x27;</span></span><br><span class="line">        marqueeContent.<span class="property">style</span>.<span class="property">animation</span> = <span class="string">&#x27;marquee 10s linear infinite&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        marqueeContent.<span class="property">style</span>.<span class="property">animation</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>最终效果如下：<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/OziZT1.gif" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 前端后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>罗技MX Master 2S鼠标指针失灵问题修复</title>
      <link href="/post/2a10698b.html"/>
      <url>/post/2a10698b.html</url>
      
        <content type="html"><![CDATA[<p>这款罗技的MX Master 2S鼠标是我2020年买的，到现在用了快3年了。它有很多特色的功能，比如按键功能自定义、Logi Flow、滚轮速度可调等。我最喜欢的就是它的滚轮，当你拨动滚轮施加的初速度超过某个阈值，他就会开启快速滚动模式，滚轮就像轴承一样快速转动，直到速度降到阈值以下立即停止，还蛮有意思的。其他的基础功能做的也不错，连接速度、响应速度、稳定性都是一流的，外形也是人体工学设计，握着很舒服。<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/OzbmMc.webp" alt="MX Master 2S"></p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>第一次出现问题是在去年夏天，本来它一直用的很好，结果突然就指针不能动了，点了点左右键还是正常的，其他像滚轮、前后键也都是正常的。</p><p>在测试了其他鼠标后确定了不是电脑问题，尝试更新了一下驱动，也没有效果。于是拨通了罗技的售后电话，u1s1，这罗技的售后电话是真难找，他们那个热线经常换号码，打过去显示的还不是什么罗技售后热线，而是“XX亲子轮滑培训”，真是奇奇怪怪。由于罗技的产品是一年保修，已经远远过了保修期，而且售后小哥说这个不支持寄修，所以就尝试远程指导我，无非就是重装个驱动、重置下设备，当然也没找到问题根源，售后小哥说也是第一次遇到这种情况，估计是光电传感器坏了，只能让我自己线下去找第三方修。当时打算搁置一段时间再修，先用备用鼠标顶着，没想到没过几天它自己好了，我就用回了Master2S。</p><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>几个月后第二次出现了指针失灵的问题，我百度了好久终于在B站一个帖子上发现了别人跟我一模一样的问题，这才找到了问题的根源。原来，这款鼠标的拇指键在使用久了之后，会出现无法回弹的状况，使得该按键一直处于被按下的状态，而这个模式下指针是无法移动的，其他按键不受影响。这是这款鼠标的通病。通过up主的拆解图来看，拇指键的上层是一个与外壳一体的机械结构，回弹性较差；拇指键的下层是一块装有按键的电路板，所用按键是一片轻触微动开关，键程极短；由于上层部件与下层部件之间紧密贴合，没有缓冲空间，加上按键键程短、机械结构回弹弱，所以就很容易造成拇指键卡死，导致指针失灵。</p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>网上提供的解决办法有几种，比如可以把拇指键连接线剪掉，或者直接把拇指键模组拆除，亦或是更换微动按键。这些方法都可以，甚至，你敲一敲鼠标他也能自己回弹了，只不过“敲”这个方法治标不治本，过个几个星期问题又会复现。因为手头螺丝刀找不到了，本人又比较懒，就一直用“敲”的办法，拖了一年多。<br>这两天收拾抽屉正好把螺丝刀找到了，就顺手拆了一下鼠标，彻底解决拇指键的问题。为了保留拇指键能力，我选择了加大按键与机械结构的间隙——其实也就是把固定螺丝松半圈。本来想换个按键的，奈何电烙铁丢老家仓库了，没办法。<br>这鼠标拆起来很容易，起开螺丝，上下壳一扒拉就开了。一共6颗螺丝，其中2颗T5螺丝裸露在充电口两侧，另外左右两块橡胶垫下各有2颗M2螺丝。橡胶垫本来应该用热风枪的，可惜家里没有，就暴力硬撕了，事后涂点胶再粘上。扒开外壳，中间有一根FFC排线要小心断开。拇指键分板固定在上壳，由两颗黑色螺丝固定，拧松个半圈就够了。<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/Ozbn1X.webp" alt="内部结构"><br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/OzbiMi.webp" alt="拇指键模块背面"><br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/Ozb1Ht.webp" alt="拇指键模块正面"></p><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>这款鼠标的滚轮实在是太糙了，中间的橡胶圈老化的很厉害，边缘还会产生一圈类似铜绿的锈渍，这东西还越擦越脏，简直惨不忍睹。淘宝倒是有配套的全金属滚轮模组卖，不过价格不便宜，也有些小毛病，想想还是算了，不如攒钱买Master3。</p>]]></content>
      
      
      <categories>
          
          <category> 生活日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>雾屿蓝</title>
      <link href="/post/2f20fd25.html"/>
      <url>/post/2f20fd25.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/OxJTnB.webp" alt="罗翔"></p><ol><li><p>古希腊哲学家爱比荷泰德说：“我们登上并非我们所选择的舞台，演绎并非我们所选择的剧本。”谁的剧本是自己选的？大家有时是不是很羡慕别人家的剧本？我有时也很羡慕别人的剧本，但是没办法，你的剧本不是你选择的。你只能选择努力演好你的剧本。虽然很痛苦，但只要努力演好，痛苦中也有精彩。</p><p align="right">——罗翔《圆圈正义》</p></li><li><p>唯有真理的光照，才能学会谦卑，走出自我的偏狭，而自由而不放纵，独立而不狂狷，尽责而不懈怠。</p><p align="right">——罗翔《圆圈正义》</p></li><li><p>我们必须接受这样一个事实，那就是没有人能活在确定性之中，对人生而言，我们唯一能确定的就是不确定的人生。</p><p align="right">——罗翔《圆圈正义》</p></li><li><p>我们常说天道酬勤，但事实上，人生的许多成就，个人的努力虽然重要，但自己所能决定的其实很少。有许多重要的关头，许多的贵人相助其实是可遇不可求的。所以只能以感恩的心来接受，并希望在自己有能力和有机会时也能够去祝福他人。</p><p align="right">——罗翔《圆圈正义》</p></li><li><p>当伸出一个手指指责他人，会有四个手指头对着自己。</p><p align="right">——罗翔《圆圈正义》</p></li><li><p>不要对人性抱以过高的期待，永远要警惕人性深处的幽暗。法治的前提就是对人性败坏的假设，所以任何人组成的权力机构都要受到法律严格的约束，权力从来就不应被完全信任。如果抛弃了这个假设，认为人性良善，法治也一定会为人治所取代，对人性美好的假设往往都带来了空前的灾难。</p><p align="right">——罗翔《圆圈正义》</p></li><li><p>有时看到别人对我的批评，尤其是无理的指责，我也非常生气。但这个时候总有声音在提醒我，批评可以戳破人自恋的幻象，给人虚荣的气球放放气，让人不至于飘到无边的高处。在坚实的地面上，人才能有真实的生活。走出自恋，走出仇恨，成为一个真正富裕的人。</p><p align="right">——罗翔《圆圈正义》</p></li><li><p>功利性读书让你只想成功，无法接受失败。但我始终认为，一个人的真正成功不是在于你取得多少辉煌，而是在挫折中，你能不能勇敢地爬起来。只有非功利性阅读，才能让你坦然接受失败。在大量与功利无关的文学作品、名人传记中，主人公的失败、困苦、绝望比比皆是。那么多伟大的灵魂，他们也曾有跌倒的时候，你为什么不能跌倒？</p><p align="right">——罗翔《圆圈正义》</p></li><li><p>道德的使命首先是自律，而非他律，道德谴责的第一步永远是对自己发出的，我们必须先质问自己，在相似的情景下，我们会如何行为？</p><p align="right">——罗翔《圆圈正义》</p></li><li><p>伪善的人最喜欢空谈崇高的话题。他们活在崇高的理念之下，用这种理念逃避对具体个体的责任，为自己的虚伪披上神圣的外袍。</p><p align="right">——罗翔《圆圈正义》</p></li><li><p>我们必须接受失望，因为失望是有限的，但我们永远不能放弃希望，因为希望是无限的。</p><p align="right">——马丁·路德·金</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 诗和远方 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哲学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LDO和DCDC</title>
      <link href="/post/7c8508a1.html"/>
      <url>/post/7c8508a1.html</url>
      
        <content type="html"><![CDATA[<h2 id="LDO"><a href="#LDO" class="headerlink" title="LDO"></a>LDO</h2><p>LDO（Low-Dropout Regulator，低压差稳压器），又称低压差线性稳压器、低压降稳压器，是线性直流稳压器（Linear Regulator）的一种，用途同是提供稳定的直流电压电源。相比于一般线性直流稳压器，低压差稳压器能于更小输出输入电压差的情况下工作。</p><p>注意，LDO是特指线性稳压器中损耗电压（drop-out voltage）较小的那一类。像经典的LM7805，只有输入电压在7伏以上的时候才能稳定输出5伏，也就是损耗高达2伏，这种线性稳压器就不是LDO。一般现代化的LDO经常有损耗低到0.2、0.3伏的。</p><p>常见的LDO器件有很多，比如我们熟悉的1117芯片，它可以把外界的5V输入电压转换成内部其他芯片所需要的3.3V电压。<br>根据制造厂商不同，前缀也不同，常见的就是AMS公司生产的<strong>AMS1117</strong>型号芯片，但是目前山寨较多。根据<a href="https://www.bilibili.com/video/BV1464y1v7Jd/?spm_id_from=333.337.search-card.all.click">工科男孙老师</a>的评测，TI公司的TLV1117性能最佳，长晶的CJT1117性价比最高，山寨的AMS1117不建议使用。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/OoDIBg.webp" alt=""></p><p>在使用方面需要注意的一点是，因为钽电容的寄生电阻较大，陶瓷电容的寄生电阻较小，而1117的稳定工作正是需要寄生电阻，所以在电路中，我们的输出滤波电容尽量使用钽电容，而不要使用陶瓷电容（mlcc，Multi-LayerCeramicCapacitor），否则会产生更大的纹波，导致电路的不稳定。另外1117还有一些缺点，比如体积太大，还有静态电流过高，一般在mA级别，不适合低功耗场景。</p><blockquote><p>LDO的缺点：<br>在高压差、大电流的情况下很容易发烫。LDO内部相当于有个可调电阻来控制输出的电压，多余的电压由内部可调电阻消耗掉，转换效率会比较低</p></blockquote><h3 id="LDO稳压原理"><a href="#LDO稳压原理" class="headerlink" title="LDO稳压原理"></a>LDO稳压原理</h3><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/OoV9k1.png" alt=""></p><p>LDO内部电路一般包括：基准电压、分压取样电路、误差放大电路、调整电路四个模块。LDO的原理是通过内部的反馈回路来监测输出电压，当输出电压偏离设定值时，控制回路会调整放大器的工作状态，使输出电压回到设定值附近。因此，LDO可以有效地抑制输入电压和负载变化对输出电压的影响，从而提供稳定的电源。</p><h3 id="LDO功耗计算"><a href="#LDO功耗计算" class="headerlink" title="LDO功耗计算"></a>LDO功耗计算</h3><p>LDO消耗的功率可以用如下的公式计算，其中 <script type="math/tex">I_B</script> 是静态电流，一般来说远小于 <script type="math/tex">I_{OUT}</script>，所以可以忽略，LDO功率就近似等于输入输出电压差与输出电流的乘积。</p><script type="math/tex; mode=display">P=(V_{IN}-V_{OUT}) × I_{OUT} + V_{IN}×I_B</script><h3 id="LDO温升计算"><a href="#LDO温升计算" class="headerlink" title="LDO温升计算"></a>LDO温升计算</h3><p>温升计算可以按下面的公式，其中P是LDO消耗的功率，<script type="math/tex">R_{th}</script> 是LDO的热阻，这个参数可以在LDO的规格书中找到，<script type="math/tex">T_a</script> 是环境温度，有了这三个参数，我们就能计算出LDO工作时的温度。</p><script type="math/tex; mode=display">T_j=P×R_{th(j-a)}+T_a</script><h2 id="DCDC"><a href="#DCDC" class="headerlink" title="DCDC"></a>DCDC</h2><p>DC/DC，直流-直流变换器，也叫switching regulator，即开关稳压器，或者叫 <strong>开关电源</strong> 。</p><blockquote><p>SMPS：</p><p>Switching Mode Power Supply，开关模式电源。根据输入及输出电压形式的不同，包括：<br>交流-交流（AC/AC）变换器：变频器、变压器<br>交流-直流（AC/DC）变换器：整流器<br>直流-交流（DC/AC）变换器：逆变器<br>直流-直流（DC/DC）变换器：电压变换器、电流变换器</p></blockquote><p>DC/DC按电压等级变换关系分 <strong>升压电源</strong> 和 <strong>降压电源</strong> 两类，按输入输出关系分 <strong>隔离电源</strong> 和 <strong>无隔离电源</strong> 两类。<br>例如，降压斩波器（Buck Converter）只能降压不能升压，升压斩波器（Boost Converter） 只能升压不能降压。而降压-升压斩波器（Buck-Boost Converter），则能做到既可以降压又可以升压。</p><p>DCDC内部相当于有一个周期性开闭的开关，通过控制开关的时间间隔来控制输出的电压（例如12V转5V的开关电源其PWM高低电平占空比就为5:7），所以发热就会小的多，转换效率也可以达到很高。但由于周期性的开关，所以也会导致输出纹波较大，电源平稳度不太高，而且由于会产生PWM波，其所需要的周边电路也会比LDO器件更加复杂。</p><div class="table-container"><table><thead><tr><th style="text-align:center">LDO</th><th style="text-align:center">DCDC</th></tr></thead><tbody><tr><td style="text-align:center">适合低压差小电流场景</td><td style="text-align:center">适合高压差大电流场景</td></tr><tr><td style="text-align:center">纹波小</td><td style="text-align:center">纹波大</td></tr><tr><td style="text-align:center">效率低</td><td style="text-align:center">效率高</td></tr><tr><td style="text-align:center">发热高</td><td style="text-align:center">发热低</td></tr><tr><td style="text-align:center">成本低</td><td style="text-align:center">成本高</td></tr><tr><td style="text-align:center">周边电路简单</td><td style="text-align:center">周边电路复杂</td></tr><tr><td style="text-align:center">静态功耗低</td><td style="text-align:center">静态功耗高</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> 硬件知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 电源 </tag>
            
            <tag> 稳压器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>超级圆角</title>
      <link href="/post/7c589660.html"/>
      <url>/post/7c589660.html</url>
      
        <content type="html"><![CDATA[<p>在前端设计中，常使用border-radius属性构造圆角矩形，以形成视觉上的美感。在工业设计中，也存在大量圆角过渡设计。在工业设计中，根据两条线连接的方式，划分了G0-G4五个等级<span class="hidden-anchor" id="referto_[1]"></span><sup class="reference"><a href="#referfrom_[1]">[1]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature"></span><span class="reference-title">参考资料</span></span></span>。</p><ul><li>G0——点连续：只要两个点碰到就可以；</li><li>G1——相切连续：没有棱角，所有点之间都是相切关系；</li><li>G2——曲率连续：平滑过渡，曲率是连续变化的；</li><li>G3——曲率变化率连续：更平滑，曲率的变化率也是连续的；</li><li>G4——曲率变化率的变化率连续：极致丝滑。</li></ul><p>我们常用的border-radius可以实现G1级别的切线连续圆角，而现在，越来越多的设计开始使用G2以上级别的圆角。G2以上级别的圆角过渡更加平滑，也更美观、更耐看。<br>目前博客的音乐控制器、小组件等就是采用的G2级别的曲率连续圆角。<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/YzpDX.webp" alt=""></p><center style='font-size:1.1rem'>图1 切线连续圆角（左）与曲率连续圆角（右）对比<span class="hidden-anchor" id="referto_[2]"></span><sup class="reference"><a href="#referfrom_[2]">[2]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature"></span><span class="reference-title">参考资料</span></span></span></center><h2 id="新建paint-js"><a href="#新建paint-js" class="headerlink" title="新建paint.js"></a>新建paint.js</h2><p>在路径<code>source/js</code>文件夹下新建一个<code>paint.js</code>文件，代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SmoothCorners</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">inputProperties</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&#x27;--smooth-level&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">paint</span>(<span class="params">ctx, geom, properties</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> radius = <span class="built_in">parseInt</span>(properties.<span class="title function_">get</span>(<span class="string">&#x27;--smooth-level&#x27;</span>).<span class="title function_">toString</span>());</span><br><span class="line">        <span class="keyword">const</span> path = <span class="keyword">new</span> <span class="title class_">Path2D</span>();</span><br><span class="line">        path.<span class="title function_">moveTo</span>(radius, <span class="number">0</span>);</span><br><span class="line">        path.<span class="title function_">lineTo</span>(geom.<span class="property">width</span> - radius, <span class="number">0</span>);</span><br><span class="line">        path.<span class="title function_">quadraticCurveTo</span>(geom.<span class="property">width</span>, <span class="number">0</span>, geom.<span class="property">width</span>, radius);</span><br><span class="line">        path.<span class="title function_">lineTo</span>(geom.<span class="property">width</span>, geom.<span class="property">height</span> - radius);</span><br><span class="line">        path.<span class="title function_">quadraticCurveTo</span>(geom.<span class="property">width</span>, geom.<span class="property">height</span>, geom.<span class="property">width</span> - radius, geom.<span class="property">height</span>);</span><br><span class="line">        path.<span class="title function_">lineTo</span>(radius, geom.<span class="property">height</span>);</span><br><span class="line">        path.<span class="title function_">quadraticCurveTo</span>(<span class="number">0</span>, geom.<span class="property">height</span>, <span class="number">0</span>, geom.<span class="property">height</span> - radius);</span><br><span class="line">        path.<span class="title function_">lineTo</span>(<span class="number">0</span>, radius);</span><br><span class="line">        path.<span class="title function_">quadraticCurveTo</span>(<span class="number">0</span>, <span class="number">0</span>, radius, <span class="number">0</span>);</span><br><span class="line">        ctx.<span class="title function_">fill</span>(path);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">registerPaint</span>(<span class="string">&#x27;smooth-corners&#x27;</span>, <span class="title class_">SmoothCorners</span>);</span><br></pre></td></tr></table></figure><h2 id="注册为Paint-Worklet"><a href="#注册为Paint-Worklet" class="headerlink" title="注册为Paint Worklet"></a>注册为Paint Worklet</h2><p>在自建js函数中加入以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;paintWorklet&#x27;</span> <span class="keyword">in</span> <span class="variable constant_">CSS</span>) &#123;<span class="variable constant_">CSS</span>.<span class="property">paintWorklet</span>.<span class="title function_">addModule</span>(<span class="string">&#x27;js/paint.js&#x27;</span>);&#125;</span><br></pre></td></tr></table></figure><p>或者，也可以在主题设置文件<code>_config.butterfly.yml</code>中更改：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+    - &lt;script&gt;if (&#x27;paintWorklet&#x27; in CSS) &#123;CSS.paintWorklet.addModule(&#x27;js/paint.js&#x27;);&#125;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p>在对应样式中添加以下属性参数即可，此时主要通过<code>--smooth-level</code>值调整圆角大小。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-radius</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">mask-image</span>: <span class="built_in">paint</span>(smooth-corners);</span><br><span class="line">-webkit-<span class="attribute">mask-image</span>: <span class="built_in">paint</span>(smooth-corners);</span><br><span class="line"><span class="attr">--smooth-level</span>: <span class="number">7</span>; <span class="comment">/*曲率连续圆角*/</span></span><br></pre></td></tr></table></figure><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><div class="reference-source"><span class="hidden-anchor" id="referfrom_[1]"></span><a class="reference-anchor" href="#referto_[1]">[1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://www.uisdc.com/xiaomi-logo-design">小米200万的Logo是如何绘制的？先掌握「连续曲率」知识点！</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[2]"></span><a class="reference-anchor" href="#referto_[2]">[2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://wow.techbrood.com/fiddle/60930">使用CSS Paint API实现曲率圆角效果</a></div>]]></content>
      
      
      <categories>
          
          <category> 前端后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>侧边栏组件 - 日历</title>
      <link href="/post/8b6f77a8.html"/>
      <url>/post/8b6f77a8.html</url>
      
        <content type="html"><![CDATA[<h2 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h2><p>侧边栏的开发空间很大，一些使用频率很高的功能可以集成在这里，方便我们的使用。所以我做了一个日历的小组件，样式参考的是TOP WIDGETS。<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/VmADj.webp" alt=""></p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><div class="tip info faa-horizontal animated"><p>感谢<a href="https://blog.leonus.cn/">Leonus</a>大佬提醒，漏了lunar.js和css代码，部分js另作修改，现已更正。</p></div><h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><ul><li><p><strong>lunar.js</strong><br>lunar.js是ChatGPT在Github上找的。<br><a href="https://github.com/wvv8oo/lunar/blob/master/lib/chinese-lunar.js">原作仓库地址</a></p></li><li><p><strong>demo.js</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 刷新时钟时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">cardRefreshTimes</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> a_t_r = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;aside-time-right&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (a_t_r) a_t_r.<span class="property">innerHTML</span> = now.<span class="title function_">getHours</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>) + <span class="string">&quot;:&quot;</span> + now.<span class="title function_">getMinutes</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>) + <span class="string">&quot;:&quot;</span> + now.<span class="title function_">getSeconds</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置重复执行函数，周期1000ms</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">cardRefreshTimes</span>();</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="comment">// 侧边栏日历卡片</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">cardTimes</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">        year = now.<span class="title function_">getFullYear</span>(),</span><br><span class="line">        month = now.<span class="title function_">getMonth</span>(),</span><br><span class="line">        week = now.<span class="title function_">getDay</span>(),</span><br><span class="line">        date = now.<span class="title function_">getDate</span>(), dates, weekStr, monthStr, asideTime, asideDay, asideDayNum, animalYear, ganzhiYear, lunarMon, lunarDay;</span><br><span class="line">    <span class="keyword">var</span> year_flag = year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; year % <span class="number">100</span> != <span class="number">0</span> || year % <span class="number">400</span> == <span class="number">0</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">switch</span> (week) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: weekStr = <span class="string">&quot;周日&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: weekStr = <span class="string">&quot;周一&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: weekStr = <span class="string">&quot;周二&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: weekStr = <span class="string">&quot;周三&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>: weekStr = <span class="string">&quot;周四&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>: weekStr = <span class="string">&quot;周五&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: weekStr = <span class="string">&quot;周六&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>: <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;异常情况&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (month) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: monthStr = <span class="string">&quot;一月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: monthStr = <span class="string">&quot;二月&quot;</span>; dates = year_flag ? <span class="number">29</span> : <span class="number">28</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: monthStr = <span class="string">&quot;三月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: monthStr = <span class="string">&quot;四月&quot;</span>; dates = <span class="number">30</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>: monthStr = <span class="string">&quot;五月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>: monthStr = <span class="string">&quot;六月&quot;</span>; dates = <span class="number">30</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: monthStr = <span class="string">&quot;七月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>: monthStr = <span class="string">&quot;八月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>: monthStr = <span class="string">&quot;九月&quot;</span>; dates = <span class="number">30</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>: monthStr = <span class="string">&quot;十月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">10</span>: monthStr = <span class="string">&quot;十一月&quot;</span>; dates = <span class="number">30</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">11</span>: monthStr = <span class="string">&quot;十二月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>: <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;异常情况&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> week_first = (week + <span class="number">8</span> - date % <span class="number">7</span>) % <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">var</span> count_days = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> count_flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> ds;</span><br><span class="line">    <span class="keyword">var</span> row_h = <span class="number">7</span> - week_first; <span class="comment">//第一行天数</span></span><br><span class="line">    <span class="keyword">var</span> row_f = (dates - row_h) % <span class="number">7</span>; <span class="comment">//最后一行的天数</span></span><br><span class="line">    <span class="keyword">var</span> rows = row_f == <span class="number">0</span> ? <span class="title class_">Math</span>.<span class="title function_">floor</span>((dates - row_h) / <span class="number">7</span>) + <span class="number">1</span> : <span class="title class_">Math</span>.<span class="title function_">floor</span>((dates - row_h) / <span class="number">7</span>) + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">var</span> calendar = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-main&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> gap = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-date&quot;</span>);</span><br><span class="line">    <span class="keyword">switch</span> (rows) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>: gap.<span class="property">style</span>.<span class="property">marginBottom</span> = <span class="string">&quot;&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>: gap.<span class="property">style</span>.<span class="property">marginBottom</span> = <span class="string">&quot;1.2rem&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: gap.<span class="property">style</span>.<span class="property">marginBottom</span> = <span class="string">&quot;2.4rem&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>: gap.<span class="property">style</span>.<span class="property">marginBottom</span> = <span class="string">&quot;2.4rem&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; rows; r++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (calendar.<span class="title function_">querySelector</span>(<span class="string">&quot;.calendar-r&quot;</span> + r) == <span class="literal">null</span>) &#123;</span><br><span class="line">            calendar.<span class="property">innerHTML</span> += <span class="string">&quot;&lt;div class=&#x27;calendar-r&quot;</span> + r + <span class="string">&quot;&#x27;&gt;&lt;/div&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> d = <span class="number">0</span>; d &lt; <span class="number">7</span>; d++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (r == <span class="number">0</span> &amp;&amp; d == week_first) &#123; <span class="comment">//本月第一天</span></span><br><span class="line">                count_days = <span class="number">1</span>;</span><br><span class="line">                count_flag = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count_days == date) &#123; <span class="comment">//当日日期</span></span><br><span class="line">                ds = <span class="string">&quot; class=&#x27;now&#x27;&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> ds = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (calendar.<span class="title function_">querySelector</span>(<span class="string">&quot;.calendar-r&quot;</span> + r + <span class="string">&quot; .calendar-d&quot;</span> + d + <span class="string">&quot; a&quot;</span>) == <span class="literal">null</span>) &#123;</span><br><span class="line">                calendar.<span class="title function_">querySelector</span>(<span class="string">&quot;.calendar-r&quot;</span> + r).<span class="property">innerHTML</span> += <span class="string">&quot;&lt;div class=&#x27;calendar-d&quot;</span> + d + <span class="string">&quot;&#x27;&gt;&lt;a&quot;</span> + ds + <span class="string">&quot;&gt;&quot;</span> + count_days + <span class="string">&quot;&lt;/a&gt;&lt;/div&gt;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count_days &gt;= dates) &#123;</span><br><span class="line">                count_days = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                count_flag = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count_flag) count_days += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> lunar = chineseLunar.<span class="title function_">solarToLunar</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(year, month, date));</span><br><span class="line">    animalYear = chineseLunar.<span class="title function_">format</span>(lunar, <span class="string">&quot;A&quot;</span>); <span class="comment">//生肖属相</span></span><br><span class="line">    ganzhiYear = chineseLunar.<span class="title function_">format</span>(lunar, <span class="string">&quot;T&quot;</span>).<span class="title function_">slice</span>(<span class="number">0</span>, -<span class="number">1</span>); <span class="comment">//天干地支</span></span><br><span class="line">    lunarMon = chineseLunar.<span class="title function_">format</span>(lunar, <span class="string">&quot;M&quot;</span>); <span class="comment">//月份</span></span><br><span class="line">    lunarDay = chineseLunar.<span class="title function_">format</span>(lunar, <span class="string">&quot;d&quot;</span>); <span class="comment">//日期</span></span><br><span class="line">    asideTime = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;2023/01/01 00:00:00&quot;</span>);<span class="comment">// 侧边栏倒计时</span></span><br><span class="line">    asideDay = (now - asideTime) / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>;</span><br><span class="line">    asideDayNum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(asideDay);</span><br><span class="line">    <span class="keyword">var</span> asideWeekNum = ((week - asideDayNum % <span class="number">7</span>) &gt;= <span class="number">0</span>) ? (<span class="title class_">Math</span>.<span class="title function_">ceil</span>(asideDayNum / <span class="number">7</span>)) : (<span class="title class_">Math</span>.<span class="title function_">ceil</span>(asideDayNum / <span class="number">7</span>) + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> c_m = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-month&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> c_w = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-week&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> c_d = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-date&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> c_a = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-animal&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> c_l = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-lunar&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> a_t_l = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;aside-time-left&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (c_m) c_m.<span class="property">innerHTML</span> = monthStr; <span class="comment">//月份</span></span><br><span class="line">    <span class="keyword">if</span> (c_w) c_w.<span class="property">innerHTML</span> = weekStr; <span class="comment">//星期</span></span><br><span class="line">    <span class="keyword">if</span> (c_d) c_d.<span class="property">innerHTML</span> = date.<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>); <span class="comment">//日期</span></span><br><span class="line">    <span class="keyword">if</span> (c_a) c_a.<span class="property">innerHTML</span> = ganzhiYear + animalYear + <span class="string">&quot;年&quot;</span>; <span class="comment">//年份</span></span><br><span class="line">    <span class="keyword">if</span> (c_l) c_l.<span class="property">innerHTML</span> = lunarMon + lunarDay; <span class="comment">//农历</span></span><br><span class="line">    <span class="keyword">if</span> (a_t_l) a_t_l.<span class="property">innerHTML</span> = year + <span class="string">&quot;&amp;nbsp;&amp;nbsp;&lt;a style=&#x27;font-size:1.1rem;font-weight:bold;&#x27;&gt;第&lt;/a&gt;&amp;nbsp;&quot;</span> + asideWeekNum + <span class="string">&quot;&amp;nbsp;&lt;a style=&#x27;font-size:1.1rem;font-weight:bold;&#x27;&gt;周&lt;/a&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>demo.css</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card-widget</span><span class="selector-class">.card-times</span> <span class="selector-class">.item-headline</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.card-widget</span><span class="selector-class">.card-times</span> &#123;</span><br><span class="line">    <span class="attr">--calendar-bg</span>: <span class="built_in">rgb</span>(<span class="number">244</span> <span class="number">244</span> <span class="number">244</span> / <span class="number">70%</span>);</span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">8rem</span> <span class="meta">!important</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span> <span class="selector-class">.card-widget</span><span class="selector-class">.card-times</span> &#123;</span><br><span class="line">    <span class="attr">--calendar-bg</span>: <span class="built_in">rgba</span>(<span class="number">46</span>, <span class="number">48</span>, <span class="number">51</span>, <span class="number">0.7</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.card-times</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#calendar-main</span> <span class="selector-class">.calendar-rh</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-calendar</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: fit-content;</span><br><span class="line">    <span class="attribute">display</span>: flex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-calendar</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--calendar-bg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">8rem</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-area-top</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-calendar</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: .<span class="number">5rem</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-time-left</span>,</span><br><span class="line"><span class="selector-id">#aside-time-right</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--calendar-bg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: .<span class="number">5rem</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.3rem</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">2rem</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-time-left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">64%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-time-right</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">36%</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: .<span class="number">5rem</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#calendar-area-left</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#calendar-area-right</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">70%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#calendar-month</span>,</span><br><span class="line"><span class="selector-id">#calendar-week</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1.1rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.1rem</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0096ff</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: .<span class="number">5rem</span>;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">display</span>: flex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#calendar-month</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="built_in">calc</span>(<span class="number">7.14%</span> - .<span class="number">5rem</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#calendar-date</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">3rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">3rem</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">1.2rem</span>;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">display</span>: flex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#calendar-animal</span>,</span><br><span class="line"><span class="selector-id">#calendar-lunar</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1.5rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: .<span class="number">9rem</span>;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">display</span>: flex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#calendar-main</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#calendar-main</span> <span class="selector-tag">a</span><span class="selector-class">.now</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#0096ff</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.calendar-r0</span>,</span><br><span class="line"><span class="selector-class">.calendar-r1</span>,</span><br><span class="line"><span class="selector-class">.calendar-r2</span>,</span><br><span class="line"><span class="selector-class">.calendar-r3</span>,</span><br><span class="line"><span class="selector-class">.calendar-r4</span>,</span><br><span class="line"><span class="selector-class">.calendar-rh</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1.2rem</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.calendar-d0</span>,</span><br><span class="line"><span class="selector-class">.calendar-d1</span>,</span><br><span class="line"><span class="selector-class">.calendar-d2</span>,</span><br><span class="line"><span class="selector-class">.calendar-d3</span>,</span><br><span class="line"><span class="selector-class">.calendar-d4</span>,</span><br><span class="line"><span class="selector-class">.calendar-d5</span>,</span><br><span class="line"><span class="selector-class">.calendar-d6</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">14.28%</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><div class="tip warning faa-horizontal animated"><p>以下是旧版文章</p></div><h3 id="新建widget-yml"><a href="#新建widget-yml" class="headerlink" title="新建widget.yml"></a>新建widget.yml</h3><p>在<code>source/_data</code>路径下新建一个<code>widget.yml</code>文件<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">top:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">card-times</span></span><br><span class="line">    <span class="attr">id_name:</span> </span><br><span class="line">    <span class="attr">name:</span></span><br><span class="line">    <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">html:</span></span><br><span class="line">      <span class="string">&lt;div</span> <span class="string">id=&quot;aside-area-top&quot;&gt;</span></span><br><span class="line">        <span class="string">&lt;div</span> <span class="string">id=&quot;aside-time-left&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">        <span class="string">&lt;div</span> <span class="string">id=&quot;aside-time-right&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">      <span class="string">&lt;/div&gt;</span></span><br><span class="line">      <span class="string">&lt;div</span> <span class="string">id=&quot;aside-calendar&quot;&gt;</span></span><br><span class="line">        <span class="string">&lt;div</span> <span class="string">id=&quot;calendar-area-left&quot;&gt;</span></span><br><span class="line">          <span class="string">&lt;div</span> <span class="string">id=&quot;calendar-week&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">          <span class="string">&lt;div</span> <span class="string">id=&quot;calendar-date&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">          <span class="string">&lt;div</span> <span class="string">id=&quot;calendar-animal&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">          <span class="string">&lt;div</span> <span class="string">id=&quot;calendar-lunar&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">        <span class="string">&lt;/div&gt;</span></span><br><span class="line">        <span class="string">&lt;div</span> <span class="string">id=&quot;calendar-area-right&quot;&gt;</span></span><br><span class="line">          <span class="string">&lt;div</span> <span class="string">id=&quot;calendar-month&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">          <span class="string">&lt;div</span> <span class="string">id=&quot;calendar-main&quot;&gt;</span></span><br><span class="line">            <span class="string">&lt;div</span> <span class="string">class=&quot;calendar-rh&quot;&gt;</span></span><br><span class="line">              <span class="string">&lt;div</span> <span class="string">class=&quot;calendar-d0&quot;&gt;&lt;a&gt;日&lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line">              <span class="string">&lt;div</span> <span class="string">class=&quot;calendar-d1&quot;&gt;&lt;a&gt;一&lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line">              <span class="string">&lt;div</span> <span class="string">class=&quot;calendar-d2&quot;&gt;&lt;a&gt;二&lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line">              <span class="string">&lt;div</span> <span class="string">class=&quot;calendar-d3&quot;&gt;&lt;a&gt;三&lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line">              <span class="string">&lt;div</span> <span class="string">class=&quot;calendar-d4&quot;&gt;&lt;a&gt;四&lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line">              <span class="string">&lt;div</span> <span class="string">class=&quot;calendar-d5&quot;&gt;&lt;a&gt;五&lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line">              <span class="string">&lt;div</span> <span class="string">class=&quot;calendar-d6&quot;&gt;&lt;a&gt;六&lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line">            <span class="string">&lt;/div&gt;</span></span><br><span class="line">          <span class="string">&lt;/div&gt;</span></span><br><span class="line">        <span class="string">&lt;/div&gt;</span></span><br><span class="line">      <span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="runtime-js"><a href="#runtime-js" class="headerlink" title="runtime.js"></a>runtime.js</h3><p>路径<code>source/js</code>下新建<code>runtime.js</code>文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">var</span> year, month, week, date, dates, weekStr, monthStr;</span><br><span class="line"><span class="keyword">var</span> asideTime, asideDay, asideDayNum;</span><br><span class="line"><span class="keyword">var</span> animalYear, ganzhiYear, lunarMon, lunarDay;</span><br><span class="line"><span class="title function_">cardTimes</span>();</span><br><span class="line"><span class="comment">// 刷新时钟时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">cardRefreshTimes</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a_t_r = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;aside-time-right&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(a_t_r)a_t_r.<span class="property">innerHTML</span> = now.<span class="title function_">getHours</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>) + <span class="string">&quot;:&quot;</span> + now.<span class="title function_">getMinutes</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>) + <span class="string">&quot;:&quot;</span> + now.<span class="title function_">getSeconds</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置重复执行函数，周期1000ms</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">cardRefreshTimes</span>();</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure></p><h3 id="calendar-js"><a href="#calendar-js" class="headerlink" title="calendar.js"></a>calendar.js</h3><p>路径<code>source/js</code>下新建<code>calendar.js</code>文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 侧边栏日历卡片</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">cardTimes</span>(<span class="params"></span>) &#123;</span><br><span class="line">    year = now.<span class="title function_">getFullYear</span>();</span><br><span class="line">    month = now.<span class="title function_">getMonth</span>();</span><br><span class="line">    week = now.<span class="title function_">getDay</span>();</span><br><span class="line">    date = now.<span class="title function_">getDate</span>();</span><br><span class="line">    <span class="keyword">var</span> year_flag = year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; year % <span class="number">100</span> != <span class="number">0</span> || year % <span class="number">400</span> == <span class="number">0</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">switch</span> (week) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: weekStr = <span class="string">&quot;周日&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: weekStr = <span class="string">&quot;周一&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: weekStr = <span class="string">&quot;周二&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: weekStr = <span class="string">&quot;周三&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>: weekStr = <span class="string">&quot;周四&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>: weekStr = <span class="string">&quot;周五&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: weekStr = <span class="string">&quot;周六&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>: <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;异常情况&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (month) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: monthStr = <span class="string">&quot;一月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: monthStr = <span class="string">&quot;二月&quot;</span>; dates = year_flag ? <span class="number">29</span> : <span class="number">28</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: monthStr = <span class="string">&quot;三月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: monthStr = <span class="string">&quot;四月&quot;</span>; dates = <span class="number">30</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>: monthStr = <span class="string">&quot;五月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>: monthStr = <span class="string">&quot;六月&quot;</span>; dates = <span class="number">30</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: monthStr = <span class="string">&quot;七月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>: monthStr = <span class="string">&quot;八月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>: monthStr = <span class="string">&quot;九月&quot;</span>; dates = <span class="number">30</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>: monthStr = <span class="string">&quot;十月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">10</span>: monthStr = <span class="string">&quot;十一月&quot;</span>; dates = <span class="number">30</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">11</span>: monthStr = <span class="string">&quot;十二月&quot;</span>; dates = <span class="number">31</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>: <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;异常情况&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> week_first = (week + <span class="number">8</span> - date % <span class="number">7</span>) % <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">var</span> count_days = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> count_flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> ds;</span><br><span class="line">    <span class="keyword">var</span> row_h = <span class="number">7</span> - week_first; <span class="comment">//第一行天数</span></span><br><span class="line">    <span class="keyword">var</span> row_f = (dates - row_h) % <span class="number">7</span>; <span class="comment">//最后一行的天数</span></span><br><span class="line">    <span class="keyword">var</span> rows = row_f == <span class="number">0</span> ? <span class="title class_">Math</span>.<span class="title function_">floor</span>((dates - row_h) / <span class="number">7</span>) + <span class="number">1</span> : <span class="title class_">Math</span>.<span class="title function_">floor</span>((dates - row_h) / <span class="number">7</span>) + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">var</span> calendar = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-main&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> gap = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-date&quot;</span>);</span><br><span class="line">    <span class="keyword">switch</span> (rows) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>: gap.<span class="property">style</span>.<span class="property">marginBottom</span> = <span class="string">&quot;&quot;</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>: gap.<span class="property">style</span>.<span class="property">marginBottom</span> = <span class="string">&quot;1.2rem&quot;</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: gap.<span class="property">style</span>.<span class="property">marginBottom</span> = <span class="string">&quot;2.4rem&quot;</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="attr">default</span>: gap.<span class="property">style</span>.<span class="property">marginBottom</span> = <span class="string">&quot;2.4rem&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; rows; r++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (calendar.<span class="title function_">querySelector</span>(<span class="string">&quot;.calendar-r&quot;</span> + r) == <span class="literal">null</span>) &#123;</span><br><span class="line">            calendar.<span class="property">innerHTML</span> += <span class="string">&quot;&lt;div class=&#x27;calendar-r&quot;</span>+r+<span class="string">&quot;&#x27;&gt;&lt;/div&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> d = <span class="number">0</span>; d &lt; <span class="number">7</span>; d++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (r == <span class="number">0</span> &amp;&amp; d == week_first) &#123; <span class="comment">//本月第一天</span></span><br><span class="line">                count_days = <span class="number">1</span>;</span><br><span class="line">                count_flag = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count_days == date) &#123; <span class="comment">//当日日期</span></span><br><span class="line">                ds = <span class="string">&quot; class=&#x27;now&#x27;&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> ds = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (calendar.<span class="title function_">querySelector</span>(<span class="string">&quot;.calendar-r&quot;</span> + r + <span class="string">&quot; .calendar-d&quot;</span> + d + <span class="string">&quot; a&quot;</span>) == <span class="literal">null</span>) &#123;</span><br><span class="line">                calendar.<span class="title function_">querySelector</span>(<span class="string">&quot;.calendar-r&quot;</span>+r).<span class="property">innerHTML</span> += <span class="string">&quot;&lt;div class=&#x27;calendar-d&quot;</span>+d+<span class="string">&quot;&#x27;&gt;&lt;a&quot;</span>+ds+<span class="string">&quot;&gt;&quot;</span>+count_days+<span class="string">&quot;&lt;/a&gt;&lt;/div&gt;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count_days &gt;= dates) &#123;</span><br><span class="line">                count_days = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                count_flag = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count_flag) count_days += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> lunar = chineseLunar.<span class="title function_">solarToLunar</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(year, month, date));</span><br><span class="line">    animalYear = chineseLunar.<span class="title function_">format</span>(lunar, <span class="string">&quot;A&quot;</span>); <span class="comment">//生肖属相</span></span><br><span class="line">    ganzhiYear = chineseLunar.<span class="title function_">format</span>(lunar, <span class="string">&quot;T&quot;</span>).<span class="title function_">slice</span>(<span class="number">0</span>, -<span class="number">1</span>); <span class="comment">//天干地支</span></span><br><span class="line">    lunarMon = chineseLunar.<span class="title function_">format</span>(lunar, <span class="string">&quot;M&quot;</span>); <span class="comment">//月份</span></span><br><span class="line">    lunarDay = chineseLunar.<span class="title function_">format</span>(lunar, <span class="string">&quot;d&quot;</span>); <span class="comment">//日期</span></span><br><span class="line">    asideTime = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;2023/01/01 00:00:00&quot;</span>);<span class="comment">// 侧边栏倒计时</span></span><br><span class="line">    asideDay = (now - asideTime) / <span class="number">1e3</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>;</span><br><span class="line">    asideDayNum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(asideDay);</span><br><span class="line">    <span class="keyword">var</span> asideWeekNum = ((week - asideDayNum % <span class="number">7</span>) &gt;= <span class="number">0</span>) ? (<span class="title class_">Math</span>.<span class="title function_">ceil</span>(asideDayNum / <span class="number">7</span>)) : (<span class="title class_">Math</span>.<span class="title function_">ceil</span>(asideDayNum / <span class="number">7</span>) + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> c_m = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-month&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> c_w = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-week&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> c_d = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-date&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> c_a = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-animal&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> c_l = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;calendar-lunar&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> a_t_l = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;aside-time-left&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (c_m) c_m.<span class="property">innerHTML</span> = monthStr; <span class="comment">//月份</span></span><br><span class="line">    <span class="keyword">if</span> (c_w) c_w.<span class="property">innerHTML</span> = weekStr; <span class="comment">//星期</span></span><br><span class="line">    <span class="keyword">if</span> (c_d) c_d.<span class="property">innerHTML</span> = date.<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>); <span class="comment">//日期</span></span><br><span class="line">    <span class="keyword">if</span> (c_a) c_a.<span class="property">innerHTML</span> = ganzhiYear + animalYear + <span class="string">&quot;年&quot;</span>; <span class="comment">//年份</span></span><br><span class="line">    <span class="keyword">if</span> (c_l) c_l.<span class="property">innerHTML</span> = lunarMon + lunarDay; <span class="comment">//农历</span></span><br><span class="line">    <span class="keyword">if</span> (a_t_l) a_t_l.<span class="property">innerHTML</span> = year + <span class="string">&quot;&amp;nbsp;&amp;nbsp;&lt;a style=&#x27;font-size:1.1rem;font-weight:bold;&#x27;&gt;第&lt;/a&gt;&amp;nbsp;&quot;</span> + asideWeekNum + <span class="string">&quot;&amp;nbsp;&lt;a style=&#x27;font-size:1.1rem;font-weight:bold;&#x27;&gt;周&lt;/a&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="pjax适配"><a href="#pjax适配" class="headerlink" title="pjax适配"></a>pjax适配</h3><p>在<code>whenDOMReady()</code>里加入<code>cardTimes()</code>函数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">whenDOMReady</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// pjax加载完成（切换页面）后需要执行的函数和代码</span></span><br><span class="line">    <span class="title function_">cardTimes</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ***********</span></span><br><span class="line"><span class="comment">// 其他代码放中间</span></span><br><span class="line"><span class="comment">// ***********</span></span><br><span class="line"><span class="title function_">whenDOMReady</span>(); <span class="comment">// 打开网站先执行一次</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:complete&quot;</span>, whenDOMReady); <span class="comment">// pjax加载完成（切换页面）后再执行一次</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用Vercel + OneDrive搭建个人网盘</title>
      <link href="/post/e87ec7ea.html"/>
      <url>/post/e87ec7ea.html</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>基于开源项目 <a href="https://github.com/spencerwooo/onedrive-vercel-index">onedrive-vercel-index</a> ，搭建本博客配套的个人网盘——藏兵谷。<br><img src="https://s2.loli.net/2023/02/25/6tjdMl2kRUxO5DW.webp" alt=""></p><h2 id="为什么"><a href="#为什么" class="headerlink" title="为什么"></a>为什么</h2><p>这个问题得从上一个项目——音乐控制器说起。<br>看过站长介绍应该知道我喜欢听周杰伦的歌，你说我好不容易整了这么多音乐播放器，结果还听不了我喜欢的歌，那不白搭么。由于版权问题，无法在线获取VIP曲目，所以一般采用的方法就是把音乐资源存在自己的服务器上，通过直链在线读取。<br>但是我没有服务器，这就得操作操作了。<br>我先是找了一些百度网盘、阿里网盘等转直链的插件，可插件生成的直链用在aplayer上总是无法读取，pass。接着尝试用gitee做仓储仓库，gitee各种限制，每次上传20个文件，文件大小不超过10M，最后还做不了直链，想来应该是早就禁止了。于是换github建存储仓库，这里上传文件没有什么限制，起初尝试了一下jsDeliver加速，aplayer上无法读取，只好部署到vercel，这次aplayer终于可以读取，就是速度方面实在感人，最重要的是文件管理很不方便，但总算是能听周董啦。后来我在github看到了 <a href="https://github.com/spencerwooo/onedrive-vercel-index">onedrive-vercel-index</a> 这个开源项目，觉得优点还蛮多的，就有了做个人网盘的想法。</p><h2 id="有什么用"><a href="#有什么用" class="headerlink" title="有什么用"></a>有什么用</h2><ol><li>图片只能存图片，那么个人网盘则可以存放网站所需的其他类型的文件，无需花钱购买云服务。</li><li>微软<code>E5账号</code>可免费获得<code>Microsoft 365全家桶</code>，以及<code>OneDrive 5T网盘空间</code>，为期90天。</li><li>搭建个人网盘后，微软会自动帮你续期上条优惠，不用单独配置续期脚本，等于白嫖。</li><li>作为网盘功能也不少，支持直链下载，支持多文件打包下载；支持超多文件格式在线预览，支持多种视频格式在线播放。</li></ol><h2 id="怎么做"><a href="#怎么做" class="headerlink" title="怎么做"></a>怎么做</h2><p>官方手册：<a href="https://ovi.swo.moe/zh/docs/getting-started">https://ovi.swo.moe/zh/docs/getting-started</a><br>关于E5账号：<br><a href="https://zhuanlan.zhihu.com/p/586918075">白嫖微软E5开发者 免费使用Office正版、OneDrive 5T存储空间！</a><br>参考教程：<br><a href="https://blog.qinglin.co/2562.html">利用vercel零成本搭建oneindex网盘</a><br><a href="https://www.iamdt.cn/archives/22/">免费搭建你的OneDrive公共网盘——Vercel特供版</a></p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>跟着教程走基本没什么问题，但我用了三天后出现了编号<code>500</code>报错，通过翻阅Discussions，我尝试了删除redis缓存然后重新认证的方法，问题解决。<br>更多问题可在Discussions里找到解决办法。</p><p><strong>目前，参星阁主页和 <a href="https://music.gavin-chen.top">“幻音坊”</a> 皆已添加周董专属歌单，共有经典曲目39首。</strong></p>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> APlayer </tag>
            
            <tag> 网盘 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>控制中心 - 音乐控制器（Aplayer伴侣）</title>
      <link href="/post/37b27065.html"/>
      <url>/post/37b27065.html</url>
      
        <content type="html"><![CDATA[<h2 id="构想"><a href="#构想" class="headerlink" title="构想"></a>构想</h2><ol><li>因为我的QQ是侧边隐藏的，aplayer也是侧边隐藏的，两者时常会误触，虽说各放一边就能避免这个问题，但我还是想把它做的优雅一点，毕竟这个博客就是为了Aplayer做的（认真脸）。</li><li>Aplayer本身的UI做的很不错，但按钮太小，样式太简约，不够个性化。一开始的构想是想做一个可以随处拖动的小圆球，就像iOS的AssistiveTouch小方块一样。后来看到安知鱼大佬做的音乐胶囊，非常接近我的设计预想，虽然是固定的，但也解决了和QQ侧边隐藏冲突的问题，真的是非常好看。但是看完教程后发现它无法显示歌单，而且歌词特别小，所以只能放弃了。</li><li>我开始尝试着修改Aplayer的js源码，先是歌词的样式，修改了滚动速度和歌词大小，非常成功，达到了我预想的效果，就是你们现在看到的“桌面歌词”；然后尝试查找js源码里写好的一些方法，然而我几乎为0的js水平无法让我理解源码的结构，所以尝试失败了。</li><li>终于，我翻到了Aplayer的中文文档，发现了Aplayer其实提供了很多的API接口，还有很多audio的原生属性，顿时感觉之前好傻，一下子思路顺畅了许多——既然魔改Aplayer的原UI那么困难，那么为什么不自己写个界面，然后调用API的方法呢？于是就有了现在这个音乐控制器。<br>说它是音乐控制器，其实很严谨，因为我只是给Aplayer加了个遥控器，而不是新做了一个播放器，所以功能基本上是和aplayer一样的。如果要增加其他功能，则要另写方法了。比如，在线搜索、歌曲收藏等。</li></ol><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><p>音乐控制器是控制中心下的一个模块，所以通过控制中心按钮打开。目前已实现的功能如下：<br><div class="note info modern no-icon flat"><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>歌曲信息显示：曲名、封面、歌手</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>暂停/播放</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>上一首/下一首</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>循环/随机播放</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>进度条显示/拖动控制</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>音量条显示/拖动控制</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>桌面歌词</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>歌单显示，支持切歌</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>导航栏mini音乐控制模块</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>切换其他歌单</p>           </div></div></p><h3 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h3><ol><li><p>主界面<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/cRcDK.webp" alt=""></p></li><li><p>歌单界面<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/cRd8a.webp" alt=""></p></li><li><p>导航栏迷你音乐控制器、桌面歌词</p></li></ol><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/cRVkS.webp" alt=""></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>由于其他功能还没做好，建议F12大法直接扒。<br>下面列出代码可能不适用，谨慎参考！</p><h3 id="console-pug"><a href="#console-pug" class="headerlink" title="console.pug"></a>console.pug</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">div#console</span><br><span class="line">    //- 标头</span><br><span class="line">    div.console-head</span><br><span class="line">        span 控制中心</span><br><span class="line">        div.close-btn(onclick=&quot;ctrl.hideConsole()&quot; href=&quot;javascript:void(0);&quot;)</span><br><span class="line">            i.fas.fa-circle-xmark</span><br><span class="line"></span><br><span class="line">    //- 音乐控制器</span><br><span class="line">    div.console-music-ctrl-item.item-show#console-music-item-main</span><br><span class="line">        div#console-music-cover</span><br><span class="line">        a#console-music-title 曲名</span><br><span class="line">        a#console-music-author 作者</span><br><span class="line">        div.console-progressbar-div</span><br><span class="line">            div#progress-low</span><br><span class="line">                a#progress-low-btn --:--</span><br><span class="line">            div#music-progressbar</span><br><span class="line">                div#p_bar_bg</span><br><span class="line">                    div#p_bar</span><br><span class="line">            div#progress-high</span><br><span class="line">                a#progress-high-btn --:--</span><br><span class="line">        div#console-music-ctrl-btns</span><br><span class="line">            div#music-ctrl-first</span><br><span class="line">                a#music-ctrl-btn-first</span><br><span class="line">                    i.fas.fa-shuffle</span><br><span class="line">            div#music-ctrl-left</span><br><span class="line">                a#music-ctrl-btn-left(onclick=&quot;ctrl.musicBackward()&quot; title=&quot;上一曲&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                    i.fas.fa-backward</span><br><span class="line">            div#music-ctrl-center</span><br><span class="line">                a#music-ctrl-btn-center(onclick=&quot;ctrl.musicSwitch()&quot; title=&quot;音乐开关&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                    i.fas.fa-play</span><br><span class="line">            div#music-ctrl-right</span><br><span class="line">                a#music-ctrl-btn-right(onclick=&quot;ctrl.musicForward()&quot; title=&quot;下一曲&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                    i.fas.fa-forward</span><br><span class="line">            div#music-ctrl-end</span><br><span class="line">                a#music-ctrl-btn-end</span><br><span class="line">                    i.fas.fa-indent</span><br><span class="line">        div.console-progressbar-div</span><br><span class="line">            div#volume-low</span><br><span class="line">                a#volume-low-btn</span><br><span class="line">                    i.fas.fa-volume-off</span><br><span class="line">            div#music-volumebar</span><br><span class="line">                div#v_bar_bg</span><br><span class="line">                    div#v_bar</span><br><span class="line">            div#volume-high</span><br><span class="line">                a#volume-high-btn</span><br><span class="line">                    i.fas.fa-volume-high</span><br><span class="line"></span><br><span class="line">    div.console-music-ctrl-item#console-music-item-list</span><br><span class="line">        div.console-list-head</span><br><span class="line">            a.headline 当前歌单</span><br><span class="line">            a.music-list-title 网易云</span><br><span class="line">        div.console-list-body</span><br><span class="line">            ol#console-music-list</span><br><span class="line">        div.console-list-foot</span><br><span class="line"></span><br><span class="line">    //- 系统控制按钮</span><br><span class="line">    div.console-btn-group</span><br><span class="line">        div.console-btn-item#darkItem</span><br><span class="line">            a.switchButton#darkSwitchBtn(onclick=&quot;ctrl.switchDarkMode()&quot; title=&quot;深色模式&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                i#iconDarkMode.fas.fa-moon</span><br><span class="line">        div.console-btn-item#charItem</span><br><span class="line">            a.switchButton#charSwitchBtn(type=&quot;button&quot; title=&quot;簡/繁&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                i#iconCharMode.fas(style=&quot;font-size:1.5rem;&quot;) 繁</span><br><span class="line">        div.console-btn-item#ircItem</span><br><span class="line">            a.switchButton#ircSwitchBtn(onclick=&quot;ctrl.ircShowHide()&quot; title=&quot;桌面歌词&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                i#iconIrcMode.fas(style=&quot;font-size:1.5rem;&quot;) 词</span><br><span class="line">        div.console-btn-item#asideItem</span><br><span class="line">            a.switchButton#asideSwitchBtn(onclick=&quot;ctrl.hideAsideBtn()&quot; title=&quot;单栏/双栏&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                i#iconAside.fas.fa-arrows-alt-h</span><br><span class="line"></span><br><span class="line">    div.console-mask(onclick=&quot;ctrl.consoleBackBtn()&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot;)</span><br></pre></td></tr></table></figure><h3 id="自定义CSS"><a href="#自定义CSS" class="headerlink" title="自定义CSS"></a>自定义CSS</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* *********************控制中心音乐********************* */</span></span><br><span class="line"><span class="comment">/* 隐藏原来的Aplayer */</span></span><br><span class="line"><span class="selector-class">.aplayer-body</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span> <span class="selector-class">.console-music-ctrl-item</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">1rem</span> auto <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">1.8rem</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--card-bg);</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">3.5rem</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-music-item-main</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1.3rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-music-item-main</span><span class="selector-class">.item-show</span>, </span><br><span class="line"><span class="selector-id">#console-music-item-list</span><span class="selector-class">.item-show</span>, </span><br><span class="line"><span class="selector-id">#console-music-item-lrc</span><span class="selector-class">.item-show</span>, </span><br><span class="line"><span class="selector-id">#console-songsheet-item-list</span><span class="selector-class">.item-show</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: all;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 封面 */</span></span><br><span class="line"><span class="selector-id">#console-music-cover</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="comment">/* height: calc(100% - 12rem); */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 曲名和作者 */</span></span><br><span class="line"><span class="selector-id">#console-music-title</span>,</span><br><span class="line"><span class="selector-id">#console-music-author</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-music-title</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2.4rem</span>;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.3rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-reverse);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-music-author</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1.6rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 组件外框 */</span></span><br><span class="line"><span class="selector-class">.console-progressbar-div</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-music-ctrl-btns</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#music-ctrl-first</span>, <span class="selector-id">#music-ctrl-left</span>, <span class="selector-id">#music-ctrl-center</span>, <span class="selector-id">#music-ctrl-right</span>, <span class="selector-id">#music-ctrl-end</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#music-ctrl-btn-first</span>, <span class="selector-id">#music-ctrl-btn-left</span>, <span class="selector-id">#music-ctrl-btn-center</span>, <span class="selector-id">#music-ctrl-btn-right</span>,<span class="selector-id">#music-ctrl-btn-end</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 字色和字号 */</span></span><br><span class="line"><span class="selector-id">#music-ctrl-btn-first</span>, <span class="selector-id">#music-ctrl-btn-left</span>, <span class="selector-id">#music-ctrl-btn-right</span>, <span class="selector-id">#music-ctrl-btn-end</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.console-music-ctrl-item</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color); <span class="comment">/*#99a9bf*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#music-ctrl-btn-center</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-reverse);</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2.4rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#music-ctrl-btn-first</span><span class="selector-pseudo">:hover</span>, <span class="selector-id">#music-ctrl-btn-left</span><span class="selector-pseudo">:hover</span>, <span class="selector-id">#music-ctrl-btn-right</span><span class="selector-pseudo">:hover</span>, <span class="selector-id">#music-ctrl-btn-end</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-reverse);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#progress-low-btn</span>, <span class="selector-id">#progress-high-btn</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">136</span>,<span class="number">136</span>,<span class="number">136</span>,<span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 进度条和音量条 */</span></span><br><span class="line"><span class="selector-id">#progress-low</span>, <span class="selector-id">#progress-high</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#music-progressbar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#volume-low</span>, <span class="selector-id">#volume-high</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#music-volumebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#progress-low</span>, <span class="selector-id">#progress-high</span>, <span class="selector-id">#music-progressbar</span>, </span><br><span class="line"><span class="selector-id">#volume-low</span>, <span class="selector-id">#volume-high</span>, <span class="selector-id">#music-volumebar</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#p_bar_bg</span>, <span class="selector-id">#v_bar_bg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">1rem</span>);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0.4rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0.3rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">136</span>, <span class="number">136</span>, <span class="number">136</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#p_bar</span>, <span class="selector-id">#v_bar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0.3rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 控制中心文本不可选中 */</span></span><br><span class="line"><span class="selector-id">#console</span> <span class="selector-tag">a</span>, <span class="selector-id">#console</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  user-select: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* *********************歌单显示********************** */</span></span><br><span class="line"><span class="selector-class">.console-list-head</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">border-top-left-radius</span>: <span class="number">1.8rem</span>; <span class="comment">/*和外弧度保持一致*/</span></span><br><span class="line">  <span class="attribute">border-top-right-radius</span>: <span class="number">1.8rem</span>; <span class="comment">/*和外弧度保持一致*/</span></span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--vercel-border-color);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--vercel-background);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">flex-flow</span>: column;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.console-list-foot</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1.8rem</span>; <span class="comment">/*和外弧度保持一致*/</span></span><br><span class="line">  <span class="attribute">border-bottom-left-radius</span>: <span class="number">1.8rem</span>; <span class="comment">/*和外弧度保持一致*/</span></span><br><span class="line">  <span class="attribute">border-bottom-right-radius</span>: <span class="number">1.8rem</span>; <span class="comment">/*和外弧度保持一致*/</span></span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--vercel-border-color);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--vercel-background);</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.console-list-body</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">5.8rem</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-music-list</span>, <span class="selector-id">#console-songsheet-list</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">list-style</span>: none; <span class="comment">/*消除序号*/</span></span><br><span class="line">  <span class="attribute">padding-inline-start</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-music-list</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-music-list</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--vercel-hover-bg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 隐藏滚动条 */</span></span><br><span class="line"><span class="selector-id">#console-music-list</span>::-webkit-scrollbar &#123;<span class="attribute">display</span>:none&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-music-list</span> <span class="selector-tag">li</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:first</span>-child) <span class="selector-tag">div</span><span class="selector-class">.list-music-info2</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--vercel-border-color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.list-music-info1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.list-music-info2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">2.5rem</span>);</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.list-music-author</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">136</span>,<span class="number">136</span>,<span class="number">136</span>);</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.list-music-id</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">136</span>,<span class="number">136</span>,<span class="number">136</span>);</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.list-music-id</span><span class="selector-class">.hide</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.list-music-state</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.list-music-state</span><span class="selector-class">.show</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.console-list-head</span> <span class="selector-tag">a</span><span class="selector-class">.headline</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.1rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-id">#music-list-title</span>, <span class="selector-tag">a</span><span class="selector-id">#songsheet-title</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.9rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-id">#music-list-title</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* *********************歌单列表*********************** */</span></span><br><span class="line"><span class="selector-id">#console-songsheet-list</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-songsheet-list</span> <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">3rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 取消滚动条 */</span></span><br><span class="line"><span class="selector-id">#console-songsheet-list</span>::-webkit-scrollbar &#123;<span class="attribute">display</span>:none&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-songsheet-list</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--vercel-hover-bg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-songsheet-list</span> <span class="selector-tag">li</span> <span class="selector-tag">div</span><span class="selector-class">.songsheet-info2</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--vercel-border-color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.songsheet-info1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.songsheet-info2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">2.5rem</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.list-songsheet-cover</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.list-songsheet-title</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">1.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* *************加载转圈************* */</span></span><br><span class="line"><span class="selector-id">#console-loading-icon</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-loading-icon</span><span class="selector-class">.show</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-loading-icon</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.8rem</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="自定义JS"><a href="#自定义JS" class="headerlink" title="自定义JS"></a>自定义JS</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pjax适配</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">whenDOMReady</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// pjax加载完成（切换页面）后需要执行的函数和代码</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;pjax开启&quot;</span>);</span><br><span class="line">    <span class="title function_">musicState</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 音乐状态检测（已添加事件监听器，修复点击aplayer后导航栏和控制中心不同步的问题）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">musicState</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> music_state = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">audio</span>.<span class="property">paused</span>;</span><br><span class="line">    <span class="keyword">if</span> (music_state) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#console #music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#console #music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#console #music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#console #music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">secToTime</span>(<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(s)) s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> min = <span class="title class_">Math</span>.<span class="title function_">floor</span>(s / <span class="number">60</span>);</span><br><span class="line">    <span class="keyword">var</span> sec = <span class="title class_">Math</span>.<span class="title function_">floor</span>(s % <span class="number">60</span>);</span><br><span class="line">    <span class="keyword">var</span> t = min.<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>) + <span class="string">&quot;:&quot;</span> + sec.<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ctrl = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 显示中控台</span></span><br><span class="line">    <span class="attr">showConsole</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#console-music-item-main&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#console&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        ctrl.<span class="title function_">initConsoleState</span>();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 隐藏中控台</span></span><br><span class="line">    <span class="attr">hideConsole</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> items = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.item-show&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;items.<span class="property">length</span>; i++) items[i].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#console&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 菜单返回</span></span><br><span class="line">    <span class="attr">consoleBackBtn</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> top_item = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.item-show&quot;</span>);</span><br><span class="line">        <span class="keyword">switch</span> (top_item.<span class="property">id</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;console-music-item-mini&#x27;</span>: <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;console-music-item-main&#x27;</span>: ctrl.<span class="title function_">hideConsole</span>(); <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;console-music-item-list&#x27;</span>:</span><br><span class="line">                top_item.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-item-main&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;console-songsheet-item-list&#x27;</span>:</span><br><span class="line">                top_item.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-item-list&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;console-music-item-lrc&#x27;</span>:</span><br><span class="line">                top_item.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-item-main&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="attr">default</span>: <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;异常情况&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 桌面歌词</span></span><br><span class="line">    <span class="attr">ircShowHide</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> irc = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer &gt; .aplayer-lrc-hide&quot;</span>); <span class="comment">//这里防止与音乐页面的控制冲突</span></span><br><span class="line">        <span class="keyword">if</span> (irc === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer &gt; .aplayer-lrc&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;aplayer-lrc-hide&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#ircItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;on&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer &gt; .aplayer-lrc&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;aplayer-lrc-hide&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#ircItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;on&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 导航栏音乐</span></span><br><span class="line">    <span class="attr">musicSwitch</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> music_state = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">audio</span>.<span class="property">paused</span>;</span><br><span class="line">        <span class="keyword">if</span> (music_state) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">toggle</span>();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">musicForward</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">skipForward</span>();</span><br><span class="line">        ctrl.<span class="title function_">getMusicInfo</span>();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">musicBackward</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">skipBack</span>();</span><br><span class="line">        ctrl.<span class="title function_">getMusicInfo</span>();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">getMusicInfo</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> music_id = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">list</span>.<span class="property">index</span>; <span class="comment">//当前曲目的id</span></span><br><span class="line">        <span class="keyword">var</span> music_cover = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">list</span>.<span class="property">audios</span>[music_id].<span class="property">cover</span>;</span><br><span class="line">        <span class="keyword">var</span> music_author = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">list</span>.<span class="property">audios</span>[music_id].<span class="property">author</span>;</span><br><span class="line">        <span class="keyword">var</span> music_title = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">list</span>.<span class="property">audios</span>[music_id].<span class="property">title</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-cover&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;&lt;img src=&#x27;&quot;</span> + music_cover + <span class="string">&quot;&#x27; style=&#x27;width:100%;height:100%;border-radius:0.5rem;&#x27;&gt;&quot;</span>;<span class="comment">// 歌曲信息</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-title&quot;</span>).<span class="property">innerHTML</span> = music_title;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-author&quot;</span>).<span class="property">innerHTML</span> = music_author;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 音乐进度更新</span></span><br><span class="line">    <span class="attr">refreshProgress</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> nowTime = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">audio</span>.<span class="property">currentTime</span>;<span class="comment">// 当前时间</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isNaN</span>(nowTime)) nowTime = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> nowTimeString = <span class="title function_">secToTime</span>(nowTime);</span><br><span class="line">        <span class="keyword">var</span> allTime = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">audio</span>.<span class="property">duration</span>;<span class="comment">// 总时间</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isNaN</span>(allTime)) allTime = <span class="number">0</span>; <span class="comment">//无歌曲时会返回NaN</span></span><br><span class="line">        <span class="keyword">var</span> allTimeString = <span class="title function_">secToTime</span>(allTime);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;progress-low-btn&quot;</span>).<span class="property">innerHTML</span> = nowTimeString;<span class="comment">// 进度条时间</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;progress-high-btn&quot;</span>).<span class="property">innerHTML</span> = allTimeString;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#p_bar&quot;</span>).<span class="property">style</span>.<span class="property">width</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#p_bar_bg&quot;</span>).<span class="property">offsetWidth</span> * (nowTime / allTime) + <span class="string">&quot;px&quot;</span>;<span class="comment">// 进度条进度</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 导入歌单</span></span><br><span class="line">    <span class="attr">importMusicList</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> audios = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">list</span>.<span class="property">audios</span>;</span><br><span class="line">        <span class="keyword">var</span> list_html;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; audios.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            list_html = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-list&quot;</span>).<span class="property">innerHTML</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-list&quot;</span>).<span class="property">innerHTML</span> = list_html + <span class="string">&quot;&lt;li class=&#x27;music-list-item&#x27;&gt;&lt;div class=&#x27;list-music-info1&#x27;&gt;&lt;a class=&#x27;list-music-id&#x27; data-pjax-state=&#x27;&#x27;&gt;&quot;</span> + (i + <span class="number">1</span>) + <span class="string">&quot;&lt;/a&gt;&lt;a class=&#x27;list-music-state&#x27; data-pjax-state=&#x27;&#x27;&gt;&lt;i class=&#x27;iconfont icon-waveform&#x27;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=&#x27;list-music-info2&#x27;&gt;&lt;a class=&#x27;list-music-title&#x27; data-pjax-state=&#x27;&#x27;&gt;&quot;</span> + audios[i].<span class="property">title</span> + <span class="string">&quot;&lt;/a&gt;&lt;a class=&#x27;list-music-author&#x27; data-pjax-state=&#x27;&#x27;&gt; - &quot;</span> + audios[i].<span class="property">author</span> + <span class="string">&quot;&lt;/a&gt;&lt;/div&gt;&lt;/li&gt;&quot;</span>;</span><br><span class="line">            <span class="comment">// console.log(&quot;第&quot; + (i + 1) + &quot;首导入成功！&quot;);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 歌单切换</span></span><br><span class="line">    <span class="attr">changeMusicList</span>: <span class="keyword">function</span>(<span class="params">Music_id, Music_server</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> ap = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>;</span><br><span class="line">        <span class="keyword">var</span> music_list_url_str = <span class="string">&quot;https://metingjs.gavin-chen.top/api?server=&quot;</span> + <span class="title class_">Music</span>_server + <span class="string">&quot;&amp;type=playlist&quot;</span> + <span class="string">&quot;&amp;id=&quot;</span> + <span class="title class_">Music</span>_id;</span><br><span class="line">        ap.<span class="property">list</span>.<span class="title function_">clear</span>();</span><br><span class="line">        <span class="title function_">fetch</span>(music_list_url_str).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>()).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 在这里使用返回的JSON数据</span></span><br><span class="line">            newSongsheetLen = data.<span class="property">length</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(newSongsheetLen);</span><br><span class="line">            ap.<span class="property">list</span>.<span class="title function_">add</span>(data);</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化console图标</span></span><br><span class="line">    <span class="attr">initConsoleState</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> irc = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer &gt; .aplayer-lrc-hide&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> aplayer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer &gt; .aplayer-lrc&quot;</span>);</span><br><span class="line">        irc === <span class="literal">null</span> &amp;&amp; aplayer != <span class="literal">null</span></span><br><span class="line">            ? <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#ircItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">            : <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#ircItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;on&quot;</span>);</span><br><span class="line">        saveToLocal.<span class="title function_">get</span>(<span class="string">&#x27;aside-status&#x27;</span>) === <span class="string">&#x27;hide&#x27;</span></span><br><span class="line">            ? <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#asideItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">            : <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#asideItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;on&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> console_musicBody = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#console .console-music-ctrl-item&quot;</span>); <span class="comment">// 更新控制中心尺寸</span></span><br><span class="line">        <span class="keyword">var</span> console_musicCover = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-cover&quot;</span>);</span><br><span class="line">        console_musicCover.<span class="property">style</span>.<span class="property">height</span> = console_musicCover.<span class="property">offsetWidth</span> + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">        console_musicBody.<span class="property">style</span>.<span class="property">height</span> = (console_musicCover.<span class="property">offsetWidth</span> + <span class="number">236</span>) + <span class="string">&quot;px&quot;</span>; <span class="comment">//(12rem + 1.3rem + 1.3rem) * 16 = 233.6px</span></span><br><span class="line">        ctrl.<span class="title function_">getMusicInfo</span>();</span><br><span class="line">        <span class="keyword">var</span> nowVolume = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">audio</span>.<span class="property">volume</span>;<span class="comment">// 当前音量</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#v_bar&quot;</span>).<span class="property">style</span>.<span class="property">width</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#v_bar_bg&quot;</span>).<span class="property">offsetWidth</span> * nowVolume + <span class="string">&quot;px&quot;</span>;<span class="comment">// 音量条进度</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主页/音乐列表/歌单列表 切换</span></span><br><span class="line"><span class="keyword">var</span> music_list_switch = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;music-ctrl-btn-end&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> music_list_title = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;music-list-title&quot;</span>);</span><br><span class="line">music_list_switch.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-item-main&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-item-list&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">music_list_title.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-item-list&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-songsheet-item-list&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;item-show&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 歌单列表监听器</span></span><br><span class="line"><span class="keyword">var</span> songsheet0 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;songsheet-X&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> songsheet1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;songsheet-A&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> songsheet2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;songsheet-B&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> songsheet3 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;songsheet-C&quot;</span>);</span><br><span class="line">songsheet0.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-loading-icon&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;正在切换至默认专辑&quot;</span>);</span><br><span class="line">    global_music_flag = <span class="number">1</span>;</span><br><span class="line">    ctrl.<span class="title function_">changeMusicList</span>(<span class="string">&quot;8086610771&quot;</span>,<span class="string">&quot;netease&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;music-list-title&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;网易云&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line">songsheet1.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-loading-icon&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;正在切换至纯音乐专辑&quot;</span>);</span><br><span class="line">    global_music_flag = <span class="number">1</span>;</span><br><span class="line">    ctrl.<span class="title function_">changeMusicList</span>(<span class="string">&quot;651630118&quot;</span>,<span class="string">&quot;netease&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;music-list-title&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;纯音乐&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line">songsheet2.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-loading-icon&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;正在切换至古风专辑&quot;</span>);</span><br><span class="line">    global_music_flag = <span class="number">1</span>;</span><br><span class="line">    ctrl.<span class="title function_">changeMusicList</span>(<span class="string">&quot;5296755943&quot;</span>,<span class="string">&quot;netease&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;music-list-title&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;古风&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line">songsheet3.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-loading-icon&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;正在切换至镜子Vlog专辑&quot;</span>);</span><br><span class="line">    global_music_flag = <span class="number">1</span>;</span><br><span class="line">    ctrl.<span class="title function_">changeMusicList</span>(<span class="string">&quot;4932756913&quot;</span>,<span class="string">&quot;netease&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;music-list-title&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;镜子Vlog&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 音乐列表监听器</span></span><br><span class="line"><span class="keyword">var</span> console_music_list = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-list&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> music_id = <span class="literal">null</span>;</span><br><span class="line">console_music_list.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> ap = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span></span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">target</span> &amp;&amp; e.<span class="property">target</span>.<span class="property">nodeName</span>.<span class="title function_">toUpperCase</span>() == <span class="string">&quot;LI&quot;</span>) &#123;</span><br><span class="line">        music_id = <span class="built_in">parseInt</span>(e.<span class="property">target</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.list-music-id&quot;</span>).<span class="property">innerHTML</span>);</span><br><span class="line">        ap.<span class="property">list</span>.<span class="title function_">switch</span>(music_id - <span class="number">1</span>);</span><br><span class="line">        ap.<span class="title function_">play</span>();</span><br><span class="line">        ctrl.<span class="title function_">getMusicInfo</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">target</span> &amp;&amp; e.<span class="property">target</span>.<span class="property">nodeName</span>.<span class="title function_">toUpperCase</span>() == <span class="string">&quot;DIV&quot;</span>) &#123;</span><br><span class="line">        music_id = <span class="built_in">parseInt</span>(e.<span class="property">target</span>.<span class="property">parentElement</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.list-music-id&quot;</span>).<span class="property">innerHTML</span>);</span><br><span class="line">        ap.<span class="property">list</span>.<span class="title function_">switch</span>(music_id - <span class="number">1</span>);</span><br><span class="line">        ap.<span class="title function_">play</span>();</span><br><span class="line">        ctrl.<span class="title function_">getMusicInfo</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">target</span> &amp;&amp; (e.<span class="property">target</span>.<span class="property">nodeName</span>.<span class="title function_">toUpperCase</span>() == <span class="string">&quot;A&quot;</span> || e.<span class="property">target</span>.<span class="property">nodeName</span>.<span class="title function_">toUpperCase</span>() == <span class="string">&quot;I&quot;</span>)) &#123;</span><br><span class="line">        music_id = <span class="built_in">parseInt</span>(e.<span class="property">target</span>.<span class="property">parentElement</span>.<span class="property">parentElement</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.list-music-id&quot;</span>).<span class="property">innerHTML</span>);</span><br><span class="line">        ap.<span class="property">list</span>.<span class="title function_">switch</span>(music_id - <span class="number">1</span>);</span><br><span class="line">        ap.<span class="title function_">play</span>();</span><br><span class="line">        ctrl.<span class="title function_">getMusicInfo</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="title function_">alert</span>(<span class="string">&quot;ERROR!&quot;</span>)</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 音量条监听器</span></span><br><span class="line"><span class="keyword">var</span> music_volumebar = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;music-volumebar&quot;</span>); <span class="comment">//扩大热区</span></span><br><span class="line"><span class="keyword">var</span> v_bar_bg = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;v_bar_bg&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> v_bar = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;v_bar&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> v_low = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;volume-low-btn&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> v_high = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;volume-high-btn&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> v_bar_bg_Len = v_bar_bg.<span class="property">offsetWidth</span>; <span class="comment">// 获取进度条总长Width</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 按键按下</span></span><br><span class="line">music_volumebar.<span class="title function_">addEventListener</span>(<span class="string">&quot;mousedown&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="comment">//添加监听事件</span></span><br><span class="line">    v_bar_bg.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&quot;0.6rem&quot;</span>;</span><br><span class="line">    v_bar.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    v_low.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    v_high.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> x = e.<span class="property">pageX</span>; <span class="comment">// 获取按下时鼠标初始位置 // pageX是绝对位置 offsetX是相对位置</span></span><br><span class="line">    v_bar.<span class="property">style</span>.<span class="property">width</span> = (<span class="number">0</span> + e.<span class="property">offsetX</span>) + <span class="string">&quot;px&quot;</span>; <span class="comment">// 按下时重新设置进度条</span></span><br><span class="line">    <span class="keyword">let</span> v_bar_Len = v_bar.<span class="property">offsetWidth</span>; <span class="comment">// 获取进度条的初始Width</span></span><br><span class="line">    v_bar_bg_Len = v_bar_bg.<span class="property">offsetWidth</span>;</span><br><span class="line">    <span class="keyword">let</span> newVolume = e.<span class="property">offsetX</span> / v_bar_bg_Len;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">volume</span>(newVolume, <span class="literal">true</span>); <span class="comment">// 更改音量</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="comment">// 拖动需要写到down里面</span></span><br><span class="line">        <span class="keyword">let</span> diff = x - e.<span class="property">pageX</span>; <span class="comment">// 获取移动的距离</span></span><br><span class="line">        <span class="keyword">let</span> v_bar_Len_New = v_bar_Len - diff; <span class="comment">// 计算当前进度条的Width</span></span><br><span class="line">        <span class="keyword">if</span> (v_bar_Len_New &lt; <span class="number">0</span>) &#123; <span class="comment">// 当超出进度条范围，控制</span></span><br><span class="line">            v_bar_Len_New = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (v_bar_Len_New &gt; v_bar_bg_Len) &#123;</span><br><span class="line">            v_bar_Len_New = v_bar_bg_Len;</span><br><span class="line">        &#125;</span><br><span class="line">        v_bar.<span class="property">style</span>.<span class="property">width</span> = v_bar_Len_New + <span class="string">&quot;px&quot;</span>; <span class="comment">// 更改进度条Width</span></span><br><span class="line">        newVolume = v_bar_Len_New / v_bar_bg_Len;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">volume</span>(newVolume, <span class="literal">true</span>); <span class="comment">// 更改音量</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触摸按下</span></span><br><span class="line">music_volumebar.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchstart&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="comment">//添加监听事件</span></span><br><span class="line">    v_bar_bg.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&quot;0.6rem&quot;</span>;</span><br><span class="line">    v_bar.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    v_low.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    v_high.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> x = e.<span class="property">targetTouches</span>[<span class="number">0</span>].<span class="property">pageX</span>; <span class="comment">// 获取按下时鼠标初始位置 // pageX是绝对位置 offsetX是相对位置</span></span><br><span class="line">    v_bar.<span class="property">style</span>.<span class="property">width</span> = (<span class="number">0</span> + e.<span class="property">targetTouches</span>[<span class="number">0</span>].<span class="property">offsetX</span>) + <span class="string">&quot;px&quot;</span>; <span class="comment">// 按下时重新设置进度条</span></span><br><span class="line">    <span class="keyword">let</span> v_bar_Len = v_bar.<span class="property">offsetWidth</span>; <span class="comment">// 获取进度条的初始Width</span></span><br><span class="line">    v_bar_bg_Len = v_bar_bg.<span class="property">offsetWidth</span>;</span><br><span class="line">    <span class="keyword">let</span> newVolume = e.<span class="property">targetTouches</span>[<span class="number">0</span>].<span class="property">offsetX</span> / v_bar_bg_Len;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">volume</span>(newVolume, <span class="literal">true</span>); <span class="comment">// 更改音量</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">ontouchmove</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="comment">// 拖动需要写到down里面</span></span><br><span class="line">        <span class="keyword">let</span> diff = x - e.<span class="property">targetTouches</span>[<span class="number">0</span>].<span class="property">pageX</span>; <span class="comment">// 获取移动的距离</span></span><br><span class="line">        <span class="keyword">let</span> v_bar_Len_New = v_bar_Len - diff; <span class="comment">// 计算当前进度条的Width</span></span><br><span class="line">        <span class="keyword">if</span> (v_bar_Len_New &lt; <span class="number">0</span>) &#123; <span class="comment">// 当超出进度条范围，控制</span></span><br><span class="line">            v_bar_Len_New = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (v_bar_Len_New &gt; v_bar_bg_Len) &#123;</span><br><span class="line">            v_bar_Len_New = v_bar_bg_Len;</span><br><span class="line">        &#125;</span><br><span class="line">        v_bar.<span class="property">style</span>.<span class="property">width</span> = v_bar_Len_New + <span class="string">&quot;px&quot;</span>; <span class="comment">// 更改进度条Width</span></span><br><span class="line">        newVolume = v_bar_Len_New / v_bar_bg_Len;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">volume</span>(newVolume, <span class="literal">true</span>); <span class="comment">// 更改音量</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 进度条监听器</span></span><br><span class="line"><span class="keyword">var</span> music_progressbar = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;music-progressbar&quot;</span>); <span class="comment">//扩大热区</span></span><br><span class="line"><span class="keyword">var</span> p_bar_bg = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p_bar_bg&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> p_bar = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;p_bar&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> p_low = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;progress-low-btn&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> p_high = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;progress-high-btn&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> p_bar_Len_New = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> p_bar_bg_Len = p_bar_bg.<span class="property">offsetWidth</span>; <span class="comment">// 获取进度条总长Width</span></span><br><span class="line"><span class="keyword">var</span> ctrl_flag = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> mousemove_flag = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按键按下</span></span><br><span class="line">music_progressbar.<span class="title function_">addEventListener</span>(<span class="string">&quot;mousedown&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="comment">//添加监听事件</span></span><br><span class="line">    p_bar_bg.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&quot;0.6rem&quot;</span>;</span><br><span class="line">    p_bar.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    p_low.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    p_high.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    ctrl_flag = <span class="number">0</span>;</span><br><span class="line">    global_music_flag = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> x = e.<span class="property">pageX</span>; <span class="comment">// 获取按下时鼠标初始位置 // pageX是绝对位置 offsetX是相对位置</span></span><br><span class="line">    <span class="keyword">let</span> p_bar_Len = p_bar.<span class="property">offsetWidth</span>; <span class="comment">// 获取进度条的初始Width</span></span><br><span class="line">    p_bar_bg_Len = p_bar_bg.<span class="property">offsetWidth</span>; <span class="comment">// 获取进度条总长Width，不知道为什么，第一次获取的值不对，这里还得再更新一次</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="comment">// 拖动需要写到down里面</span></span><br><span class="line">        <span class="keyword">let</span> diff = x - e.<span class="property">pageX</span>; <span class="comment">// 获取移动的距离</span></span><br><span class="line">        mousemove_flag = <span class="number">0</span>;</span><br><span class="line">        p_bar_Len_New = p_bar_Len - diff; <span class="comment">// 计算当前进度条的Width</span></span><br><span class="line">        <span class="keyword">if</span> (p_bar_Len_New &lt; <span class="number">0</span>) &#123; <span class="comment">// 当超出进度条范围，控制</span></span><br><span class="line">            p_bar_Len_New = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p_bar_Len_New &gt; p_bar_bg_Len) &#123;</span><br><span class="line">            p_bar_Len_New = p_bar_bg_Len;</span><br><span class="line">        &#125;</span><br><span class="line">        p_bar.<span class="property">style</span>.<span class="property">width</span> = p_bar_Len_New + <span class="string">&quot;px&quot;</span>; <span class="comment">// 更改进度条Width</span></span><br><span class="line">        <span class="keyword">let</span> all_Time = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">audio</span>.<span class="property">duration</span>;</span><br><span class="line">        <span class="keyword">let</span> current_time = (p_bar_Len_New / p_bar_bg_Len) * all_Time;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;progress-low-btn&quot;</span>).<span class="property">innerHTML</span> = <span class="title function_">secToTime</span>(current_time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触摸按下</span></span><br><span class="line">music_progressbar.<span class="title function_">addEventListener</span>(<span class="string">&quot;touchstart&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="comment">//添加监听事件</span></span><br><span class="line">    p_bar_bg.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&quot;0.6rem&quot;</span>;</span><br><span class="line">    p_bar.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    p_low.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    p_high.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--anzhiyu-reverse)&quot;</span>;</span><br><span class="line">    ctrl_flag = <span class="number">0</span>;</span><br><span class="line">    global_music_flag = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> x = e.<span class="property">targetTouches</span>[<span class="number">0</span>].<span class="property">pageX</span>; <span class="comment">// 获取按下时鼠标初始位置 // pageX是绝对位置 offsetX是相对位置</span></span><br><span class="line">    <span class="keyword">let</span> p_bar_Len = p_bar.<span class="property">offsetWidth</span>; <span class="comment">// 获取进度条的初始Width</span></span><br><span class="line">    p_bar_bg_Len = p_bar_bg.<span class="property">offsetWidth</span>; <span class="comment">// 获取进度条总长Width，不知道为什么，第一次获取的值不对，这里还得再更新一次</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">ontouchmove</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="comment">// 拖动需要写到down里面</span></span><br><span class="line">        <span class="keyword">let</span> diff = x - e.<span class="property">targetTouches</span>[<span class="number">0</span>].<span class="property">pageX</span>; <span class="comment">// 获取移动的距离</span></span><br><span class="line">        mousemove_flag = <span class="number">0</span>;</span><br><span class="line">        p_bar_Len_New = p_bar_Len - diff; <span class="comment">// 计算当前进度条的Width</span></span><br><span class="line">        <span class="keyword">if</span> (p_bar_Len_New &lt; <span class="number">0</span>) &#123; <span class="comment">// 当超出进度条范围，控制</span></span><br><span class="line">            p_bar_Len_New = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p_bar_Len_New &gt; p_bar_bg_Len) &#123;</span><br><span class="line">            p_bar_Len_New = p_bar_bg_Len;</span><br><span class="line">        &#125;</span><br><span class="line">        p_bar.<span class="property">style</span>.<span class="property">width</span> = p_bar_Len_New + <span class="string">&quot;px&quot;</span>; <span class="comment">// 更改进度条Width</span></span><br><span class="line">        <span class="keyword">let</span> all_Time = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">audio</span>.<span class="property">duration</span>;</span><br><span class="line">        <span class="keyword">let</span> current_time = (p_bar_Len_New / p_bar_bg_Len) * all_Time;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;progress-low-btn&quot;</span>).<span class="property">innerHTML</span> = <span class="title function_">secToTime</span>(current_time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按键抬起</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onmouseup</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">//当鼠标弹起的时候，不做任何操作</span></span><br><span class="line">    v_bar_bg.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&quot;0.4rem&quot;</span>;</span><br><span class="line">    v_bar.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    v_low.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    v_high.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    p_bar_bg.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&quot;0.4rem&quot;</span>;</span><br><span class="line">    p_bar.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    p_low.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    p_high.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (ctrl_flag == <span class="number">0</span> &amp;&amp; mousemove_flag == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> all_Time = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">audio</span>.<span class="property">duration</span>;</span><br><span class="line">        <span class="keyword">let</span> new_Time = (p_bar_Len_New / p_bar_bg_Len) * all_Time;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">seek</span>(new_Time); <span class="comment">//更改进度</span></span><br><span class="line">    &#125;</span><br><span class="line">    global_music_flag = <span class="number">0</span>;</span><br><span class="line">    ctrl_flag = <span class="number">1</span>;</span><br><span class="line">    mousemove_flag = <span class="number">1</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触摸抬起</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">ontouchend</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    v_bar_bg.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&quot;0.4rem&quot;</span>;</span><br><span class="line">    v_bar.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    v_low.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    v_high.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    p_bar_bg.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&quot;0.4rem&quot;</span>;</span><br><span class="line">    p_bar.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    p_low.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    p_high.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;var(--font-color)&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (ctrl_flag == <span class="number">0</span> &amp;&amp; mousemove_flag == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> all_Time = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">audio</span>.<span class="property">duration</span>;</span><br><span class="line">        <span class="keyword">let</span> new_Time = (p_bar_Len_New / p_bar_bg_Len) * all_Time;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">seek</span>(new_Time); <span class="comment">//更改进度</span></span><br><span class="line">    &#125;</span><br><span class="line">    global_music_flag = <span class="number">0</span>;</span><br><span class="line">    ctrl_flag = <span class="number">1</span>;</span><br><span class="line">    mousemove_flag = <span class="number">1</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">ontouchmove</span> = <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// runtime</span></span><br><span class="line"><span class="keyword">var</span> global_music_flag = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> meting_load = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> listener = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> old_music_id = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> now_music_id = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> newSongsheetLen = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> t_load;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置重复执行函数，周期100ms</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span> != <span class="literal">undefined</span>) meting_load = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (meting_load == <span class="number">0</span> &amp;&amp; listener == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 监测aplayer加载完开始注入音乐列表</span></span><br><span class="line">        ctrl.importMusicList();</span><br><span class="line">        <span class="comment">// 音乐开始与暂停监听</span></span><br><span class="line">        <span class="keyword">var</span> ap = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>;</span><br><span class="line">        ap.<span class="title function_">on</span>(<span class="string">&#x27;play&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            ctrl.<span class="title function_">getMusicInfo</span>();</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-play&quot;</span>);<span class="comment">// 更新播放/暂停键</span></span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">            old_music_id = now_music_id;<span class="comment">// 更新列表标志</span></span><br><span class="line">            now_music_id = ap.<span class="property">list</span>.<span class="property">index</span>;</span><br><span class="line">            <span class="keyword">var</span> ids = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#console-music-list .list-music-id&quot;</span>);</span><br><span class="line">            <span class="keyword">var</span> states = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#console-music-list .list-music-state&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; ids.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">parseInt</span>(ids[i].<span class="property">innerHTML</span>) == now_music_id + <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (old_music_id != <span class="literal">null</span>) &#123;</span><br><span class="line">                        ids[old_music_id].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;hide&quot;</span>);</span><br><span class="line">                        states[old_music_id].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">                        ids[old_music_id].<span class="property">parentElement</span>.<span class="property">parentElement</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    ids[now_music_id].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;hide&quot;</span>);</span><br><span class="line">                    states[now_music_id].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">                    ids[now_music_id].<span class="property">parentElement</span>.<span class="property">parentElement</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;var(--vercel-hover-bg)&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        ap.<span class="title function_">on</span>(<span class="string">&#x27;pause&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-ctrl-btn-center i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 播放模式按钮监听（循环 / 随机）</span></span><br><span class="line">        <span class="keyword">var</span> play_mode = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;music-ctrl-btn-first&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> ap_play_mode = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer-icon.aplayer-icon-order&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> loop_str = <span class="string">&#x27;&lt;path d=&quot;M0.622 18.334h19.54v7.55l11.052-9.412-11.052-9.413v7.549h-19.54v3.725z&quot;&gt;&lt;/path&gt;&#x27;</span>;</span><br><span class="line">        <span class="keyword">var</span> random_str = <span class="string">&#x27;&lt;path d=&quot;M22.667 4l7 6-7 6 7 6-7 6v-4h-3.653l-3.76-3.76 2.827-2.827 2.587 2.587h2v-8h-2l-12 12h-6v-4h4.347l12-12h3.653v-4zM2.667 8h6l3.76 3.76-2.827 2.827-2.587-2.587h-4.347v-4z&quot;&gt;&lt;/path&gt;&#x27;</span>;</span><br><span class="line">        play_mode.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> ap_play_mode_str = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer-icon.aplayer-icon-order svg path&quot;</span>).<span class="property">outerHTML</span>;</span><br><span class="line">            <span class="keyword">if</span> (ap_play_mode_str == loop_str) &#123;</span><br><span class="line">                play_mode.<span class="title function_">querySelector</span>(<span class="string">&quot;i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-repeat&quot;</span>);</span><br><span class="line">                play_mode.<span class="title function_">querySelector</span>(<span class="string">&quot;i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-shuffle&quot;</span>);</span><br><span class="line">                ap_play_mode.<span class="title function_">click</span>();</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ap_play_mode_str == random_str) &#123;</span><br><span class="line">                play_mode.<span class="title function_">querySelector</span>(<span class="string">&quot;i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-shuffle&quot;</span>);</span><br><span class="line">                play_mode.<span class="title function_">querySelector</span>(<span class="string">&quot;i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-repeat&quot;</span>);</span><br><span class="line">                ap_play_mode.<span class="title function_">click</span>();</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="title function_">alert</span>(<span class="string">&quot;程序错误，请刷新！&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        ap_play_mode.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> ap_play_mode_str = ap_play_mode.<span class="title function_">querySelector</span>(<span class="string">&quot;svg path&quot;</span>).<span class="property">outerHTML</span>;</span><br><span class="line">            <span class="keyword">if</span> (ap_play_mode_str == loop_str) &#123;</span><br><span class="line">                play_mode.<span class="title function_">querySelector</span>(<span class="string">&quot;i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-shuffle&quot;</span>);</span><br><span class="line">                play_mode.<span class="title function_">querySelector</span>(<span class="string">&quot;i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-repeat&quot;</span>);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入顺序播放模式&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ap_play_mode_str == random_str) &#123;</span><br><span class="line">                play_mode.<span class="title function_">querySelector</span>(<span class="string">&quot;i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-repeat&quot;</span>);</span><br><span class="line">                play_mode.<span class="title function_">querySelector</span>(<span class="string">&quot;i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-shuffle&quot;</span>);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;进入随机播放模式&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="title function_">alert</span>(<span class="string">&quot;程序错误，请刷新！&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 歌单切换监听</span></span><br><span class="line">        ap.<span class="title function_">on</span>(<span class="string">&quot;listclear&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-music-list&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        ap.<span class="title function_">on</span>(<span class="string">&quot;listadd&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> current_len = ap.<span class="property">list</span>.<span class="property">audios</span>.<span class="property">length</span>;</span><br><span class="line">            t_load = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                current_len = ap.<span class="property">list</span>.<span class="property">audios</span>.<span class="property">length</span>;</span><br><span class="line">                <span class="keyword">if</span> (current_len &lt; newSongsheetLen) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;current_len: &quot;</span> + current_len);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;开始导入&quot;</span>)</span><br><span class="line">                    ctrl.importMusicList();</span><br><span class="line">                    global_music_flag = <span class="number">1</span>;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;导入完毕&quot;</span>)</span><br><span class="line">                    <span class="built_in">clearInterval</span>(t_load);</span><br><span class="line">                    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;console-loading-icon&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">                    ctrl.<span class="title function_">consoleBackBtn</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="number">50</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        listener = <span class="number">1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//音乐进度更新</span></span><br><span class="line">    <span class="keyword">if</span> (meting_load == <span class="number">0</span> &amp;&amp; global_music_flag == <span class="number">0</span>) ctrl.<span class="title function_">refreshProgress</span>();</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">whenDOMReady</span>(); <span class="comment">// 打开网站先执行一次</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;pjax:complete&quot;</span>, whenDOMReady); <span class="comment">// pjax加载完成（切换页面）后再执行一次</span></span><br></pre></td></tr></table></figure><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><h3 id="控制中心"><a href="#控制中心" class="headerlink" title="控制中心"></a>控制中心</h3><p>控制中心部分可以查看<a href="https://gavin-chen.top/post/ac62cfd5.html">Hexo+Butterfly博客搭建记录（3）</a></p><h3 id="mPlayer2"><a href="#mPlayer2" class="headerlink" title="mPlayer2"></a>mPlayer2</h3><ol><li>原吸底Aplayer若想隐藏可自行添加CSS</li><li>原来坐下角APlayer的位置我放了一个mPlayer2，是<a href="https://dodododooo.com/note/">dodododooo</a>大佬做的，不仅UI精美，而且功能特别强大，支持QQ音乐、网易云、酷狗三大平台在线搜索歌曲，还有收藏功能。<br>教程超级简单，直接看他的仓库吧。<br><a href="https://github.com/dodododooo/mPlayer2">仓库地址</a><br>效果如下：<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/cY1DY.webp" alt=""></li></ol><h3 id="幻音坊"><a href="#幻音坊" class="headerlink" title="幻音坊"></a>幻音坊</h3><p><a href="https://blog.yeooe.cn/">叶椰子</a>大佬做的，模仿QQ音乐界面风格，颜值拉满！！！直接吹爆好吧！！！！！！！！！！！！！！！！！（原谅我这颜控 &gt;_&lt; ）</p><p>本来打算直接在原音乐页面上改的，但我不是一图流风格，得慢慢调才行。突然看到<a href="https://blog.zhheo.com/">Heo</a>大佬也复刻了一个，而且还是独立的域名，顿时又感觉自己太傻了（脑子真的瓦特了&gt;_&lt;）。于是乎，直接fork了Heo的github仓库，托管到vercel，到cloudflare给它配个二级域名，一套下来两三分钟搞定！</p><p><a href="https://blog.yeooe.cn/post/abd735f.html">叶椰子教程地址</a><br><a href="https://github.com/zhheo/HeoMusic">Heo仓库地址</a><br>效果如下：<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/cYn1U.webp" alt=""></p><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><h3 id="新增歌单列表"><a href="#新增歌单列表" class="headerlink" title="新增歌单列表"></a>新增歌单列表</h3><ol><li>增加了歌单列表，支持歌单切换。</li><li>页面切换添加过渡效果。</li><li>效果图：<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/dMh4l.webp" alt=""></li></ol>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> APlayer </tag>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>青山黛</title>
      <link href="/post/cddbd99a.html"/>
      <url>/post/cddbd99a.html</url>
      
        <content type="html"><![CDATA[<ol><li><p>云边有个小卖部，货架上堆着岁月和夕阳，背后就是山。老人靠着躺椅假装睡着，小孩子偷走一块糖。泪水几点钟落地，飞鸟要去向何方。人们聚和离，云朵来又往。讲故事的人，总有一个故事不愿讲。时光飞逝，悄悄话变成纸张。</p><p align="right">——张嘉佳</p></li><li><p>我愿做一枚白昼的月亮<br>不求炫目的荣华<br>不淆世俗的浪潮</p><p align="right">——顾城《白昼的月亮》</p></li><li><p>我想当一个诗人的时候，我就失去了诗，我想当一个人的时候，我就失去了我自己。在你什么也不想要的时候，一切如期而来。</p><p align="right">——顾城《执者失之》</p></li><li><p>你<br>一会看我<br>一会看云<br>我觉得<br>你看我时很远<br>你看云时很近</p><p align="right">——顾城《远和近》</p></li><li><p>你学过的每一样东西<br>你遭受的每一次苦难<br>都会在你一生中的<br>某个时候派上用场</p><p align="right">——菲茨杰拉德</p></li><li><p>围在城里的人想逃出来，站在城外的人想冲进去，婚姻也罢、事业也罢，人生的欲望大都如此。</p><p align="right">——钱钟书《围城》</p></li><li><p>一尘不染不是没有尘埃，而是尘埃任它飞扬，我自做我的阳光。</p><p align="right">——林清玄</p></li><li><p>日出未必意味着光明，太阳也无非是颗辰星而已，只有在我们醒着时，才是真正的破晓。</p><p align="right">——梭罗《瓦尔登湖》</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 诗和远方 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哲学 </tag>
            
            <tag> 情感 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Butterfly博客搭建记录（4）</title>
      <link href="/post/32065a76.html"/>
      <url>/post/32065a76.html</url>
      
        <content type="html"><![CDATA[<h2 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h2><ol><li>以前大量使用shadow，一个是因为原生主题也用（但是很浅），另一个是因为我觉得这样看起来会有立体感。现在看久了就觉得丑了，还是扁平化设计更耐看一些，或者说，好的交互界面应该让你感觉不到设计的存在。</li><li>宽屏适配。（Fomalhaut 原小冰 改唐志远）这个本来一开始就打算做的，看太多人的教程看的眼花缭乱就给忘了。。。适配后确实好看一些。</li><li>做宽屏适配了，自然也就把双栏做了。三栏目前还不太适合，毕竟文章写的还太少。</li><li>歌词在博客刚上线的时候就改过了，当时只是改了个字体颜色和大小，那颜色蓝里哇叽的，跟我QQ音乐主题色是一样的，但是毕竟背景不一样，所以这个颜色放在博客上看没几天就觉得丑死了，就改成黑灰的了，顺便把背景换成了类似苹果dock栏的样式，顿时耐看许多。然后就发现一个bug，由于current歌词字号比预览歌词字号大一节，所以在手机上显示的时候，如果歌词太长会占用两行，然后第二行（原本是预览歌词的位置）又很矮，就会显示不全。所以现在就改成两行一样高了，不过我的方式比较蠢，是直接改的Aplayer.min.js，不知道能不能在自有的js文件里改。</li><li>相册、留言板没什么好搞的，就这样了。</li><li>昨天下午开始meting就不好用了，以为是我的bug，结果去别人网站一看也都用不了，报的一样的错，可能是抽风了。今天早上七八点左右恢复了。好吧又断了。。。</li><li>新增影视页，内容暂时不多。（Leonus）</li><li>新增首页轮播图（安知鱼）</li><li>新增首页动态分类条（Heo）</li><li>导航栏不再全局常驻，改为位于顶部时透明，其余区域仍然常驻。</li><li>添加了音乐控制按钮（上一曲、暂停播放、下一曲）</li></ol><h2 id="详细步骤"><a href="#详细步骤" class="headerlink" title="详细步骤"></a>详细步骤</h2><h3 id="宽屏适配"><a href="#宽屏适配" class="headerlink" title="宽屏适配"></a>宽屏适配</h3><p>  参考博客：<br>  <div class="tag link"><a class="link-card" title="博客宽屏适配（自用）" href="https://www.fomal.cc/posts/d739261b.html#%E5%8D%9A%E5%AE%A2%E5%AE%BD%E5%B1%8F%E9%80%82%E9%85%8D%EF%BC%88%E8%87%AA%E7%94%A8%EF%BC%89"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/Fomalhaut.webp"/></div><div class="right"><p class="text">博客宽屏适配（自用）</p><p class="url">https://www.fomal.cc/posts/d739261b.html#%E5%8D%9A%E5%AE%A2%E5%AE%BD%E5%B1%8F%E9%80%82%E9%85%8D%EF%BC%88%E8%87%AA%E7%94%A8%EF%BC%89</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Fomalhaut</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p><h3 id="双栏适配"><a href="#双栏适配" class="headerlink" title="双栏适配"></a>双栏适配</h3><p>  参考博客：<br>  <div class="tag link"><a class="link-card" title="文章双侧栏显示(小冰)" href="https://www.fomal.cc/posts/eec9786.html#%E6%96%87%E7%AB%A0%E5%8F%8C%E4%BE%A7%E6%A0%8F%E6%98%BE%E7%A4%BA-%E5%B0%8F%E5%86%B0"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/Fomalhaut.webp"/></div><div class="right"><p class="text">文章双侧栏显示(小冰)</p><p class="url">https://www.fomal.cc/posts/eec9786.html#%E6%96%87%E7%AB%A0%E5%8F%8C%E4%BE%A7%E6%A0%8F%E6%98%BE%E7%A4%BA-%E5%B0%8F%E5%86%B0</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Fomalhaut</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p><p>  双栏显示我遇到一个bug，改完后第一篇post的height会稍微高一点点，跟右边的不对齐。<br>  <img src="https://s2.loli.net/2023/01/18/aT1mUSGY3LxDEd8.png" alt=""><br>  F12一下发现原来index.css里设了个margin-top，跟小冰的值不一致，给它改一样就好了。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:first</span>-child) &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="影视页"><a href="#影视页" class="headerlink" title="影视页"></a>影视页</h3><p>  参考博客：<br>  <div class="tag link"><a class="link-card" title="作品推荐卡片—butterfly主题标签外挂" href="https://blog.leonus.cn/2022/butterflyTag.html"><div class="main"><div class="left"><img src="https://q1.qlogo.cn/g?b=qq&nk=553344777&s=5"/></div><div class="right"><p class="text">作品推荐卡片—butterfly主题标签外挂</p><p class="url">https://blog.leonus.cn/2022/butterflyTag.html</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Leonus</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p><h3 id="首页轮播图"><a href="#首页轮播图" class="headerlink" title="首页轮播图"></a>首页轮播图</h3><p>  用的是安知鱼大佬的插件。<br>  参考教程：<br>  <div class="tag link"><a class="link-card" title="hexo-butterfly-swiper-anzhiyu-pro" href="https://www.npmjs.com/package/hexo-butterfly-swiper-anzhiyu-pro"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/安知鱼.webp"/></div><div class="right"><p class="text">hexo-butterfly-swiper-anzhiyu-pro</p><p class="url">https://www.npmjs.com/package/hexo-butterfly-swiper-anzhiyu-pro</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— 安知鱼</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div><br>  视频教程：<br>  <div class="tag link"><a class="link-card" title="butterfly的swiper插件(人潮汹涌)配置安装" href="https://www.bilibili.com/video/BV1RP411E7rM/?spm_id_from=333.788"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/安知鱼.webp"/></div><div class="right"><p class="text">butterfly的swiper插件(人潮汹涌)配置安装</p><p class="url">https://www.bilibili.com/video/BV1RP411E7rM/?spm_id_from=333.788</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— 安知鱼</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div><br>  我没有什么容器方便挂载，就先去加了一个空盒子。<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    if page.type !== &#x27;404&#x27;</span><br><span class="line">      #body-wrap(class=pageType)</span><br><span class="line">        include ./header/index.pug</span><br><span class="line"></span><br><span class="line"><span class="addition">+        div#home_top</span></span><br><span class="line"><span class="addition">+          div#home_top_swiper</span></span><br><span class="line"></span><br><span class="line">        main#content-inner.layout(class=hideAside)</span><br></pre></td></tr></table></figure><br>  然后在主题设置里配置相关项。<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">swiper:</span><br><span class="line">  enable: true # 开关</span><br><span class="line">  randomenable: true # 人潮汹涌开关</span><br><span class="line">  priority: 5 #过滤器优先权</span><br><span class="line">  enable_page: / # 应用页面</span><br><span class="line">  timemode: update #date/updated</span><br><span class="line">  layout: # 挂载容器类型</span><br><span class="line">    type: id</span><br><span class="line"><span class="addition">+    name: home_top_swiper</span></span><br><span class="line">    index: 1</span><br></pre></td></tr></table></figure><br>  改完组件错位了，问题不大，微调一下。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#home_top</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">5%</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">5%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">1600px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#home_top_swiper</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: auto;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">1rem</span> auto <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex<span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#swiper_container</span>, <span class="selector-class">.topGroup</span> <span class="selector-class">.top-group-list-item</span>, <span class="selector-id">#random</span>, <span class="selector-class">.categoryItem</span>, <span class="selector-class">.blog-slider__img</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0.8rem</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.blog-slider__img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">22rem</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>  轮播图改用Marcus的插件，“人来人往”动画替换成了“技能”瀑布流。<br>  参考教程：<br>  <div class="tag link"><a class="link-card" title="新版首页轮播图" href="https://blog.marcus233.top/p/hometop2.html"><div class="main"><div class="left"><img src="https://img01.anzhiy.cn/useruploads/8/2023/01/14/63c23f83f0e11.png"/></div><div class="right"><p class="text">新版首页轮播图</p><p class="url">https://blog.marcus233.top/p/hometop2.html</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Marcus</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p><h3 id="动态分类条"><a href="#动态分类条" class="headerlink" title="动态分类条"></a>动态分类条</h3><p>  参考：<br>  <div class="tag link"><a class="link-card" title="Butterfly魔改：动态分类条，可以根据页面变化而改变的分类列表展示方式" href="https://blog.zhheo.com/p/bc61964d.html"><div class="main"><div class="left"><img src="https://img.zhheo.com/i/2022/08/19/62ff32fa28da1.png"/></div><div class="right"><p class="text">Butterfly魔改：动态分类条，可以根据页面变化而改变的分类列表展示方式</p><p class="url">https://blog.zhheo.com/p/bc61964d.html</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— 张洪Heo</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p><p>  如果自动扒取分类参数，或者想改成标签条，参考下面这个。<br>  <a href="https://blog.justlovesmile.top/posts/2bfb1caa.html?time=1674117837113">Hexo博客 | 动态分类标签条，自动获取全站分类与标签进行展示</a></p><p>  有个bug，当前分类页的图标未高亮显示，从评论区找到以下教程，加入 data-pjax=&quot;&quot; defer=&quot;&quot;解决<br>  <a href="https://blog.zhheo.com/p/3e567fa7.html">pjax无法生效解决办法，butterfly主题维护你的pjax</a></p><h3 id="音乐控制器（导航栏）"><a href="#音乐控制器（导航栏）" class="headerlink" title="音乐控制器（导航栏）"></a>音乐控制器（导航栏）</h3><p>  之前Meting的API炸了，根据 <a href="https://github.com/xizeyoupan/Meting-API">https://github.com/xizeyoupan/Meting-API</a> 的教程自建了API，现已恢复。<br>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bottom:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;script&gt;var</span> <span class="string">meting_api=&#x27;https://metingjs.gavin-chen.top/api?server=:server&amp;type=:type&amp;id=:id&amp;auth=:auth&amp;r=:r&#x27;;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><br>  修改bottom部分aplayer代码，改用<mark class="hl-label blue">meting-js</mark> 标签<br>  <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-    - &lt;div class=&quot;aplayer no-destroy&quot; data-id=&quot;8086610771&quot; data-server=&quot;netease&quot; data-type=&quot;playlist&quot; data-theme=&quot;#48E3F6&quot; data-fixed=&quot;true&quot; data-mini=&quot;true&quot; data-listFolded=&quot;false&quot; data-order=&quot;list&quot; data-preload=&quot;none&quot; data-autoplay=&quot;false&quot; muted&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="addition">+    - &lt;meting-js id=&quot;8086610771&quot; server=&quot;netease&quot; type=&quot;playlist&quot; fixed=&quot;true&quot; mutex=&quot;true&quot; preload=&quot;none&quot; theme=&quot;#48E3F6&quot; data-lrctype=&quot;0&quot; order=&quot;random&quot;&gt;&lt;/meting-js&gt;</span></span><br></pre></td></tr></table></figure><br>  nav.pug：<br>  <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  #menus</span><br><span class="line"><span class="addition">+    div#nav-music-ctrl</span></span><br><span class="line"><span class="addition">+      div.nav-button#music-Backward</span></span><br><span class="line"><span class="addition">+        a.aplayer-icon-play(onclick=&quot;ctrl.musicBackward()&quot; title=&quot;上一曲&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span></span><br><span class="line"><span class="addition">+          i.fas.fa-solid.fa-backward-step</span></span><br><span class="line"><span class="addition">+      div.nav-button#music-Switch</span></span><br><span class="line"><span class="addition">+        a.aplayer-icon-play(onclick=&quot;ctrl.musicSwitch()&quot; title=&quot;音乐开关&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span></span><br><span class="line"><span class="addition">+          i.fas.fa-solid.fa-play</span></span><br><span class="line"><span class="addition">+      div.nav-button#music-Forward</span></span><br><span class="line"><span class="addition">+        a.aplayer-icon-play(onclick=&quot;ctrl.musicForward()&quot; title=&quot;下一曲&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span></span><br><span class="line"><span class="addition">+          i.fas.fa-solid.fa-forward-step</span></span><br></pre></td></tr></table></figure><br>  API可以参考Aplayer中文文档，js函数：<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ctrl = &#123;</span><br><span class="line">  <span class="attr">musicSwitch</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> music_state = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="property">audio</span>.<span class="property">paused</span>;</span><br><span class="line">    <span class="keyword">if</span> (music_state) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;fa-pause&quot;</span>);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#music-Switch i&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;fa-play&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">toggle</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">musicForward</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">skipForward</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">musicBackward</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">skipBack</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">musicMute</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;meting-js&quot;</span>).<span class="property">aplayer</span>.<span class="title function_">volume</span>(<span class="number">0.1</span>, <span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="首页字体logo"><a href="#首页字体logo" class="headerlink" title="首页字体logo"></a>首页字体logo</h3><p>  本来想把导航栏的给换了的，结果换上去发现太小了看不清，所以就放在封面了。<br>  logo是一个正七角星，配上小篆的“参星阁”，正七角星本来想自己画的，但画的不太好，正好Google图片有一个合适的，就下载下来用BigImg和Photoshop精修了一下，放上去还不错。“参星阁”小篆字是用的导入的字体，原字体包体积太大，就用提取工具提取了仅有“参星阁”三个字的子集，精简后体积仅1.8K。<br>  字体子集提取工具：<br>  在线版：<a href="http://www.1json.com/front/fonteditor.html">http://www.1json.com/front/fonteditor.html</a><br>  软件版：<a href="https://fontsmaller.github.io/">https://fontsmaller.github.io/</a><br>  推荐软件版，更方便。</p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol><li>这个博客做到这里基本上已经够用了，以后有什么好用的功能会再加上，然后步骤就补在第二条上上。</li><li>这个博客刚接触的时候什么都不了解，以前看的教程多是HTML、CSS、JavaScript三件套，顶多再加个JSP，所以看到pug和styl很懵，不知道咋用，而且听说theme里面的文件最好不要动，所以刚开始的时候都是在source下的自建文件夹CSS和JS里改的，HTML几乎没写过。后来了解了pug、styl的写法，而且越来越多的教程需要改源码，所以才敢大胆地去动源码里的文件。<br>大部分的功能其实都是有大佬封装好了的，直接npm安装就行了，还是很方便的。不过这类方法一定要注意教程里的注意事项，防止和现有的功能冲突。还有一部分功能是直接给源码的，这种自己改的时候稍微费时一点，但好处是容易理解原理和结构，而且便于自定义。<br>最后自己做微调的时候，最基本的技能就是F12大法了。HTML和CSS部分常用操作就是右键-检查，可以快速定位目标组件的各项属性，部分设置了hover才能显示的组件，开发者工具也能强制设置元素为hover状态。部分HTML结构需要微调的，可以复制下组件的id或者class，去theme下用Ctrl+F快速查找，找到源文件直接改就好了。JS部分可以利用控制台console.log打印日志，而且通过报错也可以知道问题出在哪。源代码里也可以找到整个工程的源码，大多网站有压缩处理，可能需要将源码格式化一下才能阅读。<br>另外建议先在开发者工具上调试好后，再将改动复制到工程里，这样可以减少很多繁琐的步骤。</li><li>博客搭建与修改参考的大佬有很多，都放在友链中了，十分感谢。</li></ol>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> APlayer </tag>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Butterfly博客搭建记录（3）</title>
      <link href="/post/ac62cfd5.html"/>
      <url>/post/ac62cfd5.html</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>这篇主要记录控制中心的进度</strong></p><p>目前主要参考洪哥的控制台，后面会参考更多人的博客设计，争取能实现更多的功能。</p></blockquote><h2 id="构想"><a href="#构想" class="headerlink" title="构想"></a>构想</h2><p>洪哥的控制台颜值很高，是我喜欢的简约风格，目前已上线5个设置按钮，分别是：</p><ul><li>显示模式切换</li><li>边栏显示控制</li><li>快捷键开关</li><li>无障碍工具栏</li><li>帧率显示开关（最近更新）</li></ul><p>控制台主体是全屏显示的，背景是毛玻璃效果，按钮整体居中排列，随着屏幕宽度缩小会隐藏部分按钮，关闭控制台可以通过点击右上角的 X 或者mask区域。整个交互看起来是非常舒适的。</p><h2 id="计划"><a href="#计划" class="headerlink" title="计划"></a>计划</h2><p>打勾的是已实现的，没打勾的还在努力。<br><div class="note info modern no-icon flat"><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>主体界面</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>深色模式</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>简繁切换</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>歌词显示</p>           </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>           <p>音频控制器（Aplayer其他功能迁入，如下一曲、上一曲、暂停/播放、进度条、音量条、歌单等）</p>           </div><div class='checkbox'><input type="checkbox" />           <p>设置界面</p>           </div><div class='checkbox'><input type="checkbox" />           <p>计算器</p>           </div><div class='checkbox'><input type="checkbox" />           <p>皮肤控制器（color、blur、image等替换）</p>           </div></div></p><h2 id="控制中心"><a href="#控制中心" class="headerlink" title="控制中心"></a>控制中心</h2><h3 id="pug"><a href="#pug" class="headerlink" title="pug"></a>pug</h3><p>新建<code>console.pug</code>文件，文件路径：<code>themes\butterfly\layout\includes\console.pug</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">div#console</span><br><span class="line">    div.console-head</span><br><span class="line">        span 控制中心</span><br><span class="line">    div.close-btn(onclick=&quot;ctrl.hideConsole()&quot; href=&quot;javascript:void(0);&quot;)</span><br><span class="line">        i.fas.fa-circle-xmark</span><br><span class="line">    div.console-btn-group</span><br><span class="line"></span><br><span class="line">        div.console-btn-item#darkItem</span><br><span class="line">            a.switchButton#darkSwitchBtn(onclick=&quot;ctrl.switchDarkMode()&quot; title=&quot;深色模式&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                i#iconDarkMode.fas.fa-moon</span><br><span class="line"></span><br><span class="line">        div.console-btn-item#charItem</span><br><span class="line">            a.switchButton#charSwitchBtn(type=&quot;button&quot; title=&quot;簡/繁&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                i#iconCharMode.fas(style=&quot;font-size:1.5rem;&quot;) 繁</span><br><span class="line"></span><br><span class="line">        div.console-btn-item#ircItem</span><br><span class="line">            a.switchButton#ircSwitchBtn(onclick=&quot;ctrl.ircShowHide()&quot; title=&quot;歌词显示&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                i#iconIrcMode.fas(style=&quot;font-size:1.5rem;&quot;) 词</span><br><span class="line"></span><br><span class="line">        div.console-btn-item#asideItem</span><br><span class="line">            a.switchButton#asideSwitchBtn(onclick=&quot;ctrl.hideAsideBtn()&quot; title=&quot;单栏/双栏&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot; data-pjax-state=&quot;external&quot;)</span><br><span class="line">                i#iconAside.fas.fa-arrows-alt-h</span><br><span class="line">    div.console-mask(onclick=&quot;ctrl.hideConsole()&quot; href=&quot;javascript:void(0);&quot; rel=&quot;external nofollow&quot;)</span><br></pre></td></tr></table></figure><p>然后在<code>themes\butterfly\layout\includes\layout.pug</code>文件中最后一段引入。</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    include ./rightside.pug</span><br><span class="line"><span class="addition">+    include ./console.pug</span></span><br><span class="line">    !=partial(&#x27;includes/third-party/search/index&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">    include ./additional-js.pug</span><br></pre></td></tr></table></figure><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><p>在自有的css文件中加入控制中心的样式。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 导航栏中控制中心按钮样式 */</span></span><br><span class="line"><span class="selector-id">#console-switch</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0.5em</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.4rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console-switch</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-main);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-white) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 控制中心界面功能按钮样式 */</span></span><br><span class="line"><span class="selector-id">#console</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">9999</span>;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span> ease-out;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span><span class="selector-class">.show</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: all;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span> <span class="selector-class">.close-btn</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">5%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">5%</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span> <span class="selector-class">.console-btn-group</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">1rem</span> auto <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: fit-content;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span> <span class="selector-class">.console-btn-group</span> <span class="selector-class">.console-btn-item</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:last-child</span>) &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span> <span class="selector-class">.console-btn-group</span> <span class="selector-class">.console-btn-item</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span> <span class="selector-class">.console-btn-group</span> <span class="selector-class">.console-btn-item</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--card-bg);</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--font-color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme = dark]</span> <span class="selector-tag">a</span><span class="selector-id">#darkSwitchBtn</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">50</span>, <span class="number">150</span>, <span class="number">255</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-white) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* hover变色开关 */</span></span><br><span class="line"><span class="comment">/* #console .console-btn-group .console-btn-item a:hover &#123;</span></span><br><span class="line"><span class="comment">  background: var(--gavin-op-dis-3) !important;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span> <span class="selector-class">.console-btn-group</span> <span class="selector-class">.console-btn-item</span><span class="selector-class">.on</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">50</span>, <span class="number">150</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--anzhiyu-white);</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span> <span class="selector-class">.console-btn-group</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.8rem</span>; <span class="comment">/*图标大小*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span><span class="selector-class">.show</span> <span class="selector-class">.console-mask</span> &#123;</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">10px</span>);</span><br><span class="line">  -webkit-backdrop-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">10px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#console</span> <span class="selector-class">.console-mask</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-maskbgdeep);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">0px</span>);</span><br><span class="line">  -webkit-backdrop-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">0px</span>);</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  -webkit-<span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">  <span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">  -webkit-<span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">  <span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.console-head</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">3.5%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">5%</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">900</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fas</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">900</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Font Awesome 6 Free&quot;</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h3><p>在自有的js文件中加入功能函数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ctrl = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 深色模式开关</span></span><br><span class="line">  <span class="attr">switchDarkMode</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> nowMode = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>) === <span class="string">&#x27;dark&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (nowMode === <span class="string">&#x27;light&#x27;</span>) &#123;</span><br><span class="line">      <span class="title function_">activateDarkMode</span>()</span><br><span class="line">      saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;dark&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">      <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span> !== <span class="literal">undefined</span> &amp;&amp; btf.<span class="title function_">snackbarShow</span>(<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span>.<span class="property">day_to_night</span>)</span><br><span class="line">      <span class="comment">// document.querySelector(&quot;#iconDarkMode&quot;).classList.remove(&quot;fa-sun&quot;)</span></span><br><span class="line">      <span class="comment">// document.querySelector(&quot;#iconDarkMode&quot;).classList.add(&quot;fa-moon&quot;)</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">activateLightMode</span>()</span><br><span class="line">      saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="string">&#x27;light&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">      <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span> !== <span class="literal">undefined</span> &amp;&amp; btf.<span class="title function_">snackbarShow</span>(<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span>.<span class="property">night_to_day</span>)</span><br><span class="line">      <span class="comment">// document.querySelector(&quot;#iconDarkMode&quot;).classList.remove(&quot;fa-moon&quot;)</span></span><br><span class="line">      <span class="comment">// document.querySelector(&quot;#iconDarkMode&quot;).classList.add(&quot;fa-sun&quot;)</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">typeof</span> utterancesTheme === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="title function_">utterancesTheme</span>()</span><br><span class="line">    <span class="keyword">typeof</span> changeGiscusTheme === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="title function_">changeGiscusTheme</span>()</span><br><span class="line">    <span class="keyword">typeof</span> <span class="variable constant_">FB</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">loadFBComment</span>()</span><br><span class="line">    <span class="keyword">typeof</span> runMermaid === <span class="string">&#x27;function&#x27;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="title function_">runMermaid</span>()  </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//显示中控台</span></span><br><span class="line">  <span class="attr">showConsole</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#console&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    cjw.<span class="title function_">initConsoleState</span>();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//隐藏中控台</span></span><br><span class="line">  <span class="attr">hideConsole</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#console&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 歌词显示开关</span></span><br><span class="line">  <span class="attr">ircShowHide</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> irc = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer-lrc-hide&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(irc === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer-lrc&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;aplayer-lrc-hide&quot;</span>)</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#ircItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer-lrc&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;aplayer-lrc-hide&quot;</span>)</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#ircItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 单栏显示开关</span></span><br><span class="line">  <span class="attr">hideAsideBtn</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> $htmlDom = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">classList</span></span><br><span class="line">    <span class="keyword">if</span> ($htmlDom.<span class="title function_">contains</span>(<span class="string">&#x27;hide-aside&#x27;</span>))&#123;</span><br><span class="line">      saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;aside-status&#x27;</span>, <span class="string">&#x27;show&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#asideItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      saveToLocal.<span class="title function_">set</span>(<span class="string">&#x27;aside-status&#x27;</span>, <span class="string">&#x27;hide&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#asideItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    $htmlDom.<span class="title function_">toggle</span>(<span class="string">&#x27;hide-aside&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//初始化console图标</span></span><br><span class="line">  <span class="attr">initConsoleState</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> irc = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer-lrc-hide&quot;</span>)</span><br><span class="line">    irc === <span class="literal">null</span></span><br><span class="line">      ? <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#ircItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">      : <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#ircItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">    saveToLocal.<span class="title function_">get</span>(<span class="string">&#x27;aside-status&#x27;</span>) === <span class="string">&#x27;hide&#x27;</span></span><br><span class="line">      ? <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#asideItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">      : <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#asideItem&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;on&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云水烟波</title>
      <link href="/post/2892eb80.html"/>
      <url>/post/2892eb80.html</url>
      
        <content type="html"><![CDATA[<h2 id="序章"><a href="#序章" class="headerlink" title="序章"></a>序章</h2><blockquote><p>不乱于心，不困于情。不畏将来，不念过往。如此，安好。</p><p align="right">——丰子恺</p></blockquote><h2 id="篇一"><a href="#篇一" class="headerlink" title="篇一"></a>篇一</h2><ol><li><p>一个人的记忆就是座城市，时间腐蚀着一切建筑，把高楼和道路全部沙化。<br>偶尔梦里回到沙城，那些路灯和脚印无比清晰，而你无法碰触，一旦双手陷入，整座城市就轰隆隆地崩塌。把你的喜笑颜开，把你的碧海蓝天，把关于我们之间所有的影子埋葬。<br>如果你不往前走，就会被沙子掩埋。<br>所以我们泪流满面，步步回头，可是只能往前走。<br>哪怕往前走，是和你擦肩而过。</p><p align="right">——张嘉佳</p></li><li><p>我希望有个如你一般的人。如这山间清晨一般明亮清爽的人，如奔赴古城道路上阳光一般的人，温暖而不炙热，覆盖我所有肌肤。由起点到夜晚，由山野到书房，一切问题的答案都很简单。我希望有个如你一般的人，贯彻未来，数遍生命的公路牌。</p><p align="right">——张嘉佳</p></li><li><p>在青山绿水之间，我想牵着你的手，走过这座桥，桥上是绿叶红花，桥下是流水人家，桥的那头是青丝，桥的这头是白发。</p><p align="right">——沈从文</p></li><li><p>我行过许多地方的桥，看过许多次数的云，喝过许多种类的酒，却只爱过一个正当最好年龄的人。</p><p align="right">——沈从文</p></li><li><p>于千万人之中遇见你所要遇见的人，于千万年之中，时间的无涯的荒野里，没有早一步，也没有晚一步，刚巧赶上了，那也没有别的话可说，惟有轻轻地问一声：“噢，你也在这里吗？”</p><p align="right">——张爱玲</p> </li><li><p>人越长大越会明白，世界上有种最好的东西，叫得不到。<br>一开始你是我的秘密，<br>我怕你知道，又怕你不知道，又怕你知道却装作不知道。<br>我不说，你不说，又远又近。<br>那现在，请让我以朋友的名义，继续爱你。</p><p align="right">——《匆匆那年》</p></li><li><p>有人住高楼，有人在深沟，有人光芒万丈，有人一身锈。世人万千种，浮云莫去求，斯人若彩虹，遇上方知有。</p><p align="right">——《怦然心动》</p></li><li><p>If we can only encounter each other rather than stay with each other, then I wish we had never encountered.</p></li><li><p>山河远阔，人间烟火，无一是你，无一不是你。</p><p align="right">——《江海共余生》</p></li><li><p>若逢新雪初霁，满月当空，下面平铺着皓影，上面流转着亮银，而你带笑地向我走来，月色和雪色之间，你是第三种绝色。</p><p align="right">——余光中</p></li><li><p>我想写一个故事<br>以我开始<br>以我们结束</p></li><li><p>曾经痛苦 才知道真正的痛苦<br>曾经执著 才能放下执著<br>曾经牵挂 才能了无牵挂</p></li></ol><h2 id="篇二"><a href="#篇二" class="headerlink" title="篇二"></a>篇二</h2><ol><li><p>人生海海，山山而川，不过尔尔。</p><p align="right">——麦家</p></li><li><p>人生天地间，忽如远行客。</p><p align="right">——《青青陵上柏》</p></li><li><p>天下之大，随意而歇。</p><p align="right">——南方嘉木</p></li><li><p>生活安乐时，作绝望之诗；失意受挫时，写生之欢愉。</p><p align="right">——太宰治</p></li><li><p>这世界人来人往，可我依然很孤单。</p><p align="right">——《庆余年》</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 诗和远方 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 情感 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日记230115</title>
      <link href="/post/cef7e835.html"/>
      <url>/post/cef7e835.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="bc9adde8f9c56539a5ee6ddc5109c27f7897564b9c6ddabe6e74d93bdcd62c92">ced864f45009da4e5537372f52405f70c8914908c756e5c427cffe3c015e5c1032b7fd5fae419487b086f168697ca31399435efffdf602f6d2eb0354fca93622e2180aebd68238415959a682b7459c39a99b7583fcb592e5312d327ab63e0f90e17b94d159e6b49ca79ffd3737239e463863ebdab09dd988a276cf231e4e08d707e3de40f491a5d9532aa9bea319d228f0455e415f60b8c817147fafa101275b53c3ec0637cddc979a4b1783f66f72ce66ed9ef6b7458e596f13454d516e9badab86d53657dfff1fd6c5f108c0963d15763441314ea99102589d423df1f1560fb613e4ff8a0831e2f44e488c8e7f19bbd364da30a725355b3fbc7b5747ae027a68a2e8d1dcf1d0b57b6a914484a8261a6fe5b333e3eb410532c77aa954670601c08d976f8c958e9e464c4f332158b48bc72199b81661c0e2305a780a39210de88f10340ab7b44a6acf65d10e5987a544c68ac2dcd4283d8b64fb1c0809208070d8829a8a7b50bb92e30820ee180dd3fd8fd2c124fd08baffba2b3b36b3305b761fbae5a885ef3fb84d1900fcaa2153c0f05b625713126e26f1bf79ce65d734555e3ff141f56734e9428015105d6abd9619c86c2cc4de828e5ae174376138d381890d26ecd01350f55d3de989b9eee1a8cc1ea4e3dcaca15952a62a76d223521bc5048e7a5ac48ae8987a6651184302cc16a963753f97429f15ee2167788f2392ee9d76f3cc341bcb20cc964ffc278b5bceb7a77cce32e6dc2bdecf0575bf4d929091028f0109c0bf2212b5fe54bf48e2b605d386915ddeda0a5c6b76d6b1386344b9657d4131b285489937a9cbb2ec9ec7346f3a00b6ec98a3dfc71407c91548118ffa646e89468c45deb0cf93336420b965bac5fdce9e722aa866aa7c53314f9b86de134eee842c9db9cedb571712b0f11c382cef2ddab345b202586eba74d4</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-flip">      <input class="hbe hbe-input-field hbe-input-field-flip" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-flip" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-flip" data-content="您好, 这里需要密码.">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 生活日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Butterfly博客搭建记录（2）</title>
      <link href="/post/a5c582fd.html"/>
      <url>/post/a5c582fd.html</url>
      
        <content type="html"><![CDATA[<h2 id="外挂标签"><a href="#外挂标签" class="headerlink" title="外挂标签"></a>外挂标签</h2><h3 id="配置与使用"><a href="#配置与使用" class="headerlink" title="配置与使用"></a>配置与使用</h3><ol><li><p><strong>配置方法</strong>参考博客：</p><ul><li><a href="https://www.fomal.cc/posts/5389e93f.html#%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE%E7%9A%84%E5%BC%95%E5%85%A5%EF%BC%88%E5%BA%97%E9%95%BF%EF%BC%89">Fomalhaut - 外挂标签的引入（店长）</a></li></ul></li><li><p><strong>使用方法</strong>参考博客：</p><ul><li><a href="https://www.fomal.cc/posts/2013454d.html#1-4-%E5%BC%95%E7%94%A8">Fomalhaut - Markdown语法与外挂标签写法汇总</a></li><li><a href="https://blog.happyking.top/p/undefined/">HappyKing - hexo插件-标签外挂使用手册</a></li></ul></li></ol><h3 id="样式修改"><a href="#样式修改" class="headerlink" title="样式修改"></a>样式修改</h3><p>默认的链接样式颜色不太显眼，微调一下以适应整体风格。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#article-container</span> <span class="selector-tag">a</span><span class="selector-class">.link-card</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">150</span>,<span class="number">255</span>,<span class="number">0.3</span>);</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">150</span>,<span class="number">255</span>,<span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#article-container</span> <span class="selector-tag">a</span><span class="selector-class">.link-card</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">150</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">8px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">150</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="tip warning"><p><strong>一些问题：</strong><br>某些情况下，会发生有序列表序号不匹配的问题。<br><strong>解决方法：</strong><br>对错误序号之前的内容，每一行前添加一个空格。<br>参考链接：<a href="https://www.jianshu.com/p/20405c2980dc">aworker - hexo下markdown语法有序列表序号不匹配</a></p></div><h2 id="网站页脚"><a href="#网站页脚" class="headerlink" title="网站页脚"></a>网站页脚</h2><ol><li><p>第一版<br>第一版只加了徽标，和ICP备案，用的是店长的hexo-butterfly-footer-beautify插件。<br>参考教程：</p><div class="tag link"><a class="link-card" title="页脚Github徽标（店长）" href="https://www.fomal.cc/posts/eec9786.html"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/Fomalhaut.webp"/></div><div class="right"><p class="text">页脚Github徽标（店长）</p><p class="url">https://www.fomal.cc/posts/eec9786.html</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Fomalhaut</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></li><li><p>第二版<br>第二版是搬的Fomalhaut的同款页脚。<br>参考教程：</p><div class="tag link"><a class="link-card" title="本站同款页脚(tzy大佬+微调)" href="https://www.fomal.cc/posts/d739261b.html"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/Fomalhaut.webp"/></div><div class="right"><p class="text">本站同款页脚(tzy大佬+微调)</p><p class="url">https://www.fomal.cc/posts/d739261b.html</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Fomalhaut</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></li><li><p>所用工具</p><ul><li><a href="https://tool.oschina.net/commons?type=3">HTML转义对照 - 开源中国 - 常用对照表</a></li><li><a href="https://shields.io/">徽标生成网站 - shields</a></li><li><a href="https://simpleicons.org/">图标查询网站 - simpleicons</a></li><li><a href="https://tool.chinaz.com/tools/imgtobase/">base64图片在线转换工具 - 站长之家</a></li></ul></li><li><p>徽标生成方法<br>参考教程：</p><div class="tag link"><a class="link-card" title="Add Github Badge" href="https://akilar.top/posts/e87ad7f8/"><div class="main"><div class="left"><img src="https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico"/></div><div class="right"><p class="text">Add Github Badge</p><p class="url">https://akilar.top/posts/e87ad7f8/</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Akilar店长</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div><div class="tag link"><a class="link-card" title="网站徽章shields制作教程" href="https://blog.csdn.net/qq_45173404/article/details/123728687"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/CSDN.webp"/></div><div class="right"><p class="text">网站徽章shields制作教程</p><p class="url">https://blog.csdn.net/qq_45173404/article/details/123728687</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— CSDN@Baret-H</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></li></ol><div class="tip info"><p>对于一些simpleicons上查不到的徽标，可以转成base64图片，格式如下。</p></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=data:image/png;base64,url</span><br></pre></td></tr></table></figure><h2 id="文章加密"><a href="#文章加密" class="headerlink" title="文章加密"></a>文章加密</h2><ol><li>插件：<a href="https://github.com/D0n9X1n/hexo-blog-encrypt">hexo-blog-encrypt</a></li><li>教程：<a href="https://www.fomal.cc/posts/2d7ac914.html">Fomalhaut - 文章加密插件</a></li><li>样式预览<ul><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Default/">default</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Blink/">blink</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Shrink/">shrink</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Flip/">flip</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Up/">up</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Surge/">surge</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Wave/">wave</a></li><li><a href="https://mhexo.github.io/2020/12/23/Theme-Test-Xray/">xray</a></li></ul></li></ol><h2 id="导航栏"><a href="#导航栏" class="headerlink" title="导航栏"></a>导航栏</h2><ol><li>友链中有很多大佬的导航栏都很好看，个人比较喜欢简约风格的，所以选择了目前这款导航栏样式，而且这种样式的导航栏用的人还蛮多，看来大家都很喜欢这种类型。我看的教程是安知鱼大佬的（目前也只找到了他的）：<div class="tag link"><a class="link-card" title="butterfly导航栏修改方案(自用方案)" href="https://anzhiy.cn/posts/8e53.html"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/安知鱼.webp"/></div><div class="right"><p class="text">butterfly导航栏修改方案(自用方案)</p><p class="url">https://anzhiy.cn/posts/8e53.html</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— 安知鱼</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></li><li>微调<ul><li>中间部分会显示文章标题，当鼠标移到标题上时，会显示一个巨大的“<mark class="hl-label blue">回到顶部</mark> ”按钮，不太美观，就把它的样式隐藏了，只保留其功能部分。</li><li>右侧添加控制中心</li><li>左侧添加和风天气插件（窄屏隐藏不显示）</li><li>左右两侧在窄屏下会贴边，有点别扭，于是加了一点padding间隔。</li><li>默认页面下滑会自动隐藏导航栏，上滑显示导航栏，这里改为导航栏常驻，不隐藏。</li><li>其他color、border、shadow、radius、blur适应性微调。</li></ul></li></ol><h2 id="滚动条样式"><a href="#滚动条样式" class="headerlink" title="滚动条样式"></a>滚动条样式</h2><ul><li>滚动条是参考B站视频里讲的，仓库地址：<a href="https://github.com/constown/HexoStaticFile/tree/master/src/css">滚动条 - Github</a><br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/QPspc.png" alt=""></li><li>后来觉得滚动条底部颜色太浅，视觉效果不明显，就把顶部和底部都改成了深色<br><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/QPVfr.png" alt=""></li><li>最后觉得还是太花了，就全部改成黑色了。 (＠_＠;)</li></ul><h2 id="文章页波浪线"><a href="#文章页波浪线" class="headerlink" title="文章页波浪线"></a>文章页波浪线</h2><p>参考文章：<div class="tag link"><a class="link-card" title="butterfly文章顶部添加波浪效果" href="https://anzhiy.cn/posts/98c4.html"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/安知鱼.webp"/></div><div class="right"><p class="text">butterfly文章顶部添加波浪效果</p><p class="url">https://anzhiy.cn/posts/98c4.html</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— 安知鱼</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p><h2 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h2><h3 id="Gitalk"><a href="#Gitalk" class="headerlink" title="Gitalk"></a>Gitalk</h3><p>第一版用的是Gitalk评论系统，用户只能用Github账户登录进行评论。样式还不错，挺简约的，就是因为依赖于Github，经常网络不太好。</p><h3 id="Livere（来必力）"><a href="#Livere（来必力）" class="headerlink" title="Livere（来必力）"></a>Livere（来必力）</h3><p>Livere有简单的后台管理，并且提供多种社交账户登录方式，非常便捷。缺点也很明显，实在是太丑了。。。。。。</p><h3 id="Twikoo"><a href="#Twikoo" class="headerlink" title="Twikoo"></a>Twikoo</h3><p>Twikoo我看到有很多人都在用，颜值特别高，所以就打算把Livere给替换掉了。</p><p>部署教程：<br><div class="tag link"><a class="link-card" title="Twikoo 文档" href="https://twikoo.js.org/quick-start.html#vercel-%E9%83%A8%E7%BD%B2"><div class="main"><div class="left"><img src="/img/android-attach.png"/></div><div class="right"><p class="text">Twikoo 文档</p><p class="url">https://twikoo.js.org/quick-start.html#vercel-%E9%83%A8%E7%BD%B2</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— Twikoo</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div><br>视频教程：<br><div class="tag link"><a class="link-card" title="butterfly配置twikoo评论系统" href="https://www.bilibili.com/video/BV1Re4y1H7g8/"><div class="main"><div class="left"><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/安知鱼.webp"/></div><div class="right"><p class="text">butterfly配置twikoo评论系统</p><p class="url">https://www.bilibili.com/video/BV1Re4y1H7g8/</p></div><i class="fa fa-chevron-right"></i></div><div class="end"><p>From —— 安知鱼</p><p>引自外站地址，不确保可用性和安全性</p></div></a></div></p><div align=center class="aspect-ratio">    <iframe src="https://player.bilibili.com/player.html?aid=646135382&bvid=BV1Re4y1H7g8&cid=852098274&page=1&as_wide=1&high_quality=1&danmaku=1autoplay=0"     scrolling="no"     border="0"     frameborder="no"     framespacing="0"     high_quality=1    danmaku=1     allowfullscreen="true">     </iframe></div><p><strong>注意如果头像系统用的是Cravatar，配置尽量用QQ邮箱，否则很难获取到头像。</strong><br>自动回复邮件的模板一个用的是洪哥的，一个用的是Fomalhaut的。</p>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Butterfly博客搭建记录（1）</title>
      <link href="/post/fb55a1ea.html"/>
      <url>/post/fb55a1ea.html</url>
      
        <content type="html"><![CDATA[<h2 id="★头部设置Front-matter"><a href="#★头部设置Front-matter" class="headerlink" title="★头部设置Front-matter"></a>★头部设置Front-matter</h2><h3 id="页面配置（Page）"><a href="#页面配置（Page）" class="headerlink" title="页面配置（Page）"></a>页面配置（Page）</h3><div class="table-container"><table><thead><tr><th>参数</th><th>功能</th></tr></thead><tbody><tr><td>title</td><td>【必需】页面标题</td></tr><tr><td>date</td><td>【必需】页面创建日期</td></tr><tr><td>type</td><td>【必需】标签、分类和友情链接三个页面需要配置</td></tr><tr><td>updated</td><td>【可选】页面更新日期</td></tr><tr><td>description</td><td>【可选】页面描述</td></tr><tr><td>keywords</td><td>【可选】页面关键字</td></tr><tr><td>comments</td><td>【可选】显示页面评论模块(默认 true)</td></tr><tr><td>top_img</td><td>【可选】页面顶部图片</td></tr><tr><td>mathjax</td><td>【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false)</td></tr><tr><td>katex</td><td>【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false)</td></tr><tr><td>aside</td><td>【可选】显示侧边栏 (默认 true)</td></tr><tr><td>aplayer</td><td>【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置</td></tr><tr><td>highlight_shrink</td><td>【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置)</td></tr></tbody></table></div><h3 id="文章页配置（Post）"><a href="#文章页配置（Post）" class="headerlink" title="文章页配置（Post）"></a>文章页配置（Post）</h3><div class="table-container"><table><thead><tr><th>参数</th><th>功能</th></tr></thead><tbody><tr><td>title</td><td>【必需】文章标题</td></tr><tr><td>date</td><td>【必需】文章创建日期</td></tr><tr><td>updated</td><td>【可选】文章更新日期</td></tr><tr><td>tags</td><td>【可选】文章标签</td></tr><tr><td>categories</td><td>【可选】文章分类</td></tr><tr><td>keywords</td><td>【可选】文章关键字</td></tr><tr><td>description</td><td>【可选】文章描述</td></tr><tr><td>top_img</td><td>【可选】文章顶部图片</td></tr><tr><td>cover</td><td>【可选】文章缩略图(如果没有设置top_img,文章页顶部将显示缩略图，可设为false/图片地址/留空)</td></tr><tr><td>comments</td><td>【可选】显示文章评论模块(默认 true)</td></tr><tr><td>toc</td><td>【可选】显示文章TOC(默认为设置中toc的enable配置)</td></tr><tr><td>toc_number</td><td>【可选】显示toc_number(默认为设置中toc的number配置)</td></tr><tr><td>toc_style_simple</td><td>【可选】显示 toc 简洁模式</td></tr><tr><td>copyright</td><td>【可选】显示文章版权模块(默认为设置中post_copyright的enable配置)</td></tr><tr><td>copyright_author</td><td>【可选】文章版权模块的文章作者</td></tr><tr><td>copyright_author_href</td><td>【可选】文章版权模块的文章作者链接</td></tr><tr><td>copyright_url</td><td>【可选】文章版权模块的文章连结链接</td></tr><tr><td>copyright_info</td><td>【可选】文章版权模块的版权声明文字</td></tr><tr><td>mathjax</td><td>【可选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false)</td></tr><tr><td>katex</td><td>【可选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false)</td></tr><tr><td>aplayer</td><td>【可选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置</td></tr><tr><td>highlight_shrink</td><td>【可选】配置代码框是否展开(true/false)(默认为设置中highlight_shrink的配置)</td></tr><tr><td>aside</td><td>【可选】显示侧边栏 (默认 true)</td></tr><tr><td>sticky</td><td>【可选】文章置顶显示，数值越大，排序越高。最小为1，负数则为置底。</td></tr></tbody></table></div><p>*以上参数按需使用即可。</p><p>*摘自：<a href="https://butterfly.js.org/posts/dc584b87/#Page-Front-matter">Butterfly 安装文档(二) 主题页面</a></p><h2 id="个人信息"><a href="#个人信息" class="headerlink" title="个人信息"></a>个人信息</h2><h3 id="QQ"><a href="#QQ" class="headerlink" title="QQ"></a>QQ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://wpa.qq.com/msgrd?v=3&amp;uin=#####&amp;site=qq&amp;menu=yes</span><br></pre></td></tr></table></figure><p>将链接中的“#####”改为自己的 QQ 号，用户点击链接将跳转到添加好友的界面，若已经是好友则进入聊天对话框。</p><p>（手机端测试无效。）</p><h3 id="邮件"><a href="#邮件" class="headerlink" title="邮件"></a>邮件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mailto:#####</span><br></pre></td></tr></table></figure><p>将链接中的“#####”改为自己的邮箱地址，用户点击链接将跳转到 email 应用，手机端可自行选择发送邮件的应用， Windows 端唤起默认应用， Mac 端未测试。</p><h2 id="图标库"><a href="#图标库" class="headerlink" title="图标库"></a>图标库</h2><h3 id="阿里巴巴矢量图标库"><a href="#阿里巴巴矢量图标库" class="headerlink" title="阿里巴巴矢量图标库"></a><a href="https://www.iconfont.cn/">阿里巴巴矢量图标库</a></h3><p>首先将需要的图标加购购物车，然后添加至项目（如果没有，则新建一个），在 “资源管理” - “我的项目” 里选择 <mark class="hl-label blue">Font_class</mark>  类型，复制 CDN 代码（如果没有，则生成一个）待用。</p><p><img src="https://blog-hexo-img.oss-cn-shanghai.aliyuncs.com/GpWti.webp" alt=""></p><p>在 Hexo 根目录下，在主题配置 _config.butterfly.yml 文件中的 inject 部分引入</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;//at.alicdn.com/t/c/font_3854537_gjtqti1yoi4.css&quot;&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;&gt;</span></span><br><span class="line">    <span class="comment"># - xxxxxxxxxx</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">  <span class="comment"># - xxxxxxxxxx</span></span><br></pre></td></tr></table></figure><p>需要注意的是，一旦你的项目发生了变化（新增、删减或修改某个图标），那么就需要重新生成 CDN 代码，并在你的主题配置中更新。</p><h3 id="FontAwesome"><a href="#FontAwesome" class="headerlink" title="FontAwesome"></a><a href="https://fontawesome.com/">FontAwesome</a></h3><p>这是 Butterfly 自带的图标库，测试发现两个小问题，一是有些特效仅对此图标库有效，换成其他图标库的图标就无效，比如图片旋转；二是有些图标应用后无显示，比如 <mark class="hl-label blue">fa-photo</mark>  等。图标详情可以看这篇博客：<a href="https://9iphp.com/fa-icons">https://9iphp.com/fa-icons</a></p><p>同样的，该图标库的引用方法：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;&gt;</span></span><br><span class="line">    <span class="comment"># - xxxxxxxxxx</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">  <span class="comment"># - xxxxxxxxxx</span></span><br></pre></td></tr></table></figure><h2 id="图床"><a href="#图床" class="headerlink" title="图床"></a>图床</h2><h3 id="IMG-TG"><a href="#IMG-TG" class="headerlink" title="IMG.TG"></a><a href="https://img.tg/">IMG.TG</a></h3><p>本站使用 IMG.TG 图床，这是个4年老图床，单张图片最大支持5MB，采用国内百度云 CDN 节点加速，测试图片打开速度中国大陆基本在 1s 以内。</p><h3 id="聚合图床"><a href="#聚合图床" class="headerlink" title="聚合图床"></a><a href="https://www.superbed.cn/">聚合图床</a></h3><p>这个图床有丰富的客户端和接口，还可以挂载自己的 OSS、COS、七牛云等存储，自己有足够的盈利措施去长时间运营，并且免费用户的速度也很快，有国内 CDN ，必须登陆后上传。测试图片打开速度国内基本在 1s，免费用户最大上传5MB图。</p><p>更多图床信息可以看以下链接：</p><p><a href="https://www.cnblogs.com/kjcy8/articles/16648814.html">https://www.cnblogs.com/kjcy8/articles/16648814.html</a></p><p><a href="https://xlenco.eu.org/posts/7ea9.html">https://xlenco.eu.org/posts/7ea9.html</a></p><h2 id="域名、CDN等"><a href="#域名、CDN等" class="headerlink" title="域名、CDN等"></a>域名、CDN等</h2><p>参考这篇博客：<a href="https://www.fomal.cc/posts/4aa2d85f.html">https://www.fomal.cc/posts/4aa2d85f.html</a></p><p>本站的域名是从阿里云购买的，DNS配置成了cloudflare的服务器，网站托管用的Vercel，CDN主要用的字节的公共资源库，还有一些是参考的洪哥的。</p><h2 id="压缩与异步加载"><a href="#压缩与异步加载" class="headerlink" title="压缩与异步加载"></a>压缩与异步加载</h2><p>异步加载问题参考这篇博客：<br><a href="https://akilar.top/posts/615d5ede/">https://akilar.top/posts/615d5ede/</a></p>]]></content>
      
      
      <categories>
          
          <category> 博客魔改 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>

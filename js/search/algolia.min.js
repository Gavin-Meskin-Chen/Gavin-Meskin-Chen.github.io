window.addEventListener("load",()=>{const openSearch=()=>{const bodyStyle=document.body.style;bodyStyle.width="100%",set_scroll.checked&&"false"!==localStorage.getItem("scroll_state")||(bodyStyle.overflow="hidden"),btf.animateIn(document.getElementById("search-mask"),"to_show 0.5s"),btf.animateIn(document.querySelector("#algolia-search .search-dialog"),"titleScale 0.5s"),setTimeout(()=>{document.querySelector("#algolia-search .ais-SearchBox-input").focus()},100),document.addEventListener("keydown",(function f(event){"Escape"===event.code&&(closeSearch(),document.removeEventListener("keydown",f))}))},closeSearch=()=>{const bodyStyle=document.body.style;bodyStyle.width="",bodyStyle.overflow="",btf.animateOut(document.querySelector("#algolia-search .search-dialog"),"search_close .5s"),btf.animateOut(document.getElementById("search-mask"),"to_hide 0.5s")},searchClickFn=()=>{document.querySelector("#search-button > .search").addEventListener("click",openSearch)},searchClickFnOnce=()=>{document.getElementById("search-mask").addEventListener("click",closeSearch),document.querySelector("#algolia-search .search-close-button").addEventListener("click",closeSearch)},cutContent=content=>{if(""===content)return"";const firstOccur=content.indexOf("<mark>");let start=firstOccur-30,end=firstOccur+120,pre="",post="",matchContent;return start<=0?(start=0,end=140):pre="...",end>content.length?end=content.length:post="...",pre+content.substring(start,end)+post},algolia=GLOBAL_CONFIG.algolia,isAlgoliaValid=algolia.appId&&algolia.apiKey&&algolia.indexName;if(!isAlgoliaValid)return console.error("Algolia setting is invalid!");const search=instantsearch({indexName:algolia.indexName,searchClient:algoliasearch(algolia.appId,algolia.apiKey),searchFunction(helper){helper.state.query&&helper.search()}}),configure=instantsearch.widgets.configure({hitsPerPage:5}),searchBox=instantsearch.widgets.searchBox({container:"#algolia-search-input",showReset:!1,showSubmit:!1,placeholder:GLOBAL_CONFIG.algolia.languages.input_placeholder,showLoadingIndicator:!0}),hits=instantsearch.widgets.hits({container:"#algolia-hits",templates:{item(data){const link=data.permalink?data.permalink:GLOBAL_CONFIG.root+data.path,result=data._highlightResult,content=result.contentStripTruncate?cutContent(result.contentStripTruncate.value):result.contentStrip?cutContent(result.contentStrip.value):result.content?cutContent(result.content.value):"";return`\n          <a href="${link}" class="algolia-hit-item-link">\n          ${result.title.value||"no-title"}\n          </a>\n          <p class="algolia-hit-item-content">${content}</p>`},empty:function(data){return'<div id="algolia-hits-empty">'+GLOBAL_CONFIG.algolia.languages.hits_empty.replace(/\$\{query}/,data.query)+"</div>"}}}),stats=instantsearch.widgets.stats({container:"#algolia-info > .algolia-stats",templates:{text:function(data){const stats=GLOBAL_CONFIG.algolia.languages.hits_stats.replace(/\$\{hits}/,data.nbHits).replace(/\$\{time}/,data.processingTimeMS);return`<hr>${stats}`}}}),powerBy=instantsearch.widgets.poweredBy({container:"#algolia-info > .algolia-poweredBy"}),pagination=instantsearch.widgets.pagination({container:"#algolia-pagination",totalPages:5,templates:{first:'<i class="fas fa-angle-double-left"></i>',last:'<i class="fas fa-angle-double-right"></i>',previous:'<i class="fas fa-angle-left"></i>',next:'<i class="fas fa-angle-right"></i>'}});search.addWidgets([configure,searchBox,hits,stats,powerBy,pagination]),search.start(),searchClickFn(),searchClickFnOnce(),window.addEventListener("pjax:complete",()=>{"block"===getComputedStyle(document.querySelector("#algolia-search .search-dialog")).display&&closeSearch(),searchClickFn()}),window.pjax&&search.on("render",()=>{window.pjax.refresh(document.getElementById("algolia-hits"))})});
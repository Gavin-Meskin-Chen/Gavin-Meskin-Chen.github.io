var global_music_flag=0,meting_load=1,listener=0,old_music_id=null,now_music_id=null,newSongsheetLen=0,t_load,now=new Date,year,month,week,date,dates,weekStr,monthStr,asideTime,asideDay,asideDayNum,animalYear,ganzhiYear,lunarMon,lunarDay;function cardRefreshTimes(){var p_y=document.getElementById("pBar_year"),p_s_y=document.getElementById("p_span_year"),a_t_r=document.getElementById("aside-time-right"),p_m=document.getElementById("pBar_month"),p_s_m=document.getElementById("p_span_month"),p_w=document.getElementById("pBar_week"),p_s_w=document.getElementById("p_span_week");asideDay=(now-asideTime)/1e3/60/60/24,p_y&&(p_y.value=asideDay),p_s_y&&(p_s_y.innerHTML=(asideDay/365*100).toFixed(2)+"%"),a_t_r&&(a_t_r.innerHTML=now.getHours().toString().padStart(2,"0")+":"+now.getMinutes().toString().padStart(2,"0")+":"+now.getSeconds().toString().padStart(2,"0")),p_m&&(p_m.value=date,p_m.max=dates),p_s_m&&(p_s_m.innerHTML=(date/dates*100).toFixed(2)+"%"),p_w&&(p_w.value=0==week?7:week),p_s_w&&(p_s_w.innerHTML=((0==week?7:week)/7*100).toFixed(2)+"%")}function createtime(){now.setTime(now.getTime()+1e3);var grt=new Date("2023/01/04 20:53:58"),days=(now-grt)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-grt)/1e3/60/60-24*dnum,hnum=Math.floor(hours);1==String(hnum).length&&(hnum="0"+hnum);var minutes=(now-grt)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes);1==String(mnum).length&&(mnum="0"+mnum);var seconds=(now-grt)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds);1==String(snum).length&&(snum="0"+snum);let currentTimeHtml="";currentTimeHtml=`<div>参星阁历 ${dnum} 天 ${hnum} 小时 ${mnum} 分 ${snum} 秒</div>`,document.getElementById("count-time")&&(document.getElementById("count-time").innerHTML=currentTimeHtml)}cardTimes(),asideNote(),console.log("\n %cGC音频控制器 v1.3.2 参星阁出品%c https://gavin-chen.top \n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),setInterval(()=>{cardRefreshTimes(),createtime()},1e3),setInterval(()=>{if(null!=document.querySelector("meting-js").aplayer&&(meting_load=0),0==meting_load&&0==listener){ctrl.importMusicList();var ap=document.querySelector("meting-js").aplayer;ap.on("play",(function(){ctrl.getMusicInfo(),document.querySelector("#music-Switch i").classList.remove("fa-play"),document.querySelector("#music-Switch i").classList.add("fa-pause"),document.querySelector("#music-ctrl-btn-center i").classList.remove("fa-play"),document.querySelector("#music-ctrl-btn-center i").classList.add("fa-pause"),old_music_id=now_music_id,now_music_id=ap.list.index;for(var ids=document.querySelectorAll("#console-music-list .list-music-id"),states=document.querySelectorAll("#console-music-list .list-music-state"),i=0;i<ids.length;i++)parseInt(ids[i].innerHTML)==now_music_id+1&&(null!=old_music_id&&(ids[old_music_id].classList.remove("hide"),states[old_music_id].classList.remove("show"),ids[old_music_id].parentElement.parentElement.style.backgroundColor=""),ids[now_music_id].classList.add("hide"),states[now_music_id].classList.add("show"),ids[now_music_id].parentElement.parentElement.style.backgroundColor="var(--vercel-hover-bg)")})),ap.on("pause",(function(){document.querySelector("#music-Switch i").classList.remove("fa-pause"),document.querySelector("#music-Switch i").classList.add("fa-play"),document.querySelector("#music-ctrl-btn-center i").classList.remove("fa-pause"),document.querySelector("#music-ctrl-btn-center i").classList.add("fa-play")}));var play_mode=document.getElementById("music-ctrl-btn-first"),ap_play_mode=document.querySelector(".aplayer-icon.aplayer-icon-order"),loop_str='<path d="M0.622 18.334h19.54v7.55l11.052-9.412-11.052-9.413v7.549h-19.54v3.725z"></path>',random_str='<path d="M22.667 4l7 6-7 6 7 6-7 6v-4h-3.653l-3.76-3.76 2.827-2.827 2.587 2.587h2v-8h-2l-12 12h-6v-4h4.347l12-12h3.653v-4zM2.667 8h6l3.76 3.76-2.827 2.827-2.587-2.587h-4.347v-4z"></path>';play_mode.addEventListener("click",(function(e){var ap_play_mode_str=document.querySelector(".aplayer-icon.aplayer-icon-order svg path").outerHTML;ap_play_mode_str==loop_str?(play_mode.querySelector("i").classList.remove("fa-repeat"),play_mode.querySelector("i").classList.add("fa-shuffle"),ap_play_mode.click()):ap_play_mode_str==random_str?(play_mode.querySelector("i").classList.remove("fa-shuffle"),play_mode.querySelector("i").classList.add("fa-repeat"),ap_play_mode.click()):alert("程序错误，请刷新！")})),ap_play_mode.addEventListener("click",(function(e){var ap_play_mode_str=ap_play_mode.querySelector("svg path").outerHTML;ap_play_mode_str==loop_str?(play_mode.querySelector("i").classList.remove("fa-shuffle"),play_mode.querySelector("i").classList.add("fa-repeat"),console.log("进入顺序播放模式")):ap_play_mode_str==random_str?(play_mode.querySelector("i").classList.remove("fa-repeat"),play_mode.querySelector("i").classList.add("fa-shuffle"),console.log("进入随机播放模式")):alert("程序错误，请刷新！")})),ap.on("listclear",(function(){document.getElementById("console-music-list").innerHTML=""})),ap.on("listadd",(function(){var current_len=ap.list.audios.length;t_load=setInterval(()=>{(current_len=ap.list.audios.length)<newSongsheetLen||(ctrl.importMusicList(),global_music_flag=1,clearInterval(t_load),document.getElementById("console-loading-icon").classList.remove("show"),tools.showMessage("歌单导入成功！","success",1),ctrl.consoleBackBtn())},50)})),listener=1}0==meting_load&&0==global_music_flag&&ctrl.refreshProgress()},500);
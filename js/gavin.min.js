document.addEventListener("DOMContentLoaded",()=>{console.log("第一次加载完成"),document.getElementById("page-name").innerText=document.title.split(" | 参星阁")[0],cardTimes(),asideNote(),cardRefreshTimes(),percent(),tools.getIp(),ctrl.toPageJump(),ctrl.getCurrentPage(),ctrl.refreshLikeCount(),ctrl.coverFlow(),0!=document.documentElement.scrollTop&&document.getElementById("page-header").classList.add("is-top-bar"),document.getElementById("post-comment")&&ctrl.owoBig(),(set_fps.checked||"true"===localStorage.getItem("fps_state"))&&(tools.updateFPS(),document.getElementById("fps-box").style.display="flex")}),document.addEventListener("pjax:complete",()=>{console.log("pjax加载完成（切换页面）"),document.getElementById("page-name").innerText=document.title.split(" | 参星阁")[0],cardTimes(),asideNote(),cardRefreshTimes(),ctrl.toPageJump(),ctrl.getCurrentPage(),ctrl.refreshLikeCount(),ctrl.coverFlow(),0!=document.documentElement.scrollTop&&document.getElementById("page-header").classList.add("is-top-bar"),document.getElementById("post-comment")&&ctrl.owoBig(),document.getElementById("category-bar-items")&&(categoriesBarActive(),categoryBarMask()),tagsBarActive(),ctrl.musicState(),(set_fps.checked||"true"===localStorage.getItem("fps_state"))&&(document.getElementById("fps-box").style.display="flex")});const marqueeContainer1=document.getElementById("console-music-title"),marqueeContent1=document.getElementById("console-music-title-text"),marqueeContainer2=document.getElementById("console-music-author"),marqueeContent2=document.getElementById("console-music-author-text");var userInfo,ipAddress="",frameCount=0,startTime=performance.now();let animationId;var winbox="";function percent(){let a=document.documentElement.scrollTop||window.pageYOffset,b=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,result=Math.round(a/b*100),btn;result<=99||(result=99),document.getElementById("percent").innerHTML=result}function cardTimes(){year=now.getFullYear(),month=now.getMonth(),week=now.getDay(),date=now.getDate();var cardWidgetCalendar=document.getElementById("card-widget-calendar");if(cardWidgetCalendar){var year_flag=year%4==0&&year%100!=0||year%400==0;switch(week){case 0:weekStr="周日";break;case 1:weekStr="周一";break;case 2:weekStr="周二";break;case 3:weekStr="周三";break;case 4:weekStr="周四";break;case 5:weekStr="周五";break;case 6:weekStr="周六";break;default:console.log("异常情况")}switch(month){case 0:monthStr="一月",dates=31;break;case 1:monthStr="二月",dates=year_flag?29:28;break;case 2:monthStr="三月",dates=31;break;case 3:monthStr="四月",dates=30;break;case 4:monthStr="五月",dates=31;break;case 5:monthStr="六月",dates=30;break;case 6:monthStr="七月",dates=31;break;case 7:monthStr="八月",dates=31;break;case 8:monthStr="九月",dates=30;break;case 9:monthStr="十月",dates=31;break;case 10:monthStr="十一月",dates=30;break;case 11:monthStr="十二月",dates=31;break;default:console.log("异常情况")}var week_first=(week+8-date%7)%7,count_days="",count_flag=!1,ds,row_h=7-week_first,row_f,rows=0==(dates-row_h)%7?Math.floor((dates-row_h)/7)+1:Math.floor((dates-row_h)/7)+2,calendar=cardWidgetCalendar.querySelector("#calendar-main"),gap=cardWidgetCalendar.querySelector("#calendar-date");switch(rows){case 4:gap.style.marginBottom="";break;case 5:gap.style.marginBottom="1.2rem";break;case 6:gap.style.marginBottom="2.4rem";break;default:gap.style.marginBottom="2.4rem"}for(let r=0;r<rows;r++){null==calendar.querySelector(".calendar-r"+r)&&(calendar.innerHTML+="<div class='calendar-r"+r+"'></div>");for(let d=0;d<7;d++)0==r&&d==week_first&&(count_days=1,count_flag=!0),ds=count_days==date?" class='now'":"",null==calendar.querySelector(".calendar-r"+r+" .calendar-d"+d+" a")&&(calendar.querySelector(".calendar-r"+r).innerHTML+="<div class='calendar-d"+d+"'><a"+ds+">"+count_days+"</a></div>"),count_days>=dates&&(count_days="",count_flag=!1),count_flag&&(count_days+=1)}var lunar=chineseLunar.solarToLunar(new Date(year,month,date));animalYear=chineseLunar.format(lunar,"A"),ganzhiYear=chineseLunar.format(lunar,"T").slice(0,-1),lunarMon=chineseLunar.format(lunar,"M"),lunarDay=chineseLunar.format(lunar,"d"),asideTime=new Date("2023/01/01 00:00:00"),asideDay=(now-asideTime)/1e3/60/60/24,asideDayNum=Math.floor(asideDay);var asideWeekNum=week-asideDayNum%7>=0?Math.ceil(asideDayNum/7):Math.ceil(asideDayNum/7)+1;cardWidgetCalendar.querySelector("#calendar-month").innerHTML=monthStr,cardWidgetCalendar.querySelector("#calendar-week").innerHTML=weekStr,cardWidgetCalendar.querySelector("#calendar-date").innerHTML=date.toString().padStart(2,"0"),cardWidgetCalendar.querySelector("#calendar-animal").innerHTML=ganzhiYear+animalYear+"年",cardWidgetCalendar.querySelector("#calendar-lunar").innerHTML=lunarMon+lunarDay,cardWidgetCalendar.querySelector("#aside-time-left").innerHTML=year+"&nbsp;&nbsp;<a style='font-size:1.1rem;font-weight:bold;'>第</a>&nbsp;"+asideWeekNum+"&nbsp;<a style='font-size:1.1rem;font-weight:bold;'>周</a>"}}function asideNote(){var noteCard=document.querySelector(".card-widget.card-announcement"),noteArea=document.querySelector(".card-widget.card-announcement .announcement_content");if(date==dates)noteCard.style.display="",noteArea.innerHTML="<p align='center'>今天月末，做好总结</p>";else if(1==date)noteCard.style.display="",noteArea.innerHTML="<p align='center'>今天月初，做好规划</p>";else switch(lunarDay){case"十六":noteCard.style.display="",noteArea.innerHTML="<p align='center'>今晚月圆</p>";break;default:noteCard.style.display="none"}}"paintWorklet"in CSS&&CSS.paintWorklet.addModule("https://registry.npmmirror.com/cansin-blogdata/latest/files/js/paint.min.js"),window.onload=function(){var set_music=document.querySelector("#set-switch-music input");function dodododoooAdd(){var link=document.createElement("link"),head;link.id="dodododooocss",link.rel="stylesheet",link.type="text/css",link.href="https://dodododooo.com/mplayer2/remote/css/app-mplayer.css",(document.head||document.getElementsByTagName("head")[0]).appendChild(link);var script=document.createElement("script");script.id="dodododooojs",script.type="text/javascript",script.src="https://dodododooo.com/mplayer2/remote/js/app-mplayer.js",document.body.appendChild(script)}function dodododoooDel(){var link=document.getElementById("dodododooocss");link&&document.head.removeChild(link);var script1=document.getElementById("dodododooojs");script1&&document.body.removeChild(script1);var script2=document.getElementById("mplayer");script2&&document.body.removeChild(script2)}if(set_music.checked&&dodododoooAdd(),set_music.addEventListener("change",()=>{set_music.checked?dodododoooAdd():dodododoooDel()}),null!=localStorage.getItem("notice_state")&&(set_notice.checked="true"==localStorage.getItem("notice_state")),null!=localStorage.getItem("fps_state")&&(set_fps.checked="true"==localStorage.getItem("fps_state")),null!=localStorage.getItem("lrc_state")&&"true"==localStorage.getItem("lrc_state")&&document.getElementById("lrcSwitchBtn").click(),null!=localStorage.getItem("system_theme_state")&&(set_sys_theme.checked="true"==localStorage.getItem("system_theme_state")),null!=localStorage.getItem("theme-color")&&ctrl.changeThemeColor(localStorage.getItem("theme-color")),null!=localStorage.getItem("aside-direction")&&"right"==localStorage.getItem("aside-direction")&&ctrl.asideContentDirection(),set_sys_theme.checked){const isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches,isLightMode=window.matchMedia("(prefers-color-scheme: light)").matches;isLightMode?(activateLightMode(),document.querySelector("#set-theme-light input").checked=!0,saveToLocal.set("theme","light",2)):isDarkMode&&(activateDarkMode(),document.querySelector("#set-theme-dark input").checked=!0,saveToLocal.set("theme","dark",2)),colorSchemeQuery.addListener(ctrl.GlobalTheme)}null!=saveToLocal.get("theme")&&("light"==saveToLocal.get("theme")?document.querySelector("#set-theme-light input").checked=!0:document.querySelector("#set-theme-dark input").checked=!0),console.log("\n %cGC音频控制器 v1.3.2 参星阁出品%c https://gavin-chen.top \n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),console.log(`Welcome to:\n%c参星阁:%c https://gavin-chen.top%c\nThis site has been running stably for %c${Math.round(((new Date).getTime()-new Date("2023/01/04 20:53:58").getTime())/864e5)} %c days`,"border:1px #888 solid;border-right:0;border-radius:5px 0 0 5px;padding: 5px 10px;color:white;background:#4976f5;margin:10px 0","border:1px #888 solid;border-left:0;border-radius:0 5px 5px 0;padding: 5px 10px;","","color:#4976f5","")},window.onscroll=percent;var tools={secToTime(s){isNaN(s)&&(s=0);var min=Math.floor(s/60),sec=Math.floor(s%60),t;return min.toString().padStart(2,"0")+":"+sec.toString().padStart(2,"0")},detectBrowser(){const userAgent=navigator.userAgent;let browserName,fullVersion,majorVersion;function getHard(str){let str1=str.substring(str.indexOf("("),str.indexOf(")"));return str1.substring(str1.lastIndexOf(";")+2,str1.length)}let h=userAgent.substring(userAgent.indexOf("(")+1,userAgent.indexOf(")")).toLowerCase(),hard;-1!=h.indexOf("hmscore")||-1!=h.indexOf("huawei")||-1!=h.indexOf("harmonyos")?hard="HarmonyOS设备":-1!=h.indexOf("windows")?hard="PC":-1!=h.indexOf("iphone")?hard="iPhone":-1!=h.indexOf("ipad")?hard="iPad":-1!=h.indexOf("macintosh")?hard="Mac":-1!=h.indexOf("android")?hard="Android":-1!=h.indexOf("cros")?hard="ChromeOS设备":-1!=h.indexOf("playstation")?hard="PlayStation":-1!=h.indexOf("symbian")?hard="Symbian":-1!=h.indexOf("linux")&&(hard="Linux");let u=userAgent.toLowerCase();return/firefox[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="Firefox",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/edge[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)||/edg[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)||/edga[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)||/edgios[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="Edge",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/hbpc[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)||/huaweibrowser[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="HUAWEI Browser",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/miuibrowser[\/\s](\d+\.\d+\.\d+)/.test(u)?(browserName="MIUI Browser",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/vivobrowser[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="vivo Browser",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/heytapbrowser[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="OPPO Browser",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/baiduboxapp[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)||/baidubrowser[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="Baidu Browser",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/ucbrowser[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)||/ubrowser[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="UC Browser",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/quark[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="Quark Browser",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/mqqbrowser[\/\s](\d+\.\d+\.\d+)/.test(u)||/mqqbrowser[\/\s](\d+\.\d+)/.test(u)||/qqbrowser[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="QQ Browser",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/micromessenger[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="Wechat Browser",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/opr[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="Opera",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/crios[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)||/chrome[\/\s](\d+\.\d+\.\d+\.\d+)/.test(u)?(browserName="Chrome",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/safari[\/\s](\d+\.\d+\.\d+)/.test(u)||/safari[\/\s](\d+\.\d+)/.test(u)?(/version[\/\s](\d+\.\d+)/.test(u),browserName="Safari",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):/msie (\d+\.\d+);/.test(u)||/trident[\/\s](\d+\.\d+)/.test(u)?(browserName="Internet Explorer",fullVersion=RegExp.$1,majorVersion=parseInt(RegExp.$1,10)):(browserName="Unknown",fullVersion="Unknown",majorVersion=0),{name:browserName,version:fullVersion,majorVersion:majorVersion,hard:hard}},getOSInfo(){let osName="unknown",osVersion="unknown",u=navigator.userAgent;return-1!=u.indexOf("Windows")?(osName="Windows",-1!=u.indexOf("Windows NT 10.0")?osVersion="10":-1!=u.indexOf("Windows NT 6.3")?osVersion="8.1":-1!=u.indexOf("Windows NT 6.2")?osVersion="8":-1!=u.indexOf("Windows NT 6.1")?osVersion="7":-1!=u.indexOf("Windows NT 6.0")?osVersion="Vista":-1!=u.indexOf("Windows NT 5.1")?osVersion="XP":-1!=u.indexOf("Windows NT 5.0")&&(osVersion="2000")):-1!=u.indexOf("iPhone OS")?(osName="iOS",osVersion=u.match(/OS\s([\d_]+)/)[1].replace(/_/g,".")):-1!=u.indexOf("iPad")?(osName="iPadOS",osVersion=u.match(/CPU OS\s([\d_]+)/)[1].replace(/_/g,".")):-1!=u.indexOf("Mac OS X")?(osName="macOS",osVersion=u.match(/Mac OS X\s([\d_]+)/)[1].replace(/_/g,".")):(-1==u.indexOf("Android 10")||-1==u.toLowerCase().indexOf("huawei")&&-1==u.indexOf("HarmonyOS")&&-1==u.indexOf("HMSCore"))&&(-1==u.indexOf("Android 11")||-1==u.toLowerCase().indexOf("huawei")&&-1==u.indexOf("HarmonyOS")&&-1==u.indexOf("HMSCore"))?-1==u.indexOf("Android 12")||-1==u.toLowerCase().indexOf("huawei")&&-1==u.indexOf("HarmonyOS")&&-1==u.indexOf("HMSCore")?-1!=navigator.userAgent.indexOf("Android")?(osName="Android",osVersion=navigator.userAgent.match(/Android\s([\d.]+)/)[1]):-1!=navigator.userAgent.indexOf("Linux")&&(osName="Linux"):(osName="HarmonyOS",osVersion=4):(osName="HarmonyOS",osVersion=3),{name:osName,version:osVersion}},getMemoryUsage(){const memory=performance.memory,totalMemory=memory.totalJSHeapSize/1048576,usedMemory=memory.usedJSHeapSize/1048576,memoryLimit=memory.jsHeapSizeLimit/1048576;return console.log(`Total memory: ${totalMemory.toFixed(2)} MB`),console.log(`Used memory: ${usedMemory.toFixed(2)} MB`),console.log(`Memory limit: ${memoryLimit.toFixed(2)} MB`),{totalM:totalMemory.toFixed(2),usedM:usedMemory.toFixed(2),limitM:memoryLimit.toFixed(2)}},getBatteryInfo(){"getBattery"in navigator&&navigator.getBattery().then((function(battery){return console.log("Battery level: "+100*battery.level+"%"),console.log("Battery state: "+battery.charging),{level:battery.level,state:battery.charging}}))},getIp(){fetch("https://api.ipify.org/?format=json").then(response=>response.json()).then(data=>{ipAddress=data.ip,console.log("您的 IP 地址："+ipAddress)}).catch(error=>{console.error("获取 IP 地址失败:",error)})},showNote(text,style,delay){new Vue({data:function(){this.$notify({title:"阁主令",message:text,position:"top-left",showClose:!0,customClass:"element-note-bg-"+style,type:style,duration:1e3*delay})}})},showMessage(text,style,delay){new Vue({data:function(){this.$message({message:text,showClose:!0,type:style,duration:1e3*delay})}})},updateFPS(){frameCount++;var currentTime=performance.now(),elapsedTime=currentTime-startTime;if(elapsedTime>=1e3){var fps=Math.round(1e3*frameCount/elapsedTime);document.querySelector("#fps-box .fps-text").textContent=fps,frameCount=0,startTime=currentTime}animationId=requestAnimationFrame(tools.updateFPS)},randomColor(){var colors,n;return["rgba(0,150,255,.95)","rgba(0,255,150,.95)","rgba(255,150,0,.95)","rgba(255,0,150,.95)","rgba(150,255,0,.95)","rgba(150,0,255,.95)"][Math.floor(6*Math.random())]}},ctrl={GlobalTheme(e){console.log(`changed to ${e.matches?"dark":"light"} mode`),e.matches?(activateDarkMode(),document.querySelector("#set-theme-dark input").checked=!0,saveToLocal.set("theme","dark",2)):(activateLightMode(),document.querySelector("#set-theme-light input").checked=!0,saveToLocal.set("theme","light",2))},switchDarkMode(){const nowMode="dark"===document.documentElement.getAttribute("data-theme")?"dark":"light";"light"===nowMode?document.getElementById("set-theme-dark").click():document.getElementById("set-theme-light").click(),"function"==typeof utterancesTheme&&utterancesTheme(),"function"==typeof changeGiscusTheme&&changeGiscusTheme(),"object"==typeof FB&&window.loadFBComment(),"function"==typeof runMermaid&&window.runMermaid()},showConsole(){document.getElementById("console-music-item-main").classList.add("item-show"),document.getElementById("console").classList.add("show"),document.body.style.overflow="hidden",ctrl.initConsoleState()},hideConsole(){var items=document.querySelectorAll(".item-show");for(let i=0;i<items.length;i++)items[i].classList.remove("item-show");document.getElementById("console").classList.remove("show"),document.body.style.overflow=""},consoleBackBtn(){var top_item=document.querySelectorAll(".item-show");if(1==top_item.length)switch(top_item[0].id){case"console-music-item-mini":break;case"console-music-item-main":ctrl.hideConsole();break;case"console-music-item-list":top_item[0].classList.remove("item-show"),document.getElementById("console-music-item-main").classList.add("item-show");break;case"console-songsheet-item-list":top_item[0].classList.remove("item-show"),document.getElementById("console-music-item-list").classList.add("item-show");break;default:console.log("异常情况")}else top_item[top_item.length-1].classList.remove("item-show")},lrcShowHide(){var lrc=document.querySelector(".aplayer > .aplayer-lrc-hide"),a=document.querySelector(".aplayer > .aplayer-lrc"),b=document.getElementById("lrcItem");a&&b&&(null===lrc?(a.classList.add("aplayer-lrc-hide"),b.classList.remove("on"),localStorage.setItem("lrc_state",!1),set_notice.checked&&tools.showMessage("桌面歌词已关闭","success",2)):(a.classList.remove("aplayer-lrc-hide"),b.classList.add("on"),localStorage.setItem("lrc_state",!0),set_notice.checked&&tools.showMessage("桌面歌词已打开","success",2)))},hideAsideBtn(){const $htmlDom=document.documentElement.classList;$htmlDom.contains("hide-aside")?(saveToLocal.set("aside-status","show",2),document.getElementById("asideItem").classList.remove("on"),set_notice.checked&&tools.showMessage("侧边栏已启用","success",2)):(saveToLocal.set("aside-status","hide",2),document.getElementById("asideItem").classList.add("on"),set_notice.checked&&tools.showMessage("侧边栏已隐藏","success",2)),$htmlDom.toggle("hide-aside")},settingsOpen(){alert("开发中...敬请期待！")},musicSwitch(){var music_state=document.querySelector("meting-js.global-music").aplayer.audio.paused,a=document.querySelector("#music-Switch i"),b=document.querySelector("#music-ctrl-btn-center i");music_state?(a.classList.remove("fa-play"),a.classList.add("fa-pause"),b.classList.remove("fa-play"),b.classList.add("fa-pause")):(a.classList.remove("fa-pause"),a.classList.add("fa-play"),b.classList.remove("fa-pause"),b.classList.add("fa-play")),document.querySelector("meting-js.global-music").aplayer.toggle()},musicForward(){document.querySelector("meting-js.global-music").aplayer.skipForward(),ctrl.getMusicInfo()},musicBackward(){document.querySelector("meting-js.global-music").aplayer.skipBack(),ctrl.getMusicInfo()},getMusicInfo(){var music_id=document.querySelector("meting-js.global-music").aplayer.list.index,music_cover=document.querySelector("meting-js.global-music").aplayer.list.audios[music_id].cover,music_author=document.querySelector("meting-js.global-music").aplayer.list.audios[music_id].artist,music_title=document.querySelector("meting-js.global-music").aplayer.list.audios[music_id].name;document.getElementById("console-music-cover").innerHTML="<img src='"+music_cover+"'>",document.querySelector("#console-music-item-main .cover-shadow").style.background="url('"+music_cover+"') center center / 100% 100% no-repeat",document.getElementById("console-music-title-text").innerHTML=music_title,document.getElementById("console-music-author-text").innerHTML=music_author,ctrl.marqueeMusicInfo()},refreshProgress(){var nowTime=document.querySelector("meting-js.global-music").aplayer.audio.currentTime;isNaN(nowTime)&&(nowTime=0);var nowTimeString=tools.secToTime(nowTime),allTime=document.querySelector("meting-js.global-music").aplayer.audio.duration;isNaN(allTime)&&(allTime=0);var allTimeString=tools.secToTime(allTime);document.getElementById("progress-low-btn").innerHTML=nowTimeString,document.getElementById("progress-high-btn").innerHTML=allTimeString,document.getElementById("p_bar").style.width=document.getElementById("p_bar_bg").offsetWidth*(nowTime/allTime)+"px"},importMusicList(){var audios=document.querySelector("meting-js.global-music").aplayer.list.audios,list_html;for(let i=0;i<audios.length;i++)list_html=document.getElementById("console-music-list").innerHTML,document.getElementById("console-music-list").innerHTML=list_html+"<li class='music-list-item'><div class='list-music-info1'><a class='list-music-id' data-pjax-state=''>"+(i+1)+"</a><a class='list-music-state' data-pjax-state=''><i class='iconfont icon-waveform'></i></a></div><div class='list-music-info2'><a class='list-music-title' data-pjax-state=''>"+audios[i].name+"</a><a class='list-music-author' data-pjax-state=''>&nbsp;-&nbsp;"+audios[i].artist+"</a></div></li>"},changeMusicList(Music_id,Music_server){var ap=document.querySelector("meting-js.global-music").aplayer,music_list_url_str="https://metingjs.gavin-chen.top/api?server="+Music_server+"&type=playlist&id="+Music_id;ap.list.clear(),fetch(music_list_url_str).then(response=>response.json()).then(data=>{newSongsheetLen=data.length,console.log("本专辑有"+newSongsheetLen+"首歌曲"),ap.list.add(data)}).catch(error=>console.error(error))},JayMusicList(){var ap=document.querySelector("meting-js.global-music").aplayer;ap.list.clear(),console.log("本专辑有"+JaySongsheet.length+"首歌曲"),ap.list.add(JaySongsheet)},JokerMusicList(){var ap=document.querySelector("meting-js.global-music").aplayer;ap.list.clear(),console.log("本专辑有"+QianSongsheet.length+"首歌曲"),ap.list.add(QianSongsheet)},musicState(){var music_state=document.querySelector("meting-js.global-music").aplayer.audio.paused,a=document.querySelector("#music-Switch i"),b=document.querySelector("#music-ctrl-btn-center i");music_state?(a.classList.remove("fa-pause"),a.classList.add("fa-play"),b.classList.remove("fa-pause"),b.classList.add("fa-play")):(a.classList.remove("fa-play"),a.classList.add("fa-pause"),b.classList.remove("fa-play"),b.classList.add("fa-pause"))},marqueeMusicInfo(){if(marqueeContent1.offsetWidth>marqueeContainer1.offsetWidth){var speed=marqueeContent1.offsetWidth/marqueeContainer1.offsetWidth*6;marqueeContent1.style.animation="marquee-1 "+speed+"s linear infinite"}else marqueeContent1.style.animation="";if(marqueeContent2.offsetWidth>marqueeContainer2.offsetWidth){var speed=marqueeContent2.offsetWidth/marqueeContainer2.offsetWidth*6;marqueeContent2.style.animation="marquee-1 "+speed+"s linear infinite"}else marqueeContent2.style.animation=""},initConsoleState(){var lrc=document.querySelector(".aplayer > .aplayer-lrc-hide"),aplayer=document.querySelector(".aplayer > .aplayer-lrc");null===lrc&&null!=aplayer?document.getElementById("lrcItem").classList.add("on"):document.getElementById("lrcItem").classList.remove("on"),"hide"===saveToLocal.get("aside-status")?document.getElementById("asideItem").classList.add("on"):document.getElementById("asideItem").classList.remove("on"),ctrl.getMusicInfo();var nowVolume=document.querySelector("meting-js.global-music").aplayer.audio.volume;document.getElementById("v_bar").style.width=document.getElementById("v_bar_bg").offsetWidth*nowVolume+"px","light"==saveToLocal.get("theme")?document.querySelector("#set-theme-light input").checked=!0:document.querySelector("#set-theme-dark input").checked=!0},refreshThemeColor(){var cover=document.getElementById("page-header");if(cover){var apiUrl=cover.style.backgroundImage.slice(5,-2)+"?x-oss-process=image/average-hue";fetch(apiUrl).then(response=>response.json()).then(data=>{var mainColor="#"+data.RGB.slice(2);console.log("主色调为："+mainColor),document.documentElement.style.setProperty("--gavin-main-color",mainColor)}).catch(error=>console.error(error))}},sidebarItemsFold(){let e=document.querySelectorAll("#sidebar-menus .menus_items .site-page.group");e&&e.forEach(t=>{t.addEventListener("click",()=>{e.forEach(e=>{e!=t&&e.classList.add("hide")})})})},toPageJump(){let e=document.querySelector("#pagination input.toPageInput");function k(v){for(var p=window.location.pathname,i=[],c=-1;-1!==(c=p.indexOf("/",c+1));)i.push(c);var l=i.length;if(1==l||"page"==p.substring(1,i[l-2]))return["/#content-inner",`/page/${v}/#content-inner`];if(l>=4&&"page"==p.substring(i[l-3]+1,i[l-2])){var j=p.substring(0,i[l-3]+1);return[`${j}`,`${j}page/${v}/`]}return[`${p}`,`${p}page/${v}/`]}e&&(e.addEventListener("input",()=>{let t=document.querySelectorAll(".page-number"),n=t[t.length-1].innerHTML;Number(e.value)>n&&(e.value=n),Number(e.value)<1&&(e.value="")}),e.addEventListener("keyup",t=>{"Enter"==t.key&&""!=e.value&&"0"!=e.value&&pjax.loadUrl("1"==e.value?k(e.value)[0]:k(e.value)[1])}))},getCurrentPage(){if(window.innerWidth<=768&&(document.querySelector("#body-wrap.page.home")||document.getElementById("tag")||document.getElementById("category")||document.getElementById("archive"))){var currentPage=document.querySelector(".pagination .page-number.current").innerHTML;if(currentPage){var toPage=document.querySelector(".pagination .toPageInput");toPage&&(toPage.placeholder="第 "+currentPage+" 页")}}},scrollCategoryBarToRight(){var e=document.getElementById("category-bar-items"),t=document.querySelector(".category-bar-more");function o(){t.style.transform=Math.ceil(e.scrollLeft)+Math.ceil(e.clientWidth)>=Math.ceil(e.scrollWidth)?"rotate(180deg)":""}e.addEventListener("scroll",o);var n=Math.ceil(e.clientWidth);e&&(Math.ceil(e.scrollLeft)+Math.ceil(e.clientWidth)>=Math.ceil(e.scrollWidth)?(e.scroll({left:0,behavior:"smooth"}),t.style.transform="",e.removeEventListener("scroll",o)):(e.scrollBy({left:n,behavior:"smooth"}),t.style.transform=""))},scrollTagBarToEnd(){var e=document.getElementById("tag-bar-items"),t=document.querySelector(".tag-bar-more i");"rotate(180deg)"==t.style.transform?(e.style.maxHeight=window.innerWidth<=768?"111px":"32px",t.style.transform=""):(e.style.maxHeight="calc(100vh - 155px)",t.style.transform="rotate(180deg)")},refreshLikeCount(){var p=window.location.pathname,q;if("post"==p.substring(1,5)){var i=p.substring(6,14);fetch(`https://apis.gavin-chen.top/likecount?mode=get&id=${i}`).then(response=>response.json()).then(data=>{if(200==data.code){var likeCount=data.content[0].count;document.querySelector(".post-reward .like-button .like-count").innerText=likeCount}else console.log(data.message)}).catch(error=>{console.error("获取点赞信息失败:",error)})}},sendArticleLike(){var a=document.querySelector(".post-reward .like-button");if(!a.classList.contains("loading")){var i=window.location.pathname.substring(6,14);a.classList.add("loading"),fetch(`https://apis.gavin-chen.top/likecount?mode=add&id=${i}&ip=${ipAddress}`).then(response=>response.json()).then(data=>{if(200==data.code){var likeCount=data.content[0].count;a.querySelector(".like-count").innerText=likeCount,a.classList.remove("loading"),tools.showMessage("感谢您的认可！","success",2)}else 205==data.code?(a.classList.remove("loading"),tools.showMessage(data.message,"warning",2)):(a.classList.remove("loading"),console.log(data.message),tools.showMessage(data.message,"error",2))}).catch(error=>{console.error("获取点赞信息失败:",error),a.classList.remove("loading")})}},getLocationWeather(){fetch("https://api.ipify.org?format=json").then(response=>response.json()).then(data=>{ipAddress=data.ip,console.log("IP 地址："+ipAddress),fetch("https://apis.gavin-chen.top/weather?ip="+ipAddress+"&output=jsonp").then(response=>response.json()).then(data=>{console.log(data);var day0=data.weatherJson.daily[0],day1=data.weatherJson.daily[1],day2=data.weatherJson.daily[2],district=data.locationJson.result.ad_info.district,city=data.locationJson.result.ad_info.city,province=data.locationJson.result.ad_info.province}).catch(error=>{console.error("获取天气信息失败:",error)})}).catch(error=>{console.error("获取 IP 地址失败:",error)})},owoBig(){let flag=1,owo_time="",m=3,div=document.createElement("div"),body=document.querySelector("body"),observer;div.id="owo-big",body.appendChild(div),new MutationObserver(mutations=>{for(let i=0;i<mutations.length;i++){let dom=mutations[i].addedNodes,owo_body="";2==dom.length&&"OwO-body"==dom[1].className&&(owo_body=dom[1],document.body.clientWidth<=768&&owo_body.addEventListener("contextmenu",e=>e.preventDefault()),owo_body.onmouseover=e=>{flag&&"IMG"==e.target.tagName&&(flag=0,owo_time=setTimeout(()=>{let height=3*e.target.clientHeight,width=3*e.target.clientWidth,left=e.x-e.offsetX-(width-e.target.clientWidth)/2,top=e.y-e.offsetY;left+width>body.clientWidth&&(left-=left+width-body.clientWidth+10),left<0&&(left=10),div.style.cssText=`display:flex; height:${height}px; width:${width}px; left:${left}px; top:${top}px;`,div.innerHTML=`<img src="${e.target.src}">`},300))},owo_body.onmouseout=()=>{div.style.display="none",flag=1,clearTimeout(owo_time)})}}).observe(document.getElementById("post-comment"),{subtree:!0,childList:!0})},coverFlow(){var p=window.location.pathname,q="/"!=p?p.match(/\/([^/]+)\//)[1]:"",a,b;if("movies"==q)(b=document.getElementById("head-cover").querySelector(".head-cover-img")).style.objectPosition||(b.style.objectPosition="calc(50% - 75px) center"),b.style.filter||(b.style.filter="dark"===document.documentElement.getAttribute("data-theme")?"blur(1.5px) brightness(0.7)":"blur(1.5px)"),b.style.transform||(b.style.transform="rotate(-15deg) scale(2)"),b.style.animation||(b.style.animation="coverFlow 30s infinite linear");else if("about"==q){var b;(b=document.querySelector("#head-cover .head-cover-img")).style.objectPosition||(b.style.objectPosition="center 20%")}else"link"==q&&document.querySelector("#post-comment .comment-head").insertAdjacentHTML("beforeend",'<a class="apply-for-flink" onclick="ctrl.applyForFlink()">申请友链</a>')},applyForFlink(){var a=document.querySelector("#twikoo .tk-comments > .tk-submit .el-textarea textarea");a.value="```YML\n- name: \n  link: \n  avatar: \n  descr: \n  siteshot: \n```",a.style.height="159px"},changeThemeColor(i){var colors=[["0,100,255","0,150,255"],["129,78,250","0,234,208"],["66,90,239","255,190,0"]],a=document.querySelector(".setting-right .checked");a&&a.classList.remove("checked"),document.querySelector(".setting-right .theme-color-"+i).classList.add("checked"),document.documentElement.style.setProperty("--gavin-theme-color-light",colors[i-1][0]),document.documentElement.style.setProperty("--gavin-theme-color-dark",colors[i-1][1]),localStorage.setItem("theme-color",i)},asideContentDirection(){var style=document.getElementById("asideContentDirection");if(style)document.head.removeChild(style),document.querySelector("#set-aside-direction .label-active").style.left="3px",document.querySelector("#set-aside-direction .right").classList.remove("active"),document.querySelector("#set-aside-direction .left").classList.add("active"),localStorage.setItem("aside-direction","left");else{var styleTag=document.createElement("style");styleTag.type="text/css",styleTag.id="asideContentDirection",styleTag.innerHTML="#aside-content{order:2;}",document.head.appendChild(styleTag),document.querySelector("#set-aside-direction .label-active").style.left="48px",document.querySelector("#set-aside-direction .left").classList.remove("active"),document.querySelector("#set-aside-direction .right").classList.add("active"),localStorage.setItem("aside-direction","right")}},jsDebug(event){function a(){var code=document.getElementById("jsDebugInput").value;try{var result=eval(code);document.getElementById("jsDebugOutput").value=result}catch(error){document.getElementById("jsDebugOutput").value="运行出错："+error}}"Enter"!==event.key||event.shiftKey||(event.preventDefault(),a())},showAPPs(){document.getElementById("apps").classList.add("show"),document.body.style.overflow="hidden"},hideAPPs(){document.getElementById("apps").classList.remove("show"),document.body.style.overflow=""},sidebarWeather(){document.querySelector(".sidebar-weather .city").innerHTML=document.querySelector(".s-sticker-city ").innerHTML,document.querySelector(".sidebar-weather .condition").innerHTML=document.querySelector(".s-sticker-cond ").innerHTML,document.querySelector(".sidebar-weather .temperature").innerHTML=document.querySelector(".s-sticker-tmp").innerHTML},toggleWinbox(app){document.getElementById("winboxForApps")?winbox.toggleClass("hide"):ctrl.createWinboxForApps(app)},resizeWinbox(){let box=document.getElementById("winboxForApps");if(box&&!box.classList.contains("min")&&!box.classList.contains("max")){var offsetWid=document.documentElement.clientWidth;offsetWid<=768?winbox.resize(.95*offsetWid+"px","80%").move("center","center"):winbox.resize(.6*offsetWid+"px","70%").move("center","center")}},createWinboxForApps(app){var title="",className="",html="";switch(app){case"encryption":title="参星阁 - 加密工具",className="encryption",html='\n                    <div class="select-items">\n                        <select class="select-item type">\n                            <option class="opt" value="MD5">MD5</option>\n                            <option class="opt" value="SHA1">SHA1</option>\n                            <option class="opt" value="SHA3">SHA3</option>\n                            <option class="opt" value="SHA224">SHA224</option>\n                            <option class="opt" value="SHA256">SHA256</option>\n                            <option class="opt" value="SHA384">SHA384</option>\n                            <option class="opt" value="SHA512">SHA512</option>\n                            <option class="opt" value="RIPEMD160">RIPEMD160</option>\n                            <option class="opt" value="AESEncode">AES加密</option>\n                            <option class="opt" value="AESDecode">AES解密</option>\n                        </select>\n                        <select class="select-item code">\n                            <option class="opt" value="Hex">Hex</option>\n                            <option class="opt" value="Base64">Base64</option>\n                        </select>\n                        <select class="select-item case">\n                            <option class="opt" value="Lower">小写</option>\n                            <option class="opt" value="Upper">大写</option>\n                        </select>\n                        <select class="select-item mode hide">\n                            <option class="opt" value="CBC">CBC</option>\n                            <option class="opt" value="CFB">CFB</option>\n                            <option class="opt" value="CTR">CTR</option>\n                            <option class="opt" value="OFB">OFB</option>\n                            <option class="opt" value="ECB">ECB</option>\n                        </select>\n                        <select class="select-item pad hide">\n                            <option class="opt" value="Pkcs7">Pkcs7</option>\n                            <option class="opt" value="Iso97971">Iso97971</option>\n                            <option class="opt" value="Iso10126">Iso10126</option>\n                            <option class="opt" value="AnsiX923">AnsiX923</option>\n                            <option class="opt" value="ZeroPadding">ZeroPadding</option>\n                            <option class="opt" value="NoPadding">NoPadding</option>\n                        </select>\n                        <input type="text" class="select-item key hide" placeholder="密钥">\n                        <input type="text" class="select-item iv hide" placeholder="偏移量">\n                    </div>\n                    <textarea autocomplete="off" rows="6" placeholder="请输入或者粘贴需要处理的文本" class="inner" style="min-height: 32.6px;"></textarea>\n                    <textarea autocomplete="off" rows="6" placeholder="处理结果" class="outer lock" style="min-height: 32.6px;" disabled="disabled"></textarea>\n                    <div class="btns">\n                        <button class="btn blue" type="button" onclick="transcode()">转码</button>\n                        <button class="btn green" type="button" onclick="copyTranscode()">复制</button>\n                        <button class="btn red" type="button" onclick="clearTranscode()">清空</button>\n                    </div>\n                    ',document.head.appendChild(Object.assign(document.createElement("script"),{src:"https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/crypto-js/4.1.1/crypto-js.min.js",id:"crypto-js"}));break;case"clipboard":title="参星阁 - 云剪贴板-Beta",className="clipboard",html='\n                <input type="text" class="select-item id" placeholder="请输入对接暗号">\n                <textarea autocomplete="off" rows="12" placeholder="发送/接收文本区域" style="min-height: 32.6px;"></textarea>\n                <div class="btns">\n                    <button class="btn blue" type="button" onclick="sendTextToClipboard()">我要发送</button>\n                    <button class="btn green" type="button" onclick="getTextFromClipboard()">我要接收</button>\n                </div>\n                ';break;default:title="参星阁 - App",className="",html="暂无应用程序"}let div=document.createElement("div");document.body.appendChild(div),winbox=WinBox({id:"winboxForApps",class:className,index:989,title:title,x:"center",y:"center",minwidth:"300px",height:"60%",background:"#29516C",onmaximize:()=>{div.innerHTML="<style>body::-webkit-scrollbar {display: none;}div#winboxForApps {width: 100% !important;}</style>"},onrestore:()=>{div.innerHTML=""}}),ctrl.resizeWinbox(),window.addEventListener("resize",ctrl.resizeWinbox),winbox.body.innerHTML=html,document.head.appendChild(Object.assign(document.createElement("script"),{src:"https://registry.npmmirror.com/cansin-blogdata/latest/files/js/"+className+".min.js",id:"appScript"})),document.querySelector(".wb-header .wb-close").addEventListener("click",()=>{var script=document.getElementById("appScript");script&&document.head.removeChild(script);var script1=document.getElementById("crypto-js");script1&&document.head.removeChild(script1)}),ctrl.hideAPPs()}};function categoryBarMask(){var categoryBarItems=document.getElementById("category-bar-items"),x=Math.ceil(categoryBarItems.scrollLeft),y=Math.ceil(categoryBarItems.clientWidth),z=Math.ceil(categoryBarItems.scrollWidth);0==x&&z<=y?categoryBarItems.style.webkitMaskImage="":0==x&&z>y?categoryBarItems.style.webkitMaskImage="linear-gradient(-90deg,transparent,#fff 20px)":x>0&&x+y<z?categoryBarItems.style.webkitMaskImage="linear-gradient(90deg,transparent,#fff 20px,#fff calc(100% - 20px),transparent)":x>0&&x+y>=z&&(categoryBarItems.style.webkitMaskImage="linear-gradient(90deg,transparent,#fff 20px)"),categoryBarItems.addEventListener("scroll",categoryBarMask)}function categoriesBarActive(){document.querySelector("#category-bar")&&$(".category-bar-item").removeClass("select");var urlinfo=window.location.pathname,pattern,patbool;if("/"==(urlinfo=decodeURIComponent(urlinfo)))document.querySelector("#category-bar")&&document.getElementById("首页").classList.add("select");else if(/\/categories\/.*?\//.test(urlinfo)){var valuegroup,nowCategorie=urlinfo.split("/")[2];document.querySelector("#category-bar")&&document.getElementById(nowCategorie).classList.add("select")}}function tagsBarActive(){if(document.getElementById("tag-bar-items")){var j=document.querySelector(".article-sort-title").innerText.slice(5);document.getElementById(j).classList.add("select")}}function tagsBarActive_0(){var urlinfo=window.location.pathname,pattern,patbool;if("/"==(urlinfo=decodeURIComponent(urlinfo)))document.querySelector("#tags-bar")&&document.getElementById("首页").classList.add("select");else if(/\/tags\/.*?\//.test(urlinfo)){var valuegroup,nowTag=urlinfo.split("/")[2];document.querySelector("#category-bar")&&document.getElementById(nowTag).classList.add("select")}}function topCategoriesBarScroll(){if(document.getElementById("category-bar-items")){let xscroll=document.getElementById("category-bar-items");xscroll.addEventListener("mousewheel",(function(e){let v=-e.wheelDelta/2;xscroll.scrollLeft+=v,e.preventDefault()}),!1)}}document.getElementById("category-bar-items")&&(categoriesBarActive(),categoryBarMask()),tagsBarActive(),document.onkeydown=function(e){if(123==e.keyCode||e.ctrlKey&&e.shiftKey&&(74===e.keyCode||73===e.keyCode||67===e.keyCode)||e.ctrlKey&&85===e.keyCode)return tools.showNote("开发者模式已打开，请遵循GPL协议","warning",5)},document.addEventListener("copy",()=>{set_notice.checked&&tools.showMessage("复制成功！转载请注明来源！","success",2)});var set_notice=document.querySelector("#set-switch-notice input");set_notice.addEventListener("change",()=>{set_notice.checked?localStorage.setItem("notice_state",!0):localStorage.setItem("notice_state",!1)});var music_list_switch=document.getElementById("music-ctrl-btn-end"),music_list_title=document.getElementById("music-list-title"),settings_btn=document.querySelector("#console .settings-btn"),to_display=document.getElementById("li-set-display"),to_tools=document.getElementById("li-set-tools"),to_about=document.getElementById("li-set-about"),setting_info1=document.getElementById("console-setting-info1"),setting_title1=setting_info1.querySelector(".setting-title"),setting_info2=document.getElementById("console-setting-info2"),setting_title2=setting_info2.querySelector(".setting-title"),setting_info3=document.getElementById("console-setting-info3"),setting_title3=setting_info3.querySelector(".setting-title");music_list_switch.addEventListener("click",()=>{document.getElementById("console-music-item-list").classList.add("item-show")}),music_list_title.addEventListener("click",()=>{document.getElementById("console-songsheet-item-list").classList.add("item-show")}),settings_btn.addEventListener("click",()=>{document.getElementById("console-settings").classList.add("item-show")}),to_display.addEventListener("click",()=>{setting_title1.innerHTML="显示和文本",setting_info1.classList.add("item-show")}),to_about.addEventListener("click",()=>{setting_title2.innerHTML="关于本机",document.querySelector("#console-setting-info2 .set-box-normal:nth-child(3) .setting-detail").innerHTML=tools.detectBrowser().hard,document.querySelector("#console-setting-info2 .set-box-normal:nth-child(4) .setting-detail").innerHTML=tools.getOSInfo().name+" "+tools.getOSInfo().version,document.querySelector("#console-setting-info2 .set-box-normal:nth-child(5) .setting-detail").innerHTML=tools.detectBrowser().name+" "+tools.detectBrowser().version,setting_info2.classList.add("item-show")}),to_tools.addEventListener("click",()=>{setting_title3.innerHTML="辅助功能",setting_info3.classList.add("item-show")}),document.getElementById("set-theme-light").addEventListener("click",()=>{document.querySelector("#set-theme-light input").checked=!0,activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day),"function"==typeof utterancesTheme&&utterancesTheme(),"function"==typeof changeGiscusTheme&&changeGiscusTheme(),"object"==typeof FB&&window.loadFBComment(),"function"==typeof runMermaid&&window.runMermaid(),set_notice.checked&&tools.showMessage("已切换至浅色模式","success",2)}),document.getElementById("set-theme-dark").addEventListener("click",()=>{document.querySelector("#set-theme-dark input").checked=!0,activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night),"function"==typeof utterancesTheme&&utterancesTheme(),"function"==typeof changeGiscusTheme&&changeGiscusTheme(),"object"==typeof FB&&window.loadFBComment(),"function"==typeof runMermaid&&window.runMermaid(),set_notice.checked&&tools.showMessage("已切换至深色模式","success",2)});var set_sys_theme=document.querySelector("#set-switch-systheme input");set_sys_theme.addEventListener("change",()=>{if(set_sys_theme.checked){localStorage.setItem("system_theme_state",!0);const isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches,isLightMode=window.matchMedia("(prefers-color-scheme: light)").matches;isLightMode?(activateLightMode(),document.querySelector("#set-theme-light input").checked=!0,saveToLocal.set("theme","light",2)):isDarkMode&&(activateDarkMode(),document.querySelector("#set-theme-dark input").checked=!0,saveToLocal.set("theme","dark",2)),colorSchemeQuery.addListener(ctrl.GlobalTheme)}else localStorage.setItem("system_theme_state",!1),colorSchemeQuery.removeListener(ctrl.GlobalTheme)});var set_font_size=document.querySelector("#set-font-size input");set_font_size.addEventListener("change",()=>{document.documentElement.style.setProperty("--global-font-size",set_font_size.value+"px")});var set_fps=document.querySelector("#set-switch-fps input");set_fps.addEventListener("change",()=>{set_fps.checked?(localStorage.setItem("fps_state",!0),tools.updateFPS(),document.getElementById("fps-box").style.display="flex",set_notice.checked&&tools.showMessage("实时帧率已打开","success",2)):(localStorage.setItem("fps_state",!1),cancelAnimationFrame(animationId),document.getElementById("fps-box").style.display="none",set_notice.checked&&tools.showMessage("实时帧率已关闭","success",2))}),document.getElementById("jsDebugInput").addEventListener("input",()=>{document.getElementById("jsDebugOutput").value=""});const songsheets=[{id:"songsheet-1",text:"周杰伦",flag:1,func:()=>ctrl.JayMusicList()},{id:"songsheet-2",text:"薛之谦/李荣浩",flag:1,func:()=>ctrl.JokerMusicList()},{id:"songsheet-3",text:"纯音乐",flag:1,func:()=>ctrl.changeMusicList("8167030216","netease")},{id:"songsheet-4",text:"外语",flag:1,func:()=>ctrl.changeMusicList("8658340188","netease")},{id:"songsheet-5",text:"古风",flag:1,func:()=>ctrl.changeMusicList("8167066222","netease")},{id:"songsheet-6",text:"默认歌单",flag:1,func:()=>ctrl.changeMusicList("8086610771","netease")}];songsheets.forEach((songsheet,index)=>{const element=document.getElementById(songsheet.id);element.addEventListener("click",()=>{document.getElementById("console-loading-icon").classList.add("show"),console.log(`正在切换至${songsheet.text}专辑`),global_music_flag=songsheet.flag,songsheet.func(),document.getElementById("music-list-title").innerHTML=songsheet.text})});var addSongsheet=document.getElementById("songsheet-add");addSongsheet.addEventListener("click",()=>{console.log("自定义专辑"),set_notice.checked&&tools.showNote("有空再写吧","warning",3)});var console_music_list=document.getElementById("console-music-list"),music_id=null;console_music_list.addEventListener("click",(function(e){var ap=document.querySelector("meting-js.global-music").aplayer;e.target&&"LI"==e.target.nodeName.toUpperCase()?(music_id=parseInt(e.target.querySelector(".list-music-id").innerHTML),ap.list.switch(music_id-1),ap.play(),ctrl.getMusicInfo()):e.target&&"DIV"==e.target.nodeName.toUpperCase()?(music_id=parseInt(e.target.parentElement.querySelector(".list-music-id").innerHTML),ap.list.switch(music_id-1),ap.play(),ctrl.getMusicInfo()):!e.target||"A"!=e.target.nodeName.toUpperCase()&&"I"!=e.target.nodeName.toUpperCase()?alert("ERROR!"):(music_id=parseInt(e.target.parentElement.parentElement.querySelector(".list-music-id").innerHTML),ap.list.switch(music_id-1),ap.play(),ctrl.getMusicInfo())}),!1);var music_volumebar=document.getElementById("music-volumebar"),v_bar_bg=document.getElementById("v_bar_bg"),v_bar=document.getElementById("v_bar"),v_low=document.getElementById("volume-low-btn"),v_high=document.getElementById("volume-high-btn"),v_bar_bg_Len=v_bar_bg.offsetWidth;music_volumebar.addEventListener("mousedown",(function(e){v_bar_bg.style.height="0.8rem",v_bar.style.backgroundColor="var(--dis-f-0)",v_low.style.color="var(--dis-f-0)",v_high.style.color="var(--dis-f-0)";let x=e.pageX;v_bar.style.width=0+e.offsetX+"px";let v_bar_Len=v_bar.offsetWidth;v_bar_bg_Len=v_bar_bg.offsetWidth;let newVolume=e.offsetX/v_bar_bg_Len;document.querySelector("meting-js.global-music").aplayer.volume(newVolume,!0),document.onmousemove=function(e){let diff=x-e.pageX,v_bar_Len_New=v_bar_Len-diff;v_bar_Len_New<0?v_bar_Len_New=0:v_bar_Len_New>v_bar_bg_Len&&(v_bar_Len_New=v_bar_bg_Len),v_bar.style.width=v_bar_Len_New+"px",newVolume=v_bar_Len_New/v_bar_bg_Len,document.querySelector("meting-js.global-music").aplayer.volume(newVolume,!0)}})),music_volumebar.addEventListener("touchstart",(function(e){v_bar_bg.style.height="0.8rem",v_bar.style.backgroundColor="var(--dis-f-0)",v_low.style.color="var(--dis-f-0)",v_high.style.color="var(--dis-f-0)";let x=e.targetTouches[0].pageX;v_bar.style.width=0+e.targetTouches[0].offsetX+"px";let v_bar_Len=v_bar.offsetWidth;v_bar_bg_Len=v_bar_bg.offsetWidth;let newVolume=e.targetTouches[0].offsetX/v_bar_bg_Len;document.querySelector("meting-js.global-music").aplayer.volume(newVolume,!0),document.ontouchmove=function(e){let diff=x-e.targetTouches[0].pageX,v_bar_Len_New=v_bar_Len-diff;v_bar_Len_New<0?v_bar_Len_New=0:v_bar_Len_New>v_bar_bg_Len&&(v_bar_Len_New=v_bar_bg_Len),v_bar.style.width=v_bar_Len_New+"px",newVolume=v_bar_Len_New/v_bar_bg_Len,document.querySelector("meting-js.global-music").aplayer.volume(newVolume,!0)}}),{passive:!0});var music_progressbar=document.getElementById("music-progressbar"),p_bar_bg=document.getElementById("p_bar_bg"),p_bar=document.getElementById("p_bar"),p_low=document.getElementById("progress-low-btn"),p_high=document.getElementById("progress-high-btn"),p_bar_Len_New=0,p_bar_bg_Len=p_bar_bg.offsetWidth,ctrl_flag=1,mousemove_flag=1;music_progressbar.addEventListener("mousedown",(function(e){p_bar_bg.style.height="0.8rem",p_bar.style.backgroundColor="var(--dis-f-0)",p_low.style.color="var(--dis-f-0)",p_high.style.color="var(--dis-f-0)",ctrl_flag=0,global_music_flag=1;let x=e.pageX,p_bar_Len=p_bar.offsetWidth;p_bar_bg_Len=p_bar_bg.offsetWidth,document.onmousemove=function(e){let diff=x-e.pageX;mousemove_flag=0,(p_bar_Len_New=p_bar_Len-diff)<0?p_bar_Len_New=0:p_bar_Len_New>p_bar_bg_Len&&(p_bar_Len_New=p_bar_bg_Len),p_bar.style.width=p_bar_Len_New+"px";let all_Time=document.querySelector("meting-js.global-music").aplayer.audio.duration,current_time=p_bar_Len_New/p_bar_bg_Len*all_Time;document.getElementById("progress-low-btn").innerHTML=tools.secToTime(current_time)}})),music_progressbar.addEventListener("touchstart",(function(e){p_bar_bg.style.height="0.8rem",p_bar.style.backgroundColor="var(--dis-f-0)",p_low.style.color="var(--dis-f-0)",p_high.style.color="var(--dis-f-0)",ctrl_flag=0,global_music_flag=1;let x=e.targetTouches[0].pageX,p_bar_Len=p_bar.offsetWidth;p_bar_bg_Len=p_bar_bg.offsetWidth,document.ontouchmove=function(e){let diff=x-e.targetTouches[0].pageX;mousemove_flag=0,(p_bar_Len_New=p_bar_Len-diff)<0?p_bar_Len_New=0:p_bar_Len_New>p_bar_bg_Len&&(p_bar_Len_New=p_bar_bg_Len),p_bar.style.width=p_bar_Len_New+"px";let all_Time=document.querySelector("meting-js.global-music").aplayer.audio.duration,current_time=p_bar_Len_New/p_bar_bg_Len*all_Time;document.getElementById("progress-low-btn").innerHTML=tools.secToTime(current_time)}}),{passive:!0}),document.onmouseup=function(){if(v_bar_bg.style.height="0.4rem",v_bar.style.backgroundColor="var(--font-color)",v_low.style.color="var(--font-color)",v_high.style.color="var(--font-color)",p_bar_bg.style.height="0.4rem",p_bar.style.backgroundColor="var(--font-color)",p_low.style.color="var(--font-color)",p_high.style.color="var(--font-color)",0==ctrl_flag&&0==mousemove_flag){let all_Time=document.querySelector("meting-js.global-music").aplayer.audio.duration,new_Time=p_bar_Len_New/p_bar_bg_Len*all_Time;document.querySelector("meting-js.global-music").aplayer.seek(new_Time)}global_music_flag=0,ctrl_flag=1,mousemove_flag=1,document.onmousemove=null},document.ontouchend=function(){if(v_bar_bg.style.height="0.4rem",v_bar.style.backgroundColor="var(--font-color)",v_low.style.color="var(--font-color)",v_high.style.color="var(--font-color)",p_bar_bg.style.height="0.4rem",p_bar.style.backgroundColor="var(--font-color)",p_low.style.color="var(--font-color)",p_high.style.color="var(--font-color)",0==ctrl_flag&&0==mousemove_flag){let all_Time=document.querySelector("meting-js.global-music").aplayer.audio.duration,new_Time=p_bar_Len_New/p_bar_bg_Len*all_Time;document.querySelector("meting-js.global-music").aplayer.seek(new_Time)}global_music_flag=0,ctrl_flag=1,mousemove_flag=1,document.ontouchmove=null};